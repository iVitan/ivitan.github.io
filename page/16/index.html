<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-144334903-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    
    

    



    <meta charset="utf-8">
    
    
    
    <link rel="canonical" href="https://vitan.me/page/16/">
    
    
    <title>Vitan&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Coder,Linux,Web,Blog...">
    <meta name="description" content="Vitan&#39;s Personal Website.">
<meta property="og:type" content="website">
<meta property="og:title" content="Vitan&#39;s Blog">
<meta property="og:url" content="https://vitan.me/page/16/index.html">
<meta property="og:site_name" content="Vitan&#39;s Blog">
<meta property="og:description" content="Vitan&#39;s Personal Website.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Vitan">
<meta property="article:tag" content="Coder">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Web">
<meta property="article:tag" content="Blog...">
<meta name="twitter:card" content="summary">
    
        <link rel="alternate" type="application/atom+xml" title="Vitan&#39;s Blog" href="/xml/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/ivitan.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Vitan</h5>
          <a href="mailto:admin@vitan.me" title="admin@vitan.me" class="mail">admin@vitan.me</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-info-circle"></i>
                关于
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/ivitan" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Vitan&#39;s Blog</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        
            <a href="https://github.com/ivitan" class="header-icon waves-effect waves-circle waves-light" target="_blank" title="Github">
                <i class="icon icon-lg icon-github"></i>
            </a>
        
    </div>
</header>
<header class="content-header index-header">

    <div class="container fade-scale">
        <h1 class="title">Vitan&#39;s Blog</h1>
        <h5 class="subtitle">
            
            ⁣⁣⁣求知若饥，虚心若愚。
            
        </h5>
    </div>

    


</header>

<div class="container body-wrap">

    <ul class="post-list">
    
        <li class="post-list-item fade">
            <article id="post-Vim"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-04-02 15:10:25" datetime="2018-04-02T07:10:25.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-04-02</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Vim.html">Vim 基础</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Vim 基础
&lt;!--more--&gt;</p>
<h1>Vim 基础</h1>
<p>指令图
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://i.loli.net/2018/04/06/5ac73a8e7333f.png" alt="指令图" title="">
                </div>
                <div class="image-caption">指令图</div>
            </figure></p>
<p>Vim（ViImproved）编辑器是vi的扩展版，比vi功能更加强大，是功能强大的跨平台文本文件编辑工具，可以利用它可以建立、修改文本文件等。Vim有三种操作模式，分别称为 编辑模式、插入模式 和 命令模式，当运行Vim时，首会进入命令模式。</p>
<h1>命令模式</h1>
<p>Vim命令模式下可以进行很多操作，例如光标跳动到指定的单词、行；复制、删除某行甚至很多行以及全文都可以，反正功能真的太强大了，以下就作出详解：</p>
<h2>小范围</h2>
<ol>
<li>如果键盘上有上、下、左、右箭头的导航键，就由这些键来完成光标的移动。另外，可以用下面的键完成同样的 按字符移动 功能：</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">k</td>
<td style="text-align:left">向上移动</td>
</tr>
<tr>
<td style="text-align:left">j</td>
<td style="text-align:left">向下移动</td>
</tr>
<tr>
<td style="text-align:left">h</td>
<td style="text-align:left">向左移动</td>
</tr>
<tr>
<td style="text-align:left">l</td>
<td style="text-align:left">向右移动</td>
</tr>
<tr>
<td style="text-align:left">30j</td>
<td style="text-align:left">向下移动30行</td>
</tr>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">到行首</td>
</tr>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">到行首第一个字符，如果前面有空格的话</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">到行尾</td>
</tr>
<tr>
<td style="text-align:left">gg</td>
<td style="text-align:left">快速到文件头</td>
</tr>
<tr>
<td style="text-align:left">G</td>
<td style="text-align:left">快速到文件尾</td>
</tr>
<tr>
<td style="text-align:left">100G</td>
<td style="text-align:left">跳转到第100行</td>
</tr>
</tbody>
</table>
<hr>
<h2>稍大范围移动光标的命令</h2>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ctrl+f</td>
<td style="text-align:left">向文件尾部翻一屏</td>
</tr>
<tr>
<td style="text-align:left">ctrl+b</td>
<td style="text-align:left">向文件首部翻一屏</td>
</tr>
<tr>
<td style="text-align:left">ctrl+d</td>
<td style="text-align:left">向文件尾部翻半屏</td>
</tr>
<tr>
<td style="text-align:left">ctrl+u</td>
<td style="text-align:left">向文件首部翻半屏</td>
</tr>
</tbody>
</table>
<hr>
<h2>指定某行大范围移动</h2>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">G</td>
<td style="text-align:left">光标跳到文件尾行</td>
</tr>
<tr>
<td style="text-align:left">gg</td>
<td style="text-align:left">光标跳到文件首行</td>
</tr>
<tr>
<td style="text-align:left">#G</td>
<td style="text-align:left">“#”指数字，输入随意一个数字就会调到指定的行数</td>
</tr>
</tbody>
</table>
<hr>
<h2>跳转字母</h2>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">H</td>
<td style="text-align:left">光标跳到当前一页的首行的第一个字母</td>
</tr>
<tr>
<td style="text-align:left">M</td>
<td style="text-align:left">光标跳到当前一页的中间行的第一个字母</td>
</tr>
<tr>
<td style="text-align:left">L</td>
<td style="text-align:left">光标跳到当前一页的尾行的第一个字母</td>
</tr>
</tbody>
</table>
<hr>
<p>H M L 命令还可以加数字。如<code>2H</code>表示将光标移到屏幕的第2行；3M 表示将光标移动到中间行的上面第三行；3L 表示将光标移到屏幕的倒数第3行。</p>
<h2>行内移动</h2>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">w</td>
<td style="text-align:left">右移光标到下一个字的开头</td>
</tr>
<tr>
<td style="text-align:left">e</td>
<td style="text-align:left">右移光标到一个字的末尾</td>
</tr>
<tr>
<td style="text-align:left">b</td>
<td style="text-align:left">左移光标到前一个字的开头</td>
</tr>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">移动光标，到本行的第一个非空字符</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">右移光标，到本行的末尾</td>
</tr>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">数字０，左移光标到本行的开始</td>
</tr>
</tbody>
</table>
<hr>
<h1>搜索匹配</h1>
<p>vim除了在命令模式下进行光标移动外，还提供了强大的字符串搜索功能。要查找文件中指定字或短语出现的位置，可以用Vim直接进行搜索，而不必以手工方式进行。</p>
<h2>搜索方法</h2>
<p>键入字符 <code>/</code> 后面跟以要搜索的字符串，然后按回车键。编辑程序执行正向搜索（即朝文件末尾方向），并在找到指定字符串后，将光标停到该字符串的开头；键入 n 命令可以继续执行搜索，找出这一字符串下次出现的位置。用字符 <code>?</code> 取代 <code>/</code> ，可以实现反向搜索（朝文件开头方向）例如：</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">/root</td>
<td style="text-align:left">正向搜索字符串root</td>
</tr>
<tr>
<td style="text-align:left">n</td>
<td style="text-align:left">继续搜索，找出root下次出现在的位置</td>
</tr>
<tr>
<td style="text-align:left">N</td>
<td style="text-align:left">继续搜索，找出root上次出现在的位置</td>
</tr>
<tr>
<td style="text-align:left">?root</td>
<td style="text-align:left">反向搜索字符串root</td>
</tr>
</tbody>
</table>
<hr>
<h1>字符编辑、替换</h1>
<p>Vim常规的删除命令是d、x(前者删除行后者删除字符),结合Vim的其他特性可以实现基础的删除功能。将光标定位于文件内指定位置后，可以用其他字符来替换光标所指向的字符，或从当前光标位置删除一个或多个字符或一行、多行。例如：</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">x</td>
<td style="text-align:left">删除光标处的字符</td>
</tr>
<tr>
<td style="text-align:left">#x</td>
<td style="text-align:left">删除光标处起始的#个字符</td>
</tr>
<tr>
<td style="text-align:left">xp</td>
<td style="text-align:left">交换光标所在处的字符及其后面字符的位置</td>
</tr>
<tr>
<td style="text-align:left">~</td>
<td style="text-align:left">转换大小写</td>
</tr>
<tr>
<td style="text-align:left">J</td>
<td style="text-align:left">删除当前行后的换行符</td>
</tr>
<tr>
<td style="text-align:left">r</td>
<td style="text-align:left">替换光标所在处的字符</td>
</tr>
<tr>
<td style="text-align:left">R</td>
<td style="text-align:left">切换成REPLACE模式</td>
</tr>
</tbody>
</table>
<h1>复制、粘贴、剪切、删除</h1>
<h2>黏贴</h2>
<p>从正文中删除的内容（如字符、字或行）并没有真正丢失，而是被剪切并复制到了一个内存缓冲区中。用户可将其粘贴到正文中的指定位置。完成这一操作的命令是：</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">p</td>
<td style="text-align:left">粘贴复制或剪切的内容</td>
</tr>
<tr>
<td style="text-align:left">p</td>
<td style="text-align:left">小写字母 p，将缓冲区的内容粘贴到光标的后面</td>
</tr>
<tr>
<td style="text-align:left">P</td>
<td style="text-align:left">大写字母 P，将缓冲区的内容粘贴到光标的前面</td>
</tr>
<tr>
<td style="text-align:left">3p</td>
<td style="text-align:left">将复制或剪切的内容粘贴三次</td>
</tr>
</tbody>
</table>
<hr>
<h2>复制</h2>
<p>有时需要复制一段正文到新位置，同时保留原有位置的内容。这种情况下，首先应当把指定内容复制（而不是剪切）到内存缓冲区。完成这一操作的命令是：</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">y</td>
<td style="text-align:left">复制整行；同时y后面还可以和w,e,b,$,^,等符号连用，例如：yw表示复制光标所在处的一个单词</td>
</tr>
<tr>
<td style="text-align:left">10yy</td>
<td style="text-align:left">向下复制10行</td>
</tr>
<tr>
<td style="text-align:left">yw</td>
<td style="text-align:left">复制光标开始的一个单词</td>
</tr>
<tr>
<td style="text-align:left">y$</td>
<td style="text-align:left">复制光标到行尾</td>
</tr>
<tr>
<td style="text-align:left">yfB</td>
<td style="text-align:left">复制光标到第一个大写B中间的内容</td>
</tr>
<tr>
<td style="text-align:left">y2fB</td>
<td style="text-align:left">复制光标到第二个大写B中间的内容</td>
</tr>
<tr>
<td style="text-align:left">yy</td>
<td style="text-align:left">复制行</td>
</tr>
<tr>
<td style="text-align:left">#yy</td>
<td style="text-align:left">&quot;#&quot;表示数字也就是复制几行</td>
</tr>
<tr>
<td style="text-align:left">#&quot;tyy</td>
<td style="text-align:left">“#”表示任何数，“t“表示T这个寄容器，linux中有36个剪寄容器，即a-z，0-9；复制行数可以选择放到任何这36个寄容器上；粘贴的话&quot;tp表示将t寄存器内容粘贴到文件中。</td>
</tr>
</tbody>
</table>
<h2>剪切</h2>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">x</td>
<td style="text-align:left">向剪切一个一个字符，如果是在行尾，则为向前剪切</td>
</tr>
<tr>
<td style="text-align:left">3x</td>
<td style="text-align:left">剪切三个</td>
</tr>
<tr>
<td style="text-align:left">xp</td>
<td style="text-align:left">非行尾交换两个字符，如从bs变成sb</td>
</tr>
</tbody>
</table>
<h2>删除</h2>
<p>删除的内容会放到剪贴板，按 p 即可粘贴到其他地方</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">dd</td>
<td style="text-align:left">删除一行</td>
</tr>
<tr>
<td style="text-align:left">%d</td>
<td style="text-align:left">删除全文</td>
</tr>
<tr>
<td style="text-align:left">200dd</td>
<td style="text-align:left">删除200行</td>
</tr>
<tr>
<td style="text-align:left">dw</td>
<td style="text-align:left">删除一个单词 （最喜欢啦）</td>
</tr>
<tr>
<td style="text-align:left">df”</td>
<td style="text-align:left">删除到出现的第一个双引</td>
</tr>
</tbody>
</table>
<h2>撤销和重复</h2>
<p>在编辑文档的过程中，为消除某个错误的编辑命令造成的后果，可以用撤消命令。另外，如果用户希望在新的光标位置重复前面执行过的编辑命令，可用重复命令。</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">u</td>
<td style="text-align:left">撤消前一条命令的结果，可以和数字连用</td>
</tr>
<tr>
<td style="text-align:left">.</td>
<td style="text-align:left">重复最后一条修改正文的命令</td>
</tr>
</tbody>
</table>
<hr>
<h1>插入模式(Insert)（编辑模式）</h1>
<ul>
<li>进入插入模式
在编辑模式下正确定位光标之后，可用以下命令切换到插入模式：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">i</td>
<td style="text-align:left">在光标左侧插入正文</td>
</tr>
<tr>
<td style="text-align:left">a</td>
<td style="text-align:left">在光标右侧插入正文</td>
</tr>
<tr>
<td style="text-align:left">o</td>
<td style="text-align:left">在光标所在行的下一行增添新行</td>
</tr>
<tr>
<td style="text-align:left">I</td>
<td style="text-align:left">在光标所在行的末尾插入</td>
</tr>
<tr>
<td style="text-align:left">A</td>
<td style="text-align:left">在光标所在行的末尾插入</td>
</tr>
<tr>
<td style="text-align:left">O</td>
<td style="text-align:left">在光标所在行的上一行增添新行</td>
</tr>
</tbody>
</table>
<ul>
<li>退出插入模式
退出插入模式的方法是，按 <code>ESC</code> 退出插入模式之后，将会进入编辑模式 。</li>
</ul>
<h1>扩展命令模式(extended command )</h1>
<p>在 Vim 的命令模式下，可以使用复杂的命令。在命令模式下按 <code>shift+ ：</code>并显示冒号，此时已进入命令模式。命令模式又称末行模式，用户输入的内容均显示在屏幕的最后一行，按回车键，Vim 执行命令。</p>
<h2>打开、保存、退出</h2>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">：！file</td>
<td style="text-align:left">在打开的vim中，如果想看一个文件可以：！后面跟文件</td>
</tr>
<tr>
<td style="text-align:left">：r！file</td>
<td style="text-align:left">将打开的文件读入到vim中</td>
</tr>
<tr>
<td style="text-align:left">：w</td>
<td style="text-align:left">file将当前文件另存为</td>
</tr>
</tbody>
</table>
<hr>
<h2>字符串搜索</h2>
<p>如果希望进行正向搜索，将待搜索的字符串置于两个 / 之间；如果希望反向搜索，则将字符串放在两个 ? 之间。</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">n</td>
<td style="text-align:left">查找下一个匹配</td>
</tr>
<tr>
<td style="text-align:left">N</td>
<td style="text-align:left">查找上一个匹配</td>
</tr>
<tr>
<td style="text-align:left">2n</td>
<td style="text-align:left">查找下面第二个匹配</td>
</tr>
<tr>
<td style="text-align:left">:/root/</td>
<td style="text-align:left">正向搜索，将光标移到下一个包含字符串 root 的行</td>
</tr>
<tr>
<td style="text-align:left">:?root?</td>
<td style="text-align:left">反向搜索，将光标移到上一个包含字符串 root 的行</td>
</tr>
<tr>
<td style="text-align:left">:/root/w file</td>
<td style="text-align:left">正向搜索，并将第一个包含字符串 root的行写入 file 文件</td>
</tr>
<tr>
<td style="text-align:left">/str1/,str2/w file</td>
<td style="text-align:left">正向搜索，并将包含字符串 str1 的行至包含字符串 str2 的行写</td>
</tr>
</tbody>
</table>
<hr>
<h2>正文替换</h2>
<p>利用 <code>：s</code> 命令可以实现字符串的替换。具体的用法包括：</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">:%s/str1/str2/</td>
<td style="text-align:left">用字符串 str2 替换行中首次出现的字符串 str1</td>
</tr>
<tr>
<td style="text-align:left">:s/str1/str2/</td>
<td style="text-align:left">用字符串 str2 替换行中所有出现的字符串 str1</td>
</tr>
<tr>
<td style="text-align:left"><code>:.,$ s/str1/str2/g</code></td>
<td style="text-align:left">用字符串 str2 替换正文当前行到末尾所有出现的字符串 str1</td>
</tr>
<tr>
<td style="text-align:left">:1,$ s/str1/str2/g</td>
<td style="text-align:left">用字符串 str2 替换正文中所有出现的字符串 str1</td>
</tr>
<tr>
<td style="text-align:left">:g/str1/s//str2/g</td>
<td style="text-align:left">功能同上</td>
</tr>
<tr>
<td style="text-align:left">:m,ns/str1/str2/g</td>
<td style="text-align:left">将从m行到n行的str1替换成str2</td>
</tr>
</tbody>
</table>
<hr>
<ul>
<li>从上述例子中可以总结这些：</li>
<li><code>g</code> 放在命令末尾，表示对搜索字符串的每次出现进行替换,不止匹配每行中的第一次出现；不加 <code>g</code>，表示只对搜索字符串的首次出现进行替换；<code>g</code> 放在命令开头，表示对正文中所有包含搜索字符串的行进行替换操作</li>
<li>表示后面跟着一串替换的命令</li>
<li>表示替换范围是所有行，即全文</li>
</ul>
<h1>分屏管理</h1>
<p>普通的Vim模式，打开一个Vim程序只能查看一个文件，如果想同时查看多个文件，就需要用到Vim分屏与标签页功能。</p>
<h2>多文件分割</h2>
<ul>
<li>vim -o|-O FILE1 FILE2 ...
<ul>
<li>-o：水平分割</li>
<li>-O：垂直分割</li>
</ul>
</li>
</ul>
<h2>单文件窗口分割：</h2>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Ctrl+w,s</td>
<td style="text-align:left">水平分割</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+w,v</td>
<td style="text-align:left">垂直分割</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+w,q</td>
<td style="text-align:left">取消相邻窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+w,o</td>
<td style="text-align:left">取消全部相邻窗口</td>
</tr>
<tr>
<td style="text-align:left">wqall</td>
<td style="text-align:left">退出</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>Via</strong></p>
<ul>
<li><a href="http://blog.51cto.com/19940919/1953791" target="_blank" rel="noopener">Vimi基础</a></li>
</ul>

    

        <a href="/posts/Vim.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ArchLinux/" rel="tag">ArchLinux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vim/" rel="tag">Vim</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Win/" rel="tag">Win</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Termux-Openjdk"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-04-01 14:56:40" datetime="2018-04-01T06:56:40.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-04-01</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Diary/">Diary</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Termux-Openjdk.html">Termux 安装 Openjdk</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Termux 安装 Openjdk
&lt;!--more--&gt;</p>
<h1>下载 Openjdk</h1>
<p>JDK1.8</p>
<ul>
<li><a href="https://drive.google.com/file/d/1PdNqmLrhFlBoRlpCW-mC6CHbVS_Lva9D/view?usp=drivesdk" target="_blank" rel="noopener">aarch64谷歌云盘</a></li>
<li><a href="https://pan.baidu.com/s/14T-2L2j3gZaxfbwkZxJxqg" target="_blank" rel="noopener">aarch64百度云盘密码:ryea</a></li>
</ul>
<p>JDK1.9</p>
<ul>
<li><s><a href="https://mega.nz/#!aZgwVQpD!o8qNcQmObEEKn7qb5MZaDKbT3PUCAoCLwbHtAjDIKho" target="_blank" rel="noopener">aarch64下载</a></s></li>
</ul>
<h1>安装 Openjdk</h1>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> storage/downloads</span><br><span class="line">dpkg -i openjdk9_9.2017.8.20_aarch64.deb</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s1.ax1x.com/2018/04/01/9zmkW9.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>

    

        <a href="/posts/Termux-Openjdk.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Termux/" rel="tag">Termux</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Linux-Deb"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-04-01 14:18:47" datetime="2018-04-01T06:18:47.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-04-01</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux/">Linux</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Linux-Deb.html">Linux 中 .Deb 相关</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Lineu中 <code>.deb</code> 包的使用，修改。
&lt;!--more--&gt;</p>
<h1>为何物</h1>
<p>.deb 是 Unix系统(其实主要是Linux)下的安装包，基于 <code>tar</code> 包，因此本身会记录文件的权限(读/写/可执行)以及所有者/用户组。</p>
<h1>怎么用</h1>
<h2>制作.deb包</h2>
<ul>
<li>原理</li>
</ul>
<ol>
<li>deb包通常包含两部分：控制信息(DEBIAN目录)、安装内容(模拟&quot;/&quot;目录)</li>
<li>通过解开已有的 deb 包看其中内容
<ul>
<li>释放安装内容到dirname目录中
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -X xxx.deb dirname</span><br></pre></td></tr></table></figure></li>
<li>释放控制信息到当前目录下的DEBIAN子目录中
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -e xxx.deb</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h2>准备</h2>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install dh-make checkinstall</span><br></pre></td></tr></table></figure></p>
<h2>下载软件源码包</h2>
<ul>
<li>使用checkinstall方法创建deb包
<ul>
<li>checkinstall 不仅可以生成 deb 包，还可以生成 rpm 包，使用简单。
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar xvjf fceu-0.98.12.src.tar.bz2 <span class="comment"># 解包</span></span><br><span class="line"><span class="built_in">cd</span> fceu;./configure;make <span class="comment"># 编译</span></span><br><span class="line">checkinstall -D -install=no --pkgversion=0.98 --pkgname=fceuxy make install</span><br><span class="line"><span class="comment"># 制作deb包 此时当前目录下生成了deb包。</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>使用dpkg方法创建deb包
<ul>
<li>dpkg是最基本的制作deb包的方法，推荐使用
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar xvjf fceu-0.98.12.src.tar.bz2 <span class="comment"># 解包</span></span><br><span class="line">mv fceu fceu-0.98 <span class="comment"># 改目录名为 包名-版本号</span></span><br><span class="line"><span class="built_in">cd</span> fceu-0.98</span><br><span class="line">dh_make -f ../fceu-0.98.12.src.tar.bz2</span><br><span class="line"><span class="comment"># 生成制作deb包所需的默认信息</span></span><br></pre></td></tr></table></figure>
此时当前目录下生成了debian目录，此时通常修改两个文件： 1. 修改debian/control文件，配置你的信息，具体字段见参考资料部分 2. 修改debian/rules脚本，它决定编译参数(也可以不改)
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:::bash</span><br><span class="line">dpkg-buildpackage -rfakeroot</span><br></pre></td></tr></table></figure>
此时可以看到，上层目录中已建立了deb包。</li>
</ul>
</li>
</ul>
<h2>修改已有deb包</h2>
<ul>
<li>自己创建deb所需目录结构(控制信息和安装内容)，然后打包，一般使用这种方法来修改已有的deb包，而不是新建deb包，命令如下：
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p <span class="built_in">test</span></span><br><span class="line">dpkg -X xxx.deb <span class="built_in">test</span> <span class="comment"># 解包安装内容</span></span><br><span class="line"><span class="built_in">cd</span> <span class="built_in">test</span></span><br><span class="line">dpkg -e ../xxx.deb <span class="comment"># 解包控制信息</span></span><br></pre></td></tr></table></figure></li>
<li>修改DEBIAN目录下的内容，然后重新打包：
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ../</span><br><span class="line">dpkg -b <span class="built_in">test</span> xxx_new.deb <span class="comment"># 重新打包</span></span><br></pre></td></tr></table></figure></li>
<li>修改DEBIAN目录下的内容，然后重新打包：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ..&#x2F;</span><br><span class="line">dpkg -b test xxx_new.deb # 重新打包</span><br></pre></td></tr></table></figure></li>
</ul>
<h1>deb包常用命令</h1>
<ul>
<li>
<p>查看deb包含有哪些文件
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dpkg -c xxx.deb <span class="comment"># 安装前根据deb文件查看</span></span><br><span class="line">dpkg -L debname <span class="comment"># 安装后根据包名查看</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>查看某个文件属于哪个deb包
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -S filefullpath</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>根据软件包名模糊检索
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l|grep xxx</span><br><span class="line"><span class="comment"># 在已安装的软件包列表中搜索</span></span><br><span class="line">apt-cache search xxx</span><br><span class="line"><span class="comment"># 在源中的所有软件包列表中搜索</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>下载源码包
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get <span class="built_in">source</span> packagename</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<h1>安装</h1>
<ul>
<li>安装deb包
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i xxx.deb</span><br></pre></td></tr></table></figure></li>
</ul>
<h2>卸载</h2>
<ul>
<li>
<p>卸载deb包
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -r debname</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>完全卸载deb包（包含配置文件)
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -P debname</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<hr>
<p><strong>Via</strong></p>
<ul>
<li><a href="http://yysfire.github.io/linux/building-deb-package-from-source-and-modify-deb-package.html" target="_blank" rel="noopener">从源代码制作deb包的两种方法以及修改已有deb包</a></li>
</ul>

    

        <a href="/posts/Linux-Deb.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Termux/" rel="tag">Termux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Oh-My-ZSH-Theme"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-03-31 09:13:37" datetime="2018-03-31T01:13:37.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-03-31</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux/">Linux</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Oh-My-ZSH-Theme.html">Oh-My-Zsh 主题</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>自定义主题shell提示符.
&lt;!--more--&gt;</p>
<h1>修改oh-my-zsh主题</h1>
<h2>主题目录</h2>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.oh-my-zsh/themes</span><br><span class="line">vim theme-name</span><br></pre></td></tr></table></figure></p>
<h2>主题提示符</h2>
<table>
<thead>
<tr>
<th style="text-align:center">代码</th>
<th style="text-align:center">解释</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">%T</td>
<td style="text-align:center">系统时间(时：分)</td>
</tr>
<tr>
<td style="text-align:center">%*</td>
<td style="text-align:center">系统时间(时：分：秒)</td>
</tr>
<tr>
<td style="text-align:center">%D</td>
<td style="text-align:center">系统日期(年-月-日)</td>
</tr>
<tr>
<td style="text-align:center">%n</td>
<td style="text-align:center">你的用户名</td>
</tr>
<tr>
<td style="text-align:center">%B - %b</td>
<td style="text-align:center">开始到结束使用粗体打印</td>
</tr>
<tr>
<td style="text-align:center">%U - %u</td>
<td style="text-align:center">开始到结束使用下划线打印</td>
</tr>
<tr>
<td style="text-align:center">%d</td>
<td style="text-align:center">你目前的工作目录</td>
</tr>
<tr>
<td style="text-align:center">%~</td>
<td style="text-align:center">你目前的工作目录相对于～的相对路径</td>
</tr>
<tr>
<td style="text-align:center">%M</td>
<td style="text-align:center">计算机的主机名</td>
</tr>
<tr>
<td style="text-align:center">%m</td>
<td style="text-align:center">计算机的主机名(在第一个句号之前截断)</td>
</tr>
<tr>
<td style="text-align:center">%l</td>
<td style="text-align:center">你当前的tty</td>
</tr>
<tr>
<td style="text-align:center">%n</td>
<td style="text-align:center">登录名</td>
</tr>
</tbody>
</table>
<h2>顏色語法</h2>
<ol>
<li>&quot;%{$fg[cyan]%}XXX&quot;</li>
<li>&quot;%{$fg[yellow]%}和%{$reset_color%}&quot;</li>
<li>上面是一对的中间夹的文字会用 yellow 颜色显示，颜色要用小写。</li>
</ol>
<h1>事例</h1>
<ul>
<li>Before
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">PROMPT="</span><br><span class="line"><span class="meta">%</span><span class="bash">&#123;<span class="variable">$terminfo</span>[bold]<span class="variable">$fg</span>[blue]%&#125;<span class="comment">#%&#123;$reset_color%&#125; \</span></span></span><br><span class="line"><span class="meta">%</span><span class="bash">(<span class="comment">#,%&#123;$bg[yellow]%&#125;%&#123;$fg[black]%&#125;%n%&#123;$reset_color%&#125;,%&#123;$fg[cyan]%&#125;%n) \</span></span></span><br><span class="line"><span class="meta">%</span><span class="bash">&#123;<span class="variable">$fg</span>[white]%&#125;@ \</span></span><br><span class="line"><span class="meta">%</span><span class="bash">&#123;<span class="variable">$fg</span>[green]%&#125;%m \</span></span><br><span class="line"><span class="meta">%</span><span class="bash">&#123;<span class="variable">$fg</span>[white]%&#125;<span class="keyword">in</span> \</span></span><br><span class="line"><span class="meta">%</span><span class="bash">&#123;<span class="variable">$terminfo</span>[bold]<span class="variable">$fg</span>[yellow]%&#125;%~%&#123;<span class="variable">$reset_color</span>%&#125;\</span></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;hg_info&#125;\</span></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;git_info&#125;\</span></span><br><span class="line"> \</span><br><span class="line"><span class="meta">%</span><span class="bash">&#123;<span class="variable">$fg</span>[white]%&#125;[%*] <span class="variable">$exit_code</span></span></span><br><span class="line"><span class="meta">%</span><span class="bash">&#123;<span class="variable">$terminfo</span>[bold]<span class="variable">$fg</span>[red]%&#125;$ %&#123;<span class="variable">$reset_color</span>%&#125;<span class="string">"</span></span></span><br></pre></td></tr></table></figure></li>
<li>Affter
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">PROMPT=<span class="string">"%&#123;$terminfo[bold]$fg[blue]%&#125;#%&#123;$reset_color%&#125; \</span></span><br><span class="line"><span class="string">%(#,%&#123;$bg[yellow]%&#125;%&#123;$fg[black]%&#125;%n%&#123;$reset_color%&#125;,%&#123;$fg[cyan]%&#125;% Vitan) \</span></span><br><span class="line"><span class="string">%&#123;$fg[white]%&#125;@ \</span></span><br><span class="line"><span class="string">%&#123;$fg[green]%&#125;% OnePlus \</span></span><br><span class="line"><span class="string">%&#123;$fg[white]%&#125;in \</span></span><br><span class="line"><span class="string">%&#123;$terminfo[bold]$fg[yellow]%&#125;%~%&#123;$reset_color%&#125;\</span></span><br><span class="line"><span class="string"><span class="subst">$&#123;hg_info&#125;</span>\</span></span><br><span class="line"><span class="string"><span class="subst">$&#123;git_info&#125;</span>\</span></span><br><span class="line"><span class="string">\</span></span><br><span class="line"><span class="string">%&#123;$fg[white]%&#125; [%*] $exit_code</span></span><br><span class="line"><span class="string">%&#123;$terminfo[bold]$fg[red]%&#125;➜ %&#123;$reset_color%&#125;"</span></span><br></pre></td></tr></table></figure></li>
</ul>

    

        <a href="/posts/Oh-My-ZSH-Theme.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Termux/" rel="tag">Termux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Termux-game-tools"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-03-28 19:07:03" datetime="2018-03-28T11:07:03.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-03-28</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Diary/">Diary</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Termux-game-tools.html">分屏&amp;游戏</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>分屏与游戏。
&lt;!--more--&gt;</p>
<h1>游戏</h1>
<p>月球车
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install moon-buggy</span><br></pre></td></tr></table></figure></p>
<ul>
<li>Start:<code>moon-buggy</code></li>
</ul>
<p>fortz
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install fortz</span><br></pre></td></tr></table></figure></p>
<ul>
<li>start: <code>zgames</code></li>
</ul>
<h1>tmux 分屏</h1>
<ul>
<li>在ubuntu系统中使用 <code>sudo apt-get install tmux</code></li>
<li>ArchLinux <code>yacman -S tmux</code></li>
<li>Termux安装：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install tumx</span><br></pre></td></tr></table></figure></li>
</ul>
<p>tmux主要包括以下几个模块</p>
<table>
<thead>
<tr>
<th style="text-align:center">名词</th>
<th style="text-align:center">含义</th>
<th style="text-align:left">解析</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">session</td>
<td style="text-align:center">会话</td>
<td style="text-align:left">一个服务器可以包含多个会话</td>
</tr>
<tr>
<td style="text-align:center">window</td>
<td style="text-align:center">窗口</td>
<td style="text-align:left">一个会话可以包含多个窗口</td>
</tr>
<tr>
<td style="text-align:center">pane</td>
<td style="text-align:center">面板</td>
<td style="text-align:left">一个窗口可以包含多个面板[强悍的分屏]</td>
</tr>
</tbody>
</table>
<ul>
<li>输入命令 tmux 使用工具</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">分屏状态</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Ctrl+b ?</td>
<td style="text-align:left">显示快捷键帮助</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b C-o</td>
<td style="text-align:left">调换窗口位置，类似与vim 里的C-w</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b 空格键</td>
<td style="text-align:left">采用下一个内置布局</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b !</td>
<td style="text-align:left">把当前窗口变为新窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b “</td>
<td style="text-align:left">横向分隔窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b %</td>
<td style="text-align:left">纵向分隔窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b q</td>
<td style="text-align:left">显示分隔窗口的编号</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b o</td>
<td style="text-align:left">跳到下一个分隔窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b 上下键</td>
<td style="text-align:left">上一个及下一个分隔窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b C-方向键</td>
<td style="text-align:left">调整分隔窗口大小</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b c</td>
<td style="text-align:left">创建新窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b 0~9</td>
<td style="text-align:left">选择几号窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b c</td>
<td style="text-align:left">创建新窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b n</td>
<td style="text-align:left">选择下一个窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b l</td>
<td style="text-align:left">切换到最后使用的窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b p</td>
<td style="text-align:left">选择前一个窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b w</td>
<td style="text-align:left">以菜单方式显示及选择窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b t</td>
<td style="text-align:left">显示时钟</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b ;</td>
<td style="text-align:left">切换到最后一个使用的面板</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b x</td>
<td style="text-align:left">关闭面板</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b &amp;</td>
<td style="text-align:left">关闭窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b s</td>
<td style="text-align:left">以菜单方式显示和选择会话</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b d</td>
<td style="text-align:left">退出tumx，并保存当前会话，这时，tmux仍在后台运行，可以通过tmux attach进入 到指定的会话</td>
</tr>
</tbody>
</table>

    

        <a href="/posts/Termux-game-tools.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Termux/" rel="tag">Termux</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Markdown-table"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-03-27 16:41:06" datetime="2018-03-27T08:41:06.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-03-27</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Diary/">Diary</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Markdown-table.html">Markdown 表格</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Markdown 建表格。
&lt;!--more--&gt;</p>
<h1>单元格和表头</h1>
<h2>表头和其他行</h2>
<ul>
<li>
<p>使用<code>|</code>来分隔不同的单元格，使用 <code>-</code>来分隔表头和其他行：
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name<span class="string">| ge</span></span><br><span class="line">----<span class="string">|---</span></span><br><span class="line">LearnShare<span class="string">|12</span></span><br><span class="line">Mike<span class="string">|32</span></span><br></pre></td></tr></table></figure>
name|age
----|---
LearnShare|12
Mike| 32</p>
</li>
<li>
<p>为了美观，可以使用空格对齐不同行的单元格，并在左右两侧都使用 | 来标记单元格边界：
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string">name</span>|<span class="string">age</span>|</span><br><span class="line">|<span class="string">----------</span>|<span class="string">---</span>|</span><br><span class="line">|<span class="string">LearnShare</span>|<span class="string">12</span>|</span><br><span class="line">|<span class="string">Mike</span>|<span class="string">32</span>|</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>name</th>
<th>age</th>
</tr>
</thead>
<tbody>
<tr>
<td>LearnShare</td>
<td>12</td>
</tr>
<tr>
<td>Mike</td>
<td>32</td>
</tr>
</tbody>
</table>
<ul>
<li>为了使 Markdown 更清晰，<code>|</code> 和<code>-</code>两侧需要至少有一个空格（最左侧和最右侧的 | 外就不需要了）。</li>
</ul>
<h2>对齐</h2>
<p>在表头下方的分隔线标记中加入<code>:</code>，即可标记下方单元格内容的对齐方式：</p>
<ul>
<li><code>:---</code>代表左对齐</li>
<li><code>:--:</code>代表居中对齐</li>
<li><code>---:</code>代表右对齐</li>
</ul>
<p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string"> left </span>|<span class="string"> center </span>|<span class="string"> right </span>|</span><br><span class="line">|<span class="string"> :--- </span>|<span class="string"> :----: </span>|<span class="string"> ----: </span>|</span><br><span class="line">|<span class="string"> aaaa </span>|<span class="string"> bbbbbb </span>|<span class="string"> ccccc </span>|</span><br><span class="line">|<span class="string"> a    </span>|<span class="string"> b      </span>|<span class="string"> c     </span>|</span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:left">left</th>
<th style="text-align:center">center</th>
<th style="text-align:right">right</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">aaaa</td>
<td style="text-align:center">bbbbbb</td>
<td style="text-align:right">ccccc</td>
</tr>
<tr>
<td style="text-align:left">a</td>
<td style="text-align:center">b</td>
<td style="text-align:right">c</td>
</tr>
</tbody>
</table>
<hr>
<p>如果不使用对齐标记，单元格中的内容默认左对齐；表头单元格中的内容会一直居中对齐（不同的实现可能会有不同表现）。</p>
<h2>插入其他内容</h2>
<p>表格中可以插入其他 Markdown 中的行内标记：</p>

    

        <a href="/posts/Markdown-table.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Termux/" rel="tag">Termux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-SQL-Select"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-03-27 15:14:46" datetime="2018-03-27T07:14:46.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-03-27</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Database/">Database</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/SQL-Select.html">SQL Select 语句</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>SELECT 语句用于从数据库中选取数据。结果被存储在一个结果表中，称为结果集。
&lt;!--more--&gt;</p>
<h1>SELECT语法</h1>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> table_name;</span><br></pre></td></tr></table></figure>
SELECT Column 实例
下面的 SQL 语句从 &quot;Websites&quot; 表中选取 &quot;name&quot; 和 &quot;country&quot; 列：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span>,country <span class="keyword">FROM</span> Websites;</span><br></pre></td></tr></table></figure></p>
<h1>SQL SELECT DISTINCT 语句</h1>
<p>在表中，一个列可能会包含多个重复值，有时您也许希望仅仅列出不同（distinct）的值。DISTINCT 关键词用于返回唯一不同的值。</p>
<p>SELECT DISTINCT 语法
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name;</span><br></pre></td></tr></table></figure></p>
<p>SELECT DISTINCT 实例
下面的 SQL 语句仅从 &quot;Websites&quot; 表的 &quot;country&quot; 列中选取唯一不同的值，也就是去掉 &quot;country&quot; 列重复值：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> country <span class="keyword">FROM</span> Websites</span><br></pre></td></tr></table></figure></p>
<h1>SQL WHERE 子句</h1>
<p>WHERE 子句用于提取那些满足指定标准的记录。</p>
<p>SQL WHERE 语法
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name <span class="keyword">operator</span> <span class="keyword">value</span>;</span><br></pre></td></tr></table></figure></p>
<p>WHERE 子句实例
下面的 SQL 语句从 &quot;Websites&quot; 表中选取国家为 &quot;CN&quot; 的所有网站：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Websites <span class="keyword">WHERE</span> country=<span class="string">'CN'</span>;</span><br></pre></td></tr></table></figure></p>
<p>WHERE 子句中的运算符
下面的运算符可以在 WHERE 子句中使用：</p>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">=</td>
<td style="text-align:left">等于</td>
</tr>
<tr>
<td style="text-align:left">&lt;&gt;</td>
<td style="text-align:left">不等于 注释:在SQL的一些版本中该操作符可被写成!=</td>
</tr>
<tr>
<td style="text-align:left">&gt;</td>
<td style="text-align:left">大于</td>
</tr>
<tr>
<td style="text-align:left">&lt;</td>
<td style="text-align:left">小于</td>
</tr>
<tr>
<td style="text-align:left">&gt;=</td>
<td style="text-align:left">大于等于</td>
</tr>
<tr>
<td style="text-align:left">&lt;=</td>
<td style="text-align:left">小于等于</td>
</tr>
<tr>
<td style="text-align:left">BETWEEN</td>
<td style="text-align:left">在某个范围内</td>
</tr>
<tr>
<td style="text-align:left">LIKE</td>
<td style="text-align:left">搜索某种模式</td>
</tr>
<tr>
<td style="text-align:left">IN</td>
<td style="text-align:left">指定针对某个列的多个可能值</td>
</tr>
</tbody>
</table>
<h1>SQL AND &amp; OR 运算符</h1>
<p>AND &amp; OR 运算符用于基于一个以上的条件对记录进行过滤。
AND &amp; OR 运算符</p>
<ol>
<li>如果第一个条件和第二个条件都成立，则 AND 运算符显示一条记录。</li>
<li>如果第一个条件和第二个条件中只要有一个成立，则 OR 运算符显示一条记录。</li>
</ol>
<p>从 &quot;Websites&quot; 表中选取国家为 &quot;CN&quot; 且alexa排名大于 &quot;50&quot; 的所有网站：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">WHERE</span> country=<span class="string">'CN'</span></span><br><span class="line"><span class="keyword">AND</span> alexa &gt; <span class="number">50</span>;</span><br></pre></td></tr></table></figure>
从 &quot;Websites&quot; 表中选取国家为 &quot;USA&quot; 或者 &quot;CN&quot; 的所有客户：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">WHERE</span> country=<span class="string">'USA'</span></span><br><span class="line"><span class="keyword">OR</span> country=<span class="string">'CN'</span>;</span><br></pre></td></tr></table></figure></p>
<h1>SQL ORDER BY 关键字</h1>
<p>ORDER BY 关键字用于对结果集按照一个列或者多个列进行排序。</p>
<p>ORDER BY 关键字默认按照升序对记录进行排序。如果需要按照降序对记录进行排序，可以使用 DESC 关键字。</p>
<p>SQL ORDER BY 语法
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column_name,column_name <span class="keyword">ASC</span>|<span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></p>
<p>从 &quot;Websites&quot; 表中选取所有网站，并按照 &quot;alexa&quot; 列排序：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> alexa;</span><br></pre></td></tr></table></figure></p>
<p>ORDER BY DESC 实例
下面的 SQL 语句从 &quot;Websites&quot; 表中选取所有网站，并按照 &quot;alexa&quot; 列降序排序：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> alexa <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
ORDER BY 多列
下面的 SQL 语句从 &quot;Websites&quot; 表中选取所有网站，并按照 &quot;country&quot; 和 &quot;alexa&quot; 列排序：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> country,alexa;</span><br></pre></td></tr></table></figure></p>
<h1>SQL INSERT INTO 语句</h1>
<p>INSERT INTO 语句用于向表中插入新记录。</p>
<p>SQL INSERT INTO 语法
INSERT INTO 语句可以有两种编写形式。</p>
<ol>
<li>第一种形式无需指定要插入数据的列名，只需提供被插入的值即可：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name</span><br><span class="line"><span class="keyword">VALUES</span> (value1,value2,value3,...);</span><br></pre></td></tr></table></figure></li>
<li>需要指定列名及被插入的值：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name (column1,column2,column3,...)</span><br><span class="line"><span class="keyword">VALUES</span> (value1,value2,value3,...);</span><br></pre></td></tr></table></figure></li>
</ol>
<p>INSERT INTO 实例
假设我们要向 &quot;Websites&quot; 表中插入一个新行。
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Websites (<span class="keyword">name</span>, <span class="keyword">url</span>, alexa, country)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'百度'</span>,<span class="string">'https://www.baidu.com/'</span>,<span class="string">'4'</span>,<span class="string">'CN'</span>);</span><br></pre></td></tr></table></figure></p>
<p>在指定的列插入数据
下面的 SQL 语句将插入一个新行，但是只在 &quot;name&quot;、&quot;url&quot; 和 &quot;country&quot; 列插入数据（id 字段会自动更新）：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Websites (<span class="keyword">name</span>, <span class="keyword">url</span>, country)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'stackoverflow'</span>, <span class="string">'http://stackoverflow.com/'</span>, <span class="string">'IND'</span>);</span><br></pre></td></tr></table></figure></p>
<h1>SQL LIKE 操作符</h1>
<p>LIKE 操作符用于在 WHERE 子句中搜索列中的指定模式。</p>
<p>SQL LIKE 语法
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name <span class="keyword">LIKE</span> pattern;</span><br></pre></td></tr></table></figure></p>
<p>SQL LIKE 操作符实例
下面的 SQL 语句选取 name 以字母 &quot;G&quot; 开始的所有客户：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'G%'</span>;</span><br></pre></td></tr></table></figure>
提示：&quot;%&quot; 符号用于在模式的前后定义通配符（缺省字母）。您将在下一章中学习更多有关通配符的知识。</p>
<p>选取 name 以字母 &quot;k&quot; 结尾的所有客户：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'%k'</span>;</span><br></pre></td></tr></table></figure>
通过使用 NOT 关键字，您可以选取不匹配模式的记录。</p>
<p>下面的 SQL 语句选取 name 不包含模式 &quot;oo&quot; 的所有客户
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">'%oo%'</span>;</span><br></pre></td></tr></table></figure></p>
<h1>SQL 连接(JOIN)</h1>
<p>SQL join 用于把来自两个或多个表的行结合起来。
SQL JOIN 子句用于把来自两个或多个表的行结合起来，基于这些表之间的共同字段。</p>
<p>最常见的 JOIN 类型：SQL INNER JOIN（简单的 JOIN）。 SQL INNER JOIN 从多个表中返回满足 JOIN 条件的所有行。
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Websites.id, Websites.name, access_log.count, access_log.date</span><br><span class="line"><span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> access_log</span><br><span class="line"><span class="keyword">ON</span> Websites.id=access_log.site_id;</span><br></pre></td></tr></table></figure></p>
<h2>不同的 SQL JOIN</h2>
<p>JOIN 类型：</p>
<ol>
<li>INNER JOIN：如果表中有至少一个匹配，则返回行</li>
<li>LEFT JOIN：即使右表中没有匹配，也从左表返回所有的行</li>
<li>RIGHT JOIN：即使左表中没有匹配，也从右表返回所有的行</li>
<li>FULL JOIN：只要其中一个表中存在匹配，则返回行</li>
</ol>
<p>SQL INNER JOIN 语法,INNER JOIN 与 JOIN 是相同的。
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure>
或：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure></p>
<h2>LEFT JOIN</h2>
<p>LEFT JOIN 关键字从左表（table1）返回所有的行，即使右表（table2）中没有匹配。如果右表中没有匹配，则结果为 NULL。</p>
<p>SQL LEFT JOIN 语法
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> table2</span><br><span class="line">	<span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure>
或：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure></p>
<h2>SQL RIGHT JOIN</h2>
<p>RIGHT JOIN 关键字从右表（table2）返回所有的行，即使左表（table1）中没有匹配。如果左表中没有匹配，则结果为 NULL。
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure>
或：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure></p>
<h2>FULL OUTER JOIN 关键字</h2>
<p>FULL OUTER JOIN 关键字只要左表（table1）和右表（table2）其中一个表中存在匹配，则返回行.
FULL OUTER JOIN 关键字结合了 LEFT JOIN 和 RIGHT JOIN 的结果。
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SQL FULL OUTER JOIN 语法</span><br><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name=table2.column_name;</span><br></pre></td></tr></table></figure></p>
<h1>SQL UNION 操作符</h1>
<p>SQL UNION 操作符合并两个或多个 SELECT 语句的结果。</p>
<p>UNION 操作符用于合并两个或多个 SELECT 语句的结果集。</p>
<p>请注意，UNION 内部的每个 SELECT 语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每个 SELECT 语句中的列的顺序必须相同。
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table2;</span><br></pre></td></tr></table></figure>
注释：默认地，UNION 操作符选取不同的值。如果允许重复的值，请使用 UNION ALL。</p>
<p>SQL UNION ALL 语法
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table2;</span><br></pre></td></tr></table></figure>
注释：UNION 结果集中的列名总是等于 UNION 中第一个 SELECT 语句中的列名。</p>
<p>带有 WHERE 的 SQL UNION ALL
下面的 SQL 语句使用 UNION ALL 从 &quot;Websites&quot; 和 &quot;apps&quot; 表中选取所有的中国(CN)的数据（也有重复的值）：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> country, <span class="keyword">name</span> <span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">WHERE</span> country=<span class="string">'CN'</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> country, app_name <span class="keyword">FROM</span> apps</span><br><span class="line"><span class="keyword">WHERE</span> country=<span class="string">'CN'</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> country;</span><br></pre></td></tr></table></figure></p>

    

        <a href="/posts/SQL-Select.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-SQL-Command"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-03-24 23:43:05" datetime="2018-03-24T15:43:05.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-03-24</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Database/">Database</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/SQL-Command.html">SQL 经典语句</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>经典SQL语句大全
&lt;!--more--&gt;</p>
<h1>基础</h1>
<p>创建数据库
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">database</span>-<span class="keyword">name</span></span><br></pre></td></tr></table></figure>
删除数据库
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> dbname</span><br></pre></td></tr></table></figure></p>
<h2>备份sql server</h2>
<p>创建备份数据的 device
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USE</span> <span class="keyword">master</span></span><br><span class="line">EXEC sp_addumpdevice <span class="string">'disk'</span>, <span class="string">'testBack'</span>, <span class="string">'c:\mssql7backup\MyNwind_1.dat'</span></span><br></pre></td></tr></table></figure>
开始备份
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BACKUP</span> <span class="keyword">DATABASE</span> pubs <span class="keyword">TO</span> testBack</span><br><span class="line">创建新表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tabname(col1 type1 [<span class="keyword">not</span> <span class="literal">null</span>] [primary <span class="keyword">key</span>],col2 type2 [<span class="keyword">not</span> <span class="literal">null</span>],..)</span><br></pre></td></tr></table></figure></p>
<h2>根据已有的表创建新表：</h2>
<blockquote>
<p>A：create table tab_new like tab_old (使用旧表创建新表)
B：create table tab_new as select col1,col2… from tab_old definition only</p>
</blockquote>
<p>删除新表
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tabname</span><br></pre></td></tr></table></figure>
增加一个列
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">table</span> tabname <span class="keyword">add</span> <span class="keyword">column</span> <span class="keyword">col</span> <span class="keyword">type</span></span><br></pre></td></tr></table></figure>
注：列增加后将不能删除。DB2中列加上后数据类型也不能改变，唯一能改变的是增加varchar类型的长度。</p>
<p>添加主键
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">table</span> tabname <span class="keyword">add</span> primary <span class="keyword">key</span>(<span class="keyword">col</span>)</span><br></pre></td></tr></table></figure>
说明：删除主键： Alter table tabname drop primary key(col)</p>
<p>创建索引
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> [<span class="keyword">unique</span>] <span class="keyword">index</span> idxname <span class="keyword">on</span> tabname(<span class="keyword">col</span>….)</span><br></pre></td></tr></table></figure></p>
<p>删除索引：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> idxname</span><br></pre></td></tr></table></figure>
注：索引是不可更改的，想更改必须删除重新建。</p>
<p>创建视图
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> viewname <span class="keyword">as</span> <span class="keyword">select</span> <span class="keyword">statement</span></span><br></pre></td></tr></table></figure></p>
<p>删除视图
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> viewname</span><br></pre></td></tr></table></figure></p>
<h2>几个简单的基本的 SQL 语句</h2>
<p>语句
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">选择：<span class="keyword">select</span> * <span class="keyword">from</span> table1 <span class="keyword">where</span> 范围</span><br><span class="line">插入：<span class="keyword">insert</span> <span class="keyword">into</span> table1(field1,field2) <span class="keyword">values</span>(value1,value2)</span><br><span class="line">删除：<span class="keyword">delete</span> <span class="keyword">from</span> table1 <span class="keyword">where</span> 范围</span><br><span class="line">更新：<span class="keyword">update</span> table1 <span class="keyword">set</span> field1=value1 <span class="keyword">where</span> 范围</span><br><span class="line">查找：<span class="keyword">select</span> * <span class="keyword">from</span> table1 <span class="keyword">where</span> field1 <span class="keyword">like</span> ’%value1%’ <span class="comment">---like的语法很精妙，查资料!</span></span><br><span class="line">排序：<span class="keyword">select</span> * <span class="keyword">from</span> table1 <span class="keyword">order</span> <span class="keyword">by</span> field1,field2 [<span class="keyword">desc</span>]</span><br><span class="line">总数：<span class="keyword">select</span> <span class="keyword">count</span> <span class="keyword">as</span> totalcount <span class="keyword">from</span> table1</span><br><span class="line">求和：<span class="keyword">select</span> <span class="keyword">sum</span>(field1) <span class="keyword">as</span> sumvalue <span class="keyword">from</span> table1</span><br><span class="line">平均：<span class="keyword">select</span> <span class="keyword">avg</span>(field1) <span class="keyword">as</span> avgvalue <span class="keyword">from</span> table1</span><br><span class="line">最大：<span class="keyword">select</span> <span class="keyword">max</span>(field1) <span class="keyword">as</span> maxvalue <span class="keyword">from</span> table1</span><br><span class="line">最小：<span class="keyword">select</span> <span class="keyword">min</span>(field1) <span class="keyword">as</span> <span class="keyword">minvalue</span> <span class="keyword">from</span> table1</span><br></pre></td></tr></table></figure></p>
<h2>几个高级查询运算词</h2>
<p>UNION 运算符通过组合其他两个结果表（例如 TABLE1 和 TABLE2）并消去表中任何重复行而派生出一个结果表。当 ALL 随 UNION 一起使用时（即 UNION ALL），不消除重复行。两种情况下，派生表的每一行不是来自 TABLE1 就是来自 TABLE2。</p>
<p>EXCEPT 运算符通过包括所有在 TABLE1 中但不在 TABLE2 中的行并消除所有重复行而派生出一个结果表。当 ALL 随 EXCEPT 一起使用时 (EXCEPT ALL)，不消除重复行。</p>
<p><code>INTERSECT</code> 运算符通过只包括 TABLE1 和 TABLE2 中都有的行并消除所有重复行而派生出一个结果表。当 ALL 随 INTERSECT 一起使用时 (INTERSECT ALL)，不消除重复行。</p>
<p>注：使用运算词的几个查询结果行必须是一致的。</p>
<h2>使用外连接</h2>
<p>left （outer） join</p>
<ul>
<li>左外连接（左连接）：结果集几包括连接表的匹配行，也包括左连接表的所有行。</li>
<li>SQL: select a.a, a.b, a.c, b.c, b.d, b.f from a LEFT OUT JOIN b ON a.a = b.c</li>
</ul>
<p>right （outer） join
右外连接(右连接)：结果集既包括连接表的匹配连接行，也包括右连接表的所有行。</p>
<p>full/cross （outer） join
全外连接：不仅包括符号连接表的匹配行，还包括两个连接表中的所有记录。</p>
<h2>分组:Group by</h2>
<p>一张表，一旦分组完成后，查询后只能得到组相关的信息。</p>
<p>组相关的信息
统计信息） count,sum,max,min,avg  分组的标准)SQLServer中分组时：不能以text,ntext,image类型的字段作为分组依据,在selecte统计函数中的字段，不能和普通的字段放在一起对数据库进行操作</p>
<p>分离数据库
sp_detach_db; 附加数据库：sp_attach_db 后接表明，附加需要完整的路径名</p>
<p>如何修改数据: 库的名称
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sp_renamedb 'old_name', 'new_name'</span><br></pre></td></tr></table></figure></p>
<h1>提升</h1>
<p>复制表(只复制结构,源表名：a 新表名：b)</p>
<ul>
<li>法一：<code>select * into b from a where 1&lt;&gt;1</code>（仅用于SQlServer）</li>
<li>法二：<code>select top 0 * into b from a</code></li>
</ul>
<p>拷贝表(拷贝数据,源表名：a 目标表名：b)
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> b(a, b, c) <span class="keyword">select</span> d,e,f <span class="keyword">from</span> b</span><br></pre></td></tr></table></figure></p>
<p>跨数据库之间表的拷贝(具体数据使用绝对路径)
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> b(a, b, c) <span class="keyword">select</span> d,e,f <span class="keyword">from</span> b <span class="keyword">in</span> ‘具体数据库’ <span class="keyword">where</span> 条件</span><br></pre></td></tr></table></figure></p>
<ul>
<li>例子：..from b in '&quot;&amp;Server.MapPath(&quot;.&quot;)&amp;&quot;\data.mdb&quot; &amp;&quot;' where..</li>
</ul>
<p>子查询(表名1：a 表名2：b)
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a,b,c <span class="keyword">from</span> a <span class="keyword">where</span> a <span class="keyword">IN</span> (<span class="keyword">select</span> d <span class="keyword">from</span> b )</span><br></pre></td></tr></table></figure></p>
<ul>
<li>或者
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a,b,c <span class="keyword">from</span> a <span class="keyword">where</span> a <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<p>显示文章、提交人和最后回复时间
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.title,a.username,b.adddate <span class="keyword">from</span> <span class="keyword">table</span> a,(<span class="keyword">select</span> <span class="keyword">max</span>(adddate) adddate <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> table.title=a.title) b</span><br></pre></td></tr></table></figure></p>
<p>外连接查询(表名1：a 表名2：b)
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.a, a.b, a.c, b.c, b.d, b.f <span class="keyword">from</span> a <span class="keyword">LEFT</span> <span class="keyword">OUT</span> <span class="keyword">JOIN</span> b <span class="keyword">ON</span> a.a = b.c</span><br></pre></td></tr></table></figure></p>
<h2>第二部分</h2>
<p>在线视图查询(表名1：a )
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`<span class="keyword">select</span> * <span class="keyword">from</span> (<span class="keyword">SELECT</span> a,b,c <span class="keyword">FROM</span> a) T <span class="keyword">where</span> t.a &gt; <span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<p>between的用法,between限制查询数据范围时包括了边界值,not between不包括
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> table1 <span class="keyword">where</span> <span class="built_in">time</span> <span class="keyword">between</span> time1 <span class="keyword">and</span> time2</span><br><span class="line"><span class="keyword">select</span> a,b,c, <span class="keyword">from</span> table1 <span class="keyword">where</span> a <span class="keyword">not</span> <span class="keyword">between</span> 数值<span class="number">1</span> <span class="keyword">and</span> 数值<span class="number">2</span></span><br></pre></td></tr></table></figure></p>
<p>in 的使用方法
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> table1 <span class="keyword">where</span> a [<span class="keyword">not</span>] <span class="keyword">in</span> (‘值<span class="number">1</span>’,’值<span class="number">2</span>’,’值<span class="number">4</span>’,’值<span class="number">6</span>’)</span><br></pre></td></tr></table></figure></p>
<p>两张关联表，删除主表中已经在副表中没有的信息
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> table1 <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span> ( <span class="keyword">select</span> * <span class="keyword">from</span> table2 <span class="keyword">where</span> table1.field1=table2.field1 )</span><br></pre></td></tr></table></figure></p>
<p>四表联查问题
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> a <span class="keyword">left</span> <span class="keyword">inner</span> <span class="keyword">join</span> b <span class="keyword">on</span> a.a=b.b <span class="keyword">right</span> <span class="keyword">inner</span> <span class="keyword">join</span> c <span class="keyword">on</span> a.a=c.c <span class="keyword">inner</span> <span class="keyword">join</span> d <span class="keyword">on</span> a.a=d.d <span class="keyword">where</span> .....</span><br></pre></td></tr></table></figure></p>
<p>日程安排提前五分钟提醒
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL: <span class="keyword">select</span> * <span class="keyword">from</span> 日程安排 <span class="keyword">where</span> <span class="keyword">datediff</span>(<span class="string">'minute'</span>,f开始时间,<span class="keyword">getdate</span>())&gt;<span class="number">5</span></span><br></pre></td></tr></table></figure></p>
<p>一条sql 语句搞定数据库分页
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> top <span class="number">10</span> b.* <span class="keyword">from</span> (<span class="keyword">select</span> top <span class="number">20</span> 主键字段,排序字段 <span class="keyword">from</span> 表名 <span class="keyword">order</span> <span class="keyword">by</span> 排序字段 <span class="keyword">desc</span>) a,表名 b <span class="keyword">where</span> b.主键字段 = a.主键字段 <span class="keyword">order</span> <span class="keyword">by</span> a.排序字段</span><br></pre></td></tr></table></figure></p>
<ul>
<li>具体实现：</li>
<li>关于数据库分页</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> @<span class="keyword">start</span> <span class="built_in">int</span>,@<span class="keyword">end</span> <span class="built_in">int</span></span><br><span class="line">@<span class="keyword">sql</span>  <span class="keyword">nvarchar</span>(<span class="number">600</span>)</span><br><span class="line"><span class="keyword">set</span> @<span class="keyword">sql</span>=’<span class="keyword">select</span> top’+<span class="keyword">str</span>(@<span class="keyword">end</span>-@<span class="keyword">start</span>+<span class="number">1</span>)+’+<span class="keyword">from</span> T <span class="keyword">where</span> rid <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> top’+<span class="keyword">str</span>(@<span class="keyword">str</span><span class="number">-1</span>)+’Rid <span class="keyword">from</span> T <span class="keyword">where</span> Rid&gt;<span class="number">-1</span>)’</span><br><span class="line">exec sp_executesql @<span class="keyword">sql</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>注意：在top后不能直接跟一个变量，所以在实际应用中只有这样的进行特殊的处理。Rid为一个标识列，如果top后还有具体的字段，这样做是非常有好处的。因为这样可以避免 top的字段如果是逻辑索引的，查询的结果后实际表中的不一致（逻辑索引中的数据有可能和数据表中的不一致，而查询时如果处在索引则首先查询索引）</li>
</ul>
<h2>第三部分</h2>
<p>前10条记录
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> top <span class="number">10</span> * <span class="keyword">form</span> table1 <span class="keyword">where</span> 范围</span><br></pre></td></tr></table></figure></p>
<p>选择在每一组b值相同的数据中对应的a最大的记录的所有信息(类似这样的用法可以用于论坛每月排行榜,每月热销产品分析,按科目成绩排名,等等.)
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a,b,c <span class="keyword">from</span> tablename ta <span class="keyword">where</span> a=(<span class="keyword">select</span> <span class="keyword">max</span>(a) <span class="keyword">from</span> tablename tb <span class="keyword">where</span> tb.b=ta.b)</span><br></pre></td></tr></table></figure>
包括所有在 TableA 中但不在 TableB和TableC 中的行并消除所有重复行而派生出一个结果表
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">select</span> a <span class="keyword">from</span> tableA ) <span class="keyword">except</span> (<span class="keyword">select</span> a <span class="keyword">from</span> tableB) <span class="keyword">except</span> (<span class="keyword">select</span> a <span class="keyword">from</span> tableC)</span><br></pre></td></tr></table></figure></p>
<p>随机取出10条数据
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> top <span class="number">10</span> * <span class="keyword">from</span> tablename <span class="keyword">order</span> <span class="keyword">by</span> newid()</span><br></pre></td></tr></table></figure></p>
<p>随机选择记录
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> newid()</span><br></pre></td></tr></table></figure></p>
<p>删除重复记录
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tablename <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">max</span>(<span class="keyword">id</span>) <span class="keyword">from</span> tablename <span class="keyword">group</span> <span class="keyword">by</span> col1,col2,...)</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> * <span class="keyword">into</span> temp <span class="keyword">from</span> tablename</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tablename</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tablename <span class="keyword">select</span> * <span class="keyword">from</span> temp</span><br></pre></td></tr></table></figure></p>
<ul>
<li>评价：这种操作牵连大量的数据的移动，这种做法不适合大容量但数据操作</li>
<li>例如:在一个外部表中导入数据，由于某些原因第一次只导入了一部分，但很难判断具体位置，这样只有在下一次全部导入，这样也就产生好多重复的字段，怎样删除重复字段</li>
</ul>
<p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter <span class="keyword">table</span> tablename</span><br></pre></td></tr></table></figure></p>
<ul>
<li>加一个自增列</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">add  column_b int identity(1,1)</span><br><span class="line"> <span class="keyword">delete</span> <span class="keyword">from</span> tablename <span class="keyword">where</span> column_b <span class="keyword">not</span> <span class="keyword">in</span>(</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(column_b)  <span class="keyword">from</span> tablename <span class="keyword">group</span> <span class="keyword">by</span> column1,column2,...)</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tablename <span class="keyword">drop</span> <span class="keyword">column</span> column_b</span><br></pre></td></tr></table></figure></p>
<h2>第四部分</h2>
<p>列出数据库里所有的表名
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> sysobjects <span class="keyword">where</span> <span class="keyword">type</span>=<span class="string">'U'</span> // U代表用户</span><br></pre></td></tr></table></figure></p>
<p>列出表里的所有的列名
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> syscolumns <span class="keyword">where</span> <span class="keyword">id</span>=object_id(<span class="string">'TableName'</span>)</span><br></pre></td></tr></table></figure>
列示type、vender、pcs字段，以type字段排列，case可以方便地实现多重选择，类似select 中的case
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">type</span>,<span class="keyword">sum</span>(<span class="keyword">case</span> vender <span class="keyword">when</span> <span class="string">'A'</span> <span class="keyword">then</span> pcs <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>),<span class="keyword">sum</span>(<span class="keyword">case</span> vender <span class="keyword">when</span> <span class="string">'C'</span> <span class="keyword">then</span> pcs <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>),<span class="keyword">sum</span>(<span class="keyword">case</span> vender <span class="keyword">when</span> <span class="string">'B'</span> <span class="keyword">then</span> pcs <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">FROM</span> tablename <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">type</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>显示结果：</li>
</ul>
<blockquote>
<p>type vender pcs
电脑 A 1
电脑 A 1
光盘 B 2
光盘 A 2
手机 B 3
手机 C 3</p>
</blockquote>
<p>初始化表table1
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> table1</span><br></pre></td></tr></table></figure>
选择从10到15的记录
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> top <span class="number">5</span> * <span class="keyword">from</span> (<span class="keyword">select</span> top <span class="number">15</span> * <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">id</span> <span class="keyword">asc</span>) table_别名 <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">id</span> <span class="keyword">desc</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>技巧</li>
<li>1=1，1=2的使用，在SQL语句组合时用的较多</li>
<li>“where 1=1” 是表示选择全部    “where 1=2”全部不选，如：</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if @strWhere !=''</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">set</span> @strSQL = <span class="string">'select count(*) as Total from ['</span> + @tblName + <span class="string">'] where '</span> + @strWhere</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">set</span> @strSQL = <span class="string">'select count(*) as Total from ['</span> + @tblName + <span class="string">']'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
我们可以直接写成</p>
<p>错误！未找到目录项。
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @strSQL = <span class="string">'select count(*) as Total from ['</span> + @tblName + <span class="string">'] where 1=1 安定 '</span>+ @strWhere <span class="number">2</span>、收缩数据库</span><br></pre></td></tr></table></figure></p>
<h2>第五部分</h2>
<ol>
<li>重建索引
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DBCC REINDEX</span><br><span class="line">DBCC INDEXDEFRAG</span><br></pre></td></tr></table></figure></li>
<li>收缩数据和日志
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DBCC SHRINKDB</span><br><span class="line">DBCC SHRINKFILE</span><br></pre></td></tr></table></figure></li>
<li>压缩数据库
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dbcc shrinkdatabase(dbname)</span><br></pre></td></tr></table></figure></li>
<li>转移数据库  给新用户以已存在用户权限
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exec sp_change_users_login 'update_one','newname','oldname'</span><br><span class="line">go</span><br></pre></td></tr></table></figure></li>
<li>检查备份集
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RESTORE</span> VERIFYONLY <span class="keyword">from</span> disk=<span class="string">'E:\dvbbs.bak'</span></span><br></pre></td></tr></table></figure></li>
<li>修复数据库
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> [dvbbs] <span class="keyword">SET</span> SINGLE_USER</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line">DBCC CHECKDB(<span class="string">'dvbbs'</span>,repair_allow_data_loss) <span class="keyword">WITH</span> TABLOCK</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> [dvbbs] <span class="keyword">SET</span> MULTI_USER</span><br><span class="line"><span class="keyword">GO</span></span><br></pre></td></tr></table></figure></li>
<li>日志清除
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> NOCOUNT <span class="keyword">ON</span></span><br><span class="line"><span class="keyword">DECLARE</span> @LogicalFileName sysname,</span><br><span class="line"> @MaxMinutes <span class="built_in">INT</span>,</span><br><span class="line"> @NewSize <span class="built_in">INT</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">USE</span> tablename <span class="comment">-- 要操作的数据库名</span></span><br><span class="line"><span class="keyword">SELECT</span>  @LogicalFileName = <span class="string">'tablename_log'</span>, <span class="comment">-- 日志文件名</span></span><br><span class="line">@MaxMinutes = <span class="number">10</span>, <span class="comment">-- Limit on time allowed to wrap log.</span></span><br><span class="line"> @NewSize = <span class="number">1</span>  <span class="comment">-- 你想设定的日志文件的大小(M)</span></span><br><span class="line">Setup / initialize</span><br><span class="line"><span class="keyword">DECLARE</span> @OriginalSize <span class="built_in">int</span></span><br><span class="line"><span class="keyword">SELECT</span> @OriginalSize = <span class="keyword">size</span></span><br><span class="line"> <span class="keyword">FROM</span> sysfiles</span><br><span class="line"> <span class="keyword">WHERE</span> <span class="keyword">name</span> = @LogicalFileName</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'Original Size of '</span> + db_name() + <span class="string">' LOG is '</span> +</span><br><span class="line"> <span class="keyword">CONVERT</span>(<span class="built_in">VARCHAR</span>(<span class="number">30</span>),@OriginalSize) + <span class="string">' 8K pages or '</span> +</span><br><span class="line"> <span class="keyword">CONVERT</span>(<span class="built_in">VARCHAR</span>(<span class="number">30</span>),(@OriginalSize*<span class="number">8</span>/<span class="number">1024</span>)) + <span class="string">'MB'</span></span><br><span class="line"> <span class="keyword">FROM</span> sysfiles</span><br><span class="line"> <span class="keyword">WHERE</span> <span class="keyword">name</span> = @LogicalFileName</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> DummyTrans</span><br><span class="line"> (DummyColumn <span class="built_in">char</span> (<span class="number">8000</span>) <span class="keyword">not</span> <span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">DECLARE</span> @Counter    <span class="built_in">INT</span>,</span><br><span class="line"> @StartTime DATETIME,</span><br><span class="line"> @TruncLog   <span class="built_in">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line"><span class="keyword">SELECT</span> @StartTime = <span class="keyword">GETDATE</span>(),</span><br><span class="line"> @TruncLog = <span class="string">'BACKUP LOG '</span> + db_name() + <span class="string">' WITH TRUNCATE_ONLY'</span></span><br><span class="line">DBCC SHRINKFILE (@LogicalFileName, @NewSize)</span><br><span class="line">EXEC (@TruncLog)</span><br><span class="line"><span class="comment">-- Wrap the log if necessary.</span></span><br><span class="line"><span class="keyword">WHILE</span> @MaxMinutes &gt; <span class="keyword">DATEDIFF</span> (mi, @StartTime, <span class="keyword">GETDATE</span>()) <span class="comment">-- time has not expired</span></span><br><span class="line"> <span class="keyword">AND</span> @OriginalSize = (<span class="keyword">SELECT</span> <span class="keyword">size</span> <span class="keyword">FROM</span> sysfiles <span class="keyword">WHERE</span> <span class="keyword">name</span> = @LogicalFileName)</span><br><span class="line"> <span class="keyword">AND</span> (@OriginalSize * <span class="number">8</span> /<span class="number">1024</span>) &gt; @NewSize</span><br><span class="line"> <span class="keyword">BEGIN</span> <span class="comment">-- Outer loop.</span></span><br><span class="line"><span class="keyword">SELECT</span> @Counter = <span class="number">0</span></span><br><span class="line"> <span class="keyword">WHILE</span>   ((@Counter &lt; @OriginalSize / <span class="number">16</span>) <span class="keyword">AND</span> (@Counter &lt; <span class="number">50000</span>))</span><br><span class="line"> <span class="keyword">BEGIN</span> <span class="comment">-- update</span></span><br><span class="line"> <span class="keyword">INSERT</span> DummyTrans <span class="keyword">VALUES</span> (<span class="string">'Fill Log'</span>) <span class="keyword">DELETE</span> DummyTrans</span><br><span class="line"> <span class="keyword">SELECT</span> @Counter = @Counter + <span class="number">1</span></span><br><span class="line"> <span class="keyword">END</span></span><br><span class="line"> EXEC (@TruncLog)</span><br><span class="line"> <span class="keyword">END</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'Final Size of '</span> + db_name() + <span class="string">' LOG is '</span> +</span><br><span class="line"> <span class="keyword">CONVERT</span>(<span class="built_in">VARCHAR</span>(<span class="number">30</span>),<span class="keyword">size</span>) + <span class="string">' 8K pages or '</span> +</span><br><span class="line"> <span class="keyword">CONVERT</span>(<span class="built_in">VARCHAR</span>(<span class="number">30</span>),(<span class="keyword">size</span>*<span class="number">8</span>/<span class="number">1024</span>)) + <span class="string">'MB'</span></span><br><span class="line"> <span class="keyword">FROM</span> sysfiles</span><br><span class="line"> <span class="keyword">WHERE</span> <span class="keyword">name</span> = @LogicalFileName</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> DummyTrans</span><br><span class="line"><span class="keyword">SET</span> NOCOUNT <span class="keyword">OFF</span></span><br></pre></td></tr></table></figure></li>
<li>说明：更改某个表
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exec sp_changeobjectowner 'tablename','dbo'</span><br></pre></td></tr></table></figure></li>
<li>存储更改全部表
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> dbo.User_ChangeObjectOwnerBatch</span><br><span class="line">@OldOwner <span class="keyword">as</span> <span class="keyword">NVARCHAR</span>(<span class="number">128</span>),</span><br><span class="line">@NewOwner <span class="keyword">as</span> <span class="keyword">NVARCHAR</span>(<span class="number">128</span>)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">DECLARE</span> @<span class="keyword">Name</span>    <span class="keyword">as</span> <span class="keyword">NVARCHAR</span>(<span class="number">128</span>)</span><br><span class="line"><span class="keyword">DECLARE</span> @Owner   <span class="keyword">as</span> <span class="keyword">NVARCHAR</span>(<span class="number">128</span>)</span><br><span class="line"><span class="keyword">DECLARE</span> @OwnerName   <span class="keyword">as</span> <span class="keyword">NVARCHAR</span>(<span class="number">128</span>)</span><br><span class="line"><span class="keyword">DECLARE</span> curObject <span class="keyword">CURSOR</span> <span class="keyword">FOR</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">'Name'</span>    = <span class="keyword">name</span>,</span><br><span class="line">   <span class="string">'Owner'</span>    = user_name(uid)</span><br><span class="line"><span class="keyword">from</span> sysobjects</span><br><span class="line"><span class="keyword">where</span> user_name(uid)=@OldOwner</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">name</span></span><br><span class="line"><span class="keyword">OPEN</span>   curObject</span><br><span class="line"><span class="keyword">FETCH</span> <span class="keyword">NEXT</span> <span class="keyword">FROM</span> curObject <span class="keyword">INTO</span> @<span class="keyword">Name</span>, @Owner</span><br><span class="line"><span class="keyword">WHILE</span>(@@FETCH_STATUS=<span class="number">0</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">if</span> @Owner=@OldOwner</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">set</span> @OwnerName = @OldOwner + <span class="string">'.'</span> + <span class="keyword">rtrim</span>(@<span class="keyword">Name</span>)</span><br><span class="line">   exec sp_changeobjectowner @OwnerName, @NewOwner</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- select @name,@NewOwner,@OldOwner</span></span><br><span class="line"><span class="keyword">FETCH</span> <span class="keyword">NEXT</span> <span class="keyword">FROM</span> curObject <span class="keyword">INTO</span> @<span class="keyword">Name</span>, @Owner</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">close</span> curObject</span><br><span class="line"><span class="keyword">deallocate</span> curObject</span><br><span class="line"><span class="keyword">GO</span></span><br></pre></td></tr></table></figure></li>
<li>SQL SERVER中直接循环写入数据
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> @i <span class="built_in">int</span></span><br><span class="line"><span class="keyword">set</span> @i=<span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> @i&lt;<span class="number">30</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">test</span> (userid) <span class="keyword">values</span>(@i)</span><br><span class="line">    <span class="keyword">set</span> @i=@i+<span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>案例：有如下表，要求就裱中所有沒有及格的成績，在每次增長0.1的基礎上，使他們剛好及格:</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">score</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Zhangshan</td>
<td style="text-align:left">80</td>
</tr>
<tr>
<td style="text-align:left">Lishi</td>
<td style="text-align:left">59</td>
</tr>
<tr>
<td style="text-align:left">Wangwu</td>
<td style="text-align:left">50</td>
</tr>
<tr>
<td style="text-align:left">Songquan</td>
<td style="text-align:left">69</td>
</tr>
</tbody>
</table>
<hr>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">while((<span class="keyword">select</span> <span class="keyword">min</span>(score) <span class="keyword">from</span> tb_table)&lt;<span class="number">60</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">update</span> tb_table <span class="keyword">set</span> score =score*<span class="number">1.01</span></span><br><span class="line"><span class="keyword">where</span> score&lt;<span class="number">60</span></span><br><span class="line"><span class="keyword">if</span>  (<span class="keyword">select</span> <span class="keyword">min</span>(score) <span class="keyword">from</span> tb_table)&gt;<span class="number">60</span></span><br><span class="line">  break</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">    continue</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<h1>数据开发-经典</h1>
<ol>
<li>按姓氏笔画排序:
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> * <span class="keyword">From</span> TableName <span class="keyword">Order</span> <span class="keyword">By</span> CustomerName <span class="keyword">Collate</span> Chinese_PRC_Stroke_ci_as //从少到多</span><br></pre></td></tr></table></figure></li>
<li>数据库加密:
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">encrypt</span>(<span class="string">'原始密码'</span>)</span><br><span class="line"><span class="keyword">select</span> pwdencrypt(<span class="string">'原始密码'</span>)</span><br><span class="line"><span class="keyword">select</span> pwdcompare(<span class="string">'原始密码'</span>,<span class="string">'加密后密码'</span>) = <span class="number">1</span><span class="comment">--相同；否则不相同 encrypt('原始密码')</span></span><br><span class="line"><span class="keyword">select</span> pwdencrypt(<span class="string">'原始密码'</span>)</span><br><span class="line"><span class="keyword">select</span> pwdcompare(<span class="string">'原始密码'</span>,<span class="string">'加密后密码'</span>) = <span class="number">1</span><span class="comment">--相同；否则不相同</span></span><br></pre></td></tr></table></figure></li>
<li>取回表中字段:
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> @<span class="keyword">list</span> <span class="built_in">varchar</span>(<span class="number">1000</span>),</span><br><span class="line">@<span class="keyword">sql</span> <span class="keyword">nvarchar</span>(<span class="number">1000</span>)</span><br><span class="line"><span class="keyword">select</span> @<span class="keyword">list</span>=@<span class="keyword">list</span>+<span class="string">','</span>+b.name <span class="keyword">from</span> sysobjects a,syscolumns b <span class="keyword">where</span> a.id=b.id <span class="keyword">and</span> a.name=<span class="string">'表A'</span></span><br><span class="line"><span class="keyword">set</span> @<span class="keyword">sql</span>=<span class="string">'select '</span>+<span class="keyword">right</span>(@<span class="keyword">list</span>,<span class="keyword">len</span>(@<span class="keyword">list</span>)<span class="number">-1</span>)+<span class="string">' from 表A'</span></span><br><span class="line">exec (@<span class="keyword">sql</span>)</span><br></pre></td></tr></table></figure></li>
<li>查看硬盘分区:
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXEC master..xp_fixeddrives</span><br></pre></td></tr></table></figure></li>
<li>比较A,B表是否相等:
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if (<span class="keyword">select</span> <span class="keyword">checksum_agg</span>(binary_checksum(*)) <span class="keyword">from</span> A)</span><br><span class="line">     =</span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">checksum_agg</span>(binary_checksum(*)) <span class="keyword">from</span> B)</span><br><span class="line">print <span class="string">'相等'</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">print <span class="string">'不相等'</span></span><br></pre></td></tr></table></figure></li>
<li>杀掉所有的事件探察器进程:
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> hcforeach <span class="keyword">CURSOR</span> <span class="keyword">GLOBAL</span> <span class="keyword">FOR</span> <span class="keyword">SELECT</span> <span class="string">'kill '</span>+<span class="keyword">RTRIM</span>(spid) <span class="keyword">FROM</span> master.dbo.sysprocesses</span><br><span class="line"><span class="keyword">WHERE</span> program_name <span class="keyword">IN</span>(<span class="string">'SQL profiler'</span>,N<span class="string">'SQL 事件探查器'</span>)</span><br><span class="line">EXEC sp_msforeach_worker <span class="string">'?'</span></span><br></pre></td></tr></table></figure></li>
<li>记录搜索:
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">开头到N条记录</span><br><span class="line">Select Top N * From 表</span><br><span class="line">-------------------------------</span><br><span class="line">N到M条记录(要有主索引ID)</span><br><span class="line">Select Top M-N * From 表 Where ID in (Select Top M ID From 表) Order by ID   Desc</span><br><span class="line">----------------------------------</span><br><span class="line">N到结尾记录</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Top N * <span class="keyword">From</span> 表 <span class="keyword">Order</span> <span class="keyword">by</span> <span class="keyword">ID</span> <span class="keyword">Desc</span></span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>
<p>案例</p>
<ul>
<li>例如1：一张表有一万多条记录，表的第一个字段 RecID 是自增长字段，写一个SQL语句， 找出表的第31到第40个记录。</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> top <span class="number">10</span> recid <span class="keyword">from</span> A <span class="keyword">where</span> recid <span class="keyword">not</span>  <span class="keyword">in</span>(<span class="keyword">select</span> top <span class="number">30</span> recid <span class="keyword">from</span> A)</span><br></pre></td></tr></table></figure>
分析：如果这样写会产生某些问题，如果recid在表中存在逻辑索引。<code>select top 10 recid from A where……</code>是从索引中查找，而后面的<code>select top 30 recid from A</code>则在数据表中查找，这样由于索引中的顺序有可能和数据表中的不一致，这样就导致查询到的不是本来的欲得到的数据。</p>
</li>
<li>
<p>解决方案</p>
<ul>
<li>用<code>order by select top 30 recid from A order by ricid</code>如果该字段不是自增长，就会出现问题</li>
<li>在那个子查询中也加条件：<code>select top 30 recid from A where recid&gt;-1</code></li>
</ul>
</li>
<li>
<p>例2：查询表中的最后以条记录，并不知道这个表共有多少数据,以及表结构。</p>
</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @s = <span class="string">'select top 1 * from T   where pid not in (select top '</span> + <span class="keyword">str</span>(@<span class="keyword">count</span><span class="number">-1</span>) + <span class="string">' pid  from  T)'</span></span><br><span class="line">print @s      exec  sp_executesql  @s</span><br></pre></td></tr></table></figure></p>
<ol start="9">
<li>
<p>获取当前数据库中的所有用户表
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">Name</span> <span class="keyword">from</span> sysobjects <span class="keyword">where</span> xtype=<span class="string">'u'</span> <span class="keyword">and</span> <span class="keyword">status</span>&gt;=<span class="number">0</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>获取某一个表的所有字段
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> syscolumns <span class="keyword">where</span> <span class="keyword">id</span>=object_id(<span class="string">'表名'</span>)</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> syscolumns <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> sysobjects <span class="keyword">where</span> <span class="keyword">type</span> = <span class="string">'u'</span> <span class="keyword">and</span> <span class="keyword">name</span> = <span class="string">'表名'</span>)</span><br></pre></td></tr></table></figure>
两种方式的效果相同</p>
</li>
<li>
<p>查看与某一个表相关的视图、存储过程、函数
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.* <span class="keyword">from</span> sysobjects a, syscomments b <span class="keyword">where</span> a.id = b.id <span class="keyword">and</span> b.text <span class="keyword">like</span> <span class="string">'%表名%'</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>查看当前数据库中所有存储过程
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">as</span> 存储过程名称 <span class="keyword">from</span> sysobjects <span class="keyword">where</span> xtype=<span class="string">'P'</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>查询用户创建的所有数据库
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from master..sysdatabases D where sid not in(select sid from master..syslogins where name&#x3D;&#39;sa&#39;)</span><br></pre></td></tr></table></figure></p>
</li>
</ol>
<ul>
<li>或者
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> dbid, <span class="keyword">name</span> <span class="keyword">AS</span> DB_NAME <span class="keyword">from</span> master..sysdatabases <span class="keyword">where</span> <span class="keyword">sid</span> &lt;&gt; <span class="number">0x01</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="14">
<li>查询某一个表的字段和数据类型
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> column_name,data_type <span class="keyword">from</span> information_schema.columns</span><br><span class="line"><span class="keyword">where</span> table_name = <span class="string">'表名'</span></span><br></pre></td></tr></table></figure></li>
<li>不同服务器数据库之间的数据操作</li>
</ol>
<ul>
<li>
<p>创建链接服务器
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exec sp_addlinkedserver   'ITSV ', ' ', 'SQLOLEDB ', '远程服务器名或ip地址 '</span><br><span class="line">exec sp_addlinkedsrvlogin  'ITSV ', 'false ',null, '用户名 ', '密码 '</span><br></pre></td></tr></table></figure></p>
<ul>
<li>查询示例</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> ITSV.数据库名.dbo.表名</span><br></pre></td></tr></table></figure></p>
<ul>
<li>导入示例</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">into</span> 表 <span class="keyword">from</span> ITSV.数据库名.dbo.表名</span><br></pre></td></tr></table></figure></p>
<ul>
<li>以后不再使用时删除链接服务器</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exec sp_dropserver  'ITSV ', 'droplogins '</span><br></pre></td></tr></table></figure></p>
<ul>
<li>连接远程/局域网数据(openrowset/openquery/opendatasource)</li>
</ul>
<p>--1、openrowset</p>
<ul>
<li>查询示例</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> openrowset( <span class="string">'SQLOLEDB '</span>, <span class="string">'sql服务器名 '</span>; '用户名 '; '密码 ',数据库名.dbo.表名)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>生成本地表</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">into</span> 表 <span class="keyword">from</span> openrowset( <span class="string">'SQLOLEDB '</span>, <span class="string">'sql服务器名 '</span>; '用户名 '; '密码 ',数据库名.dbo.表名)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>把本地表导入远程表</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> openrowset( <span class="string">'SQLOLEDB '</span>, <span class="string">'sql服务器名 '</span>; '用户名 '; '密码 ',数据库名.dbo.表名)</span><br><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> 本地表</span><br></pre></td></tr></table></figure></p>
<ul>
<li>更新本地表</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> b</span><br><span class="line"><span class="keyword">set</span> b.列A=a.列A</span><br><span class="line"><span class="keyword">from</span> openrowset( <span class="string">'SQLOLEDB '</span>, <span class="string">'sql服务器名 '</span>; '用户名 '; '密码 ',数据库名.dbo.表名)as a inner join 本地表 b</span><br><span class="line">on a.column1=b.column1</span><br></pre></td></tr></table></figure></p>
<ul>
<li>openquery用法需要创建一个连接</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--首先创建一个连接创建链接服务器</span></span><br><span class="line">exec sp_addlinkedserver   'ITSV ', ' ', 'SQLOLEDB ', '远程服务器名或ip地址 '</span><br></pre></td></tr></table></figure></p>
<ul>
<li>查询</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">FROM</span> openquery(ITSV,  <span class="string">'SELECT *  FROM 数据库.dbo.表名 '</span>)</span><br></pre></td></tr></table></figure></p>
<p>--把本地表导入远程表</p>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> openquery(ITSV,  <span class="string">'SELECT *  FROM 数据库.dbo.表名 '</span>)</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 本地表</span><br></pre></td></tr></table></figure></p>
<ul>
<li>更新本地表</li>
</ul>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">update b</span><br><span class="line">set b.列B&#x3D;a.列B</span><br><span class="line">FROM openquery(ITSV,  &#39;SELECT * FROM 数据库.dbo.表名 &#39;) as a</span><br><span class="line">inner join 本地表 b on a.列A&#x3D;b.列A</span><br></pre></td></tr></table></figure></p>
<ul>
<li>3、opendatasource/openrowset</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>   *</span><br><span class="line"><span class="keyword">FROM</span>   opendatasource( <span class="string">'SQLOLEDB '</span>,  <span class="string">'Data Source=ip/ServerName;User ID=登陆名;Password=密码 '</span> ).test.dbo.roy_ta</span><br></pre></td></tr></table></figure></p>
<ul>
<li>把本地表导入远程表</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> opendatasource( <span class="string">'SQLOLEDB '</span>,  <span class="string">'Data Source=ip/ServerName;User ID=登陆名;Password=密码 '</span>).数据库.dbo.表名</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 本地表</span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">Server</span>基本函数</span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">Server</span>基本函数</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<h1>字符串函数 长度与分析用</h1>
<p>例子
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">datalength(Char_expr)</span><br></pre></td></tr></table></figure>
返回字符串包含字符数,但不包含后面的空格</p>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">substring(expression,<span class="keyword">start</span>,<span class="keyword">length</span>)</span><br></pre></td></tr></table></figure>
取子串，字符串的下标是从“1”，start为起始位置，length为字符串长度，实际应用中以len(expression)取得其长度
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">right(char_expr,int_expr)</span><br></pre></td></tr></table></figure>
返回字符串右边第int_expr个字符，还用left于之相反
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isnull( check_expression , replacement_value )</span><br></pre></td></tr></table></figure>
如果check_expression為空，則返回replacement_value的值，不為空，就返回check_expression字符操作类
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Sp_addtype</span><br><span class="line"><span class="comment">--自定義數據類型</span></span><br></pre></td></tr></table></figure>
例如：
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXEC sp_addtype birthday, datetime, 'NULL'</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> nocount &#123;<span class="keyword">on</span>|<span class="keyword">off</span>&#125;</span><br></pre></td></tr></table></figure>
使返回的结果中不包含有关受 Transact-SQL 语句影响的行数的信息。如果存储过程中包含的一些语句并不返回许多实际的数据，则该设置由于大量减少了网络流量，因此可显著提高性能。SET NOCOUNT 设置是在执行或运行时设置，而不是在分析时设置。</p>
<ul>
<li>SET NOCOUNT 为 ON 时，不返回计数（表示受 Transact-SQL 语句影响的行数）。</li>
<li>SET NOCOUNT 为 OFF 时，返回计数</li>
</ul>
<h1>常识</h1>
<p>SQL中
1.在SQL查询中：from后最多可以跟多少张表或视图：256</p>
<ol start="2">
<li>在SQL语句中出现 Order by,查询时，先排序，后取</li>
<li>在SQL中，一个字段的最大容量是8000，而对于nvarchar(4000),由于nvarchar是Unicode码。</li>
</ol>
<h1>SQLServer2000同步复制技术实现步骤</h1>
<h2>预备工作</h2>
<p>创建一个同名的 windows 用户</p>
<ol>
<li>发布服务器,订阅服务器都创建一个同名的windows用户,并设置相同的密码,做为发布快照文件夹的有效访问用户
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--管理工具</span></span><br><span class="line"><span class="comment">--计算机管理</span></span><br><span class="line"><span class="comment">--用户和组</span></span><br><span class="line"><span class="comment">--右键用户</span></span><br><span class="line"><span class="comment">--新建用户</span></span><br><span class="line"><span class="comment">--建立一个隶属于administrator组的登陆windows的用户（SynUser）</span></span><br></pre></td></tr></table></figure></li>
<li>在发布服务器上,新建一个共享目录,做为发布的快照文件的存放目录,操作:
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">我的电脑</span><span class="literal">-</span><span class="literal">-</span><span class="comment">D:\</span> <span class="comment">新建一个目录</span><span class="string">,</span><span class="comment">名为:</span> <span class="comment">PUB</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">右键这个新建的目录</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">属性</span><span class="literal">-</span><span class="literal">-</span><span class="comment">共享</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">选择"共享该文件夹"</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">通过"权限"按纽来设置具体的用户权限</span><span class="string">,</span><span class="comment">保证第一步中创建的用户(SynUser)</span> <span class="comment">具有对该文件夹的所有权限</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">确定</span></span><br></pre></td></tr></table></figure></li>
<li>设置SQL代理(SQLSERVERAGENT)服务的启动用户(发布/订阅服务器均做此设置)
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">开始</span><span class="literal">-</span><span class="literal">-</span><span class="comment">程序</span><span class="literal">-</span><span class="literal">-</span><span class="comment">管理工具</span><span class="literal">-</span><span class="literal">-</span><span class="comment">服务</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">右键SQLSERVERAGENT</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">属性</span><span class="literal">-</span><span class="literal">-</span><span class="comment">登陆</span><span class="literal">-</span><span class="literal">-</span><span class="comment">选择"此账户"</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">输入或者选择第一步中创建的windows登录用户名（SynUser）</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">"密码"中输入该用户的密码</span></span><br></pre></td></tr></table></figure></li>
<li>设置SQL Server身份验证模式,解决连接时的权限问题(发布/订阅服务器均做此设置)
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">企业管理器</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">右键SQL实例</span><span class="literal">-</span><span class="literal">-</span><span class="comment">属性</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">安全性</span><span class="literal">-</span><span class="literal">-</span><span class="comment">身份验证</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">选择"SQL</span> <span class="comment">Server</span> <span class="comment">和</span> <span class="comment">Windows"</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">确定</span></span><br></pre></td></tr></table></figure></li>
<li>在发布服务器和订阅服务器上互相注册企业管理器
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-</span><span class="literal">-</span><span class="comment">右键SQL</span> <span class="comment">Server组</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">新建SQL</span> <span class="comment">Server注册</span><span class="string">.</span><span class="string">.</span><span class="string">.</span></span><br><span class="line"><span class="literal">-</span><span class="literal">-</span><span class="comment">下一步</span><span class="literal">-</span><span class="literal">-</span><span class="comment">可用的服务器中</span><span class="string">,</span><span class="comment">输入你要注册的远程服务器名</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">添加</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">下一步</span><span class="literal">-</span><span class="literal">-</span><span class="comment">连接使用</span><span class="string">,</span><span class="comment">选择第二个"SQL</span> <span class="comment">Server身份验证"</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">下一步</span><span class="literal">-</span><span class="literal">-</span><span class="comment">输入用户名和密码（SynUser）</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">下一步</span><span class="literal">-</span><span class="literal">-</span><span class="comment">选择SQL</span> <span class="comment">Server组</span><span class="string">,</span><span class="comment">也可以创建一个新组</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">下一步</span><span class="literal">-</span><span class="literal">-</span><span class="comment">完成</span></span><br></pre></td></tr></table></figure></li>
<li>对于只能用IP,不能用计算机名的,为其注册服务器别名（此步在实施中没用到）(在连接端配置,比如,在订阅服务器上配置的话,服务器名称中输入的是发布服务器的IP)
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">开始</span><span class="literal">-</span><span class="literal">-</span><span class="comment">程序</span><span class="literal">-</span><span class="literal">-</span><span class="comment">Microsoft</span> <span class="comment">SQL</span> <span class="comment">Server</span><span class="literal">-</span><span class="literal">-</span><span class="comment">客户端网络实用工具</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">别名</span><span class="literal">-</span><span class="literal">-</span><span class="comment">添加</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">网络库选择"tcp/ip"</span><span class="literal">-</span><span class="literal">-</span><span class="comment">服务器别名输入SQL服务器名</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">连接参数</span><span class="literal">-</span><span class="literal">-</span><span class="comment">服务器名称中输入SQL服务器ip地址</span></span><br><span class="line"><span class="comment"></span><span class="literal">-</span><span class="literal">-</span><span class="comment">如果你修改了SQL的端口</span><span class="string">,</span><span class="comment">取消选择"动态决定端口"</span><span class="string">,</span><span class="comment">并输入对应的端口号</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2>正式配置</h2>
<h3>配置发布服务器</h3>
<p>打开企业管理器，在发布服务器（B、C、D）上执行以下步骤:</p>
<ol>
<li>从[工具]下拉菜单的[复制]子菜单中选择[配置发布、订阅服务器和分发]出现配置发布和分发向导</li>
<li>[下一步] 选择分发服务器 可以选择把发布服务器自己作为分发服务器或者其他sql的服务器（选择自己）</li>
<li>[下一步] 设置快照文件夹 采用默认\servername\Pub</li>
<li>[下一步] 自定义配置</li>
</ol>
<p>可以选择:是,让我设置分发数据库属性启用发布服务器或设置发布设置
否,使用下列默认设置（推荐）</p>
<ol start="5">
<li>[下一步] 设置分发数据库名称和位置 采用默认值</li>
<li>[下一步] 启用发布服务器 选择作为发布的服务器</li>
<li>[下一步] 选择需要发布的数据库和发布类型</li>
<li>[下一步] 选择注册订阅服务器</li>
<li>[下一步] 完成配置</li>
</ol>
<h3>创建出版物</h3>
<p>发布服务器B、C、D上</p>
<ol>
<li>从[工具]菜单的[复制]子菜单中选择[创建和管理发布]命令</li>
<li>选择要创建出版物的数据库，然后单击[创建发布]</li>
<li>在[创建发布向导]的提示对话框中单击[下一步]系统就会弹出一个对话框。对话框上的内容是复制的三个类型。我们现在选第一个也就是默认的快照发布(其他两个大家可以去看看帮助)</li>
<li>单击[下一步]系统要求指定可以订阅该发布的数据库服务器类型,</li>
</ol>
<p>SQLSERVER允许在不同的数据库如 orACLE或ACCESS之间进行数据复制。
但是在这里我们选择运行&quot;SQL SERVER 2000&quot;的数据库服务器</p>
<ol start="5">
<li>单击[下一步]系统就弹出一个定义文章的对话框也就是选择要出版的表</li>
</ol>
<p>注意: 如果前面选择了事务发布 则再这一步中只能选择带有主键的表</p>
<ol start="6">
<li>选择发布名称和描述</li>
<li>自定义发布属性 向导提供的选择:</li>
</ol>
<ul>
<li>是 我将自定义数据筛选,启用匿名订阅和或其他自定义属性</li>
<li>否 根据指定方式创建发布 （建议采用自定义的方式）</li>
</ul>
<ol start="8">
<li>[下一步] 选择筛选发布的方式</li>
<li>[下一步] 可以选择是否允许匿名订阅</li>
</ol>
<p>如果选择署名订阅,则需要在发布服务器上添加订阅服务器</p>
<ol>
<li>[工具]-&gt;[复制]-&gt;[配置发布、订阅服务器和分发的属性]-&gt;[订阅服务器] 中添加</li>
</ol>
<ul>
<li>否则在订阅服务器上请求订阅时会出现的提示:改发布不允许匿名订阅</li>
</ul>
<p>如果仍然需要匿名订阅则用以下解决办法
[企业管理器]-&gt;[复制]-&gt;[发布内容]-&gt;[属性]-&gt;[订阅选项] 选择允许匿名请求订阅</p>
<p>如果选择匿名订阅,则配置订阅服务器时不会出现以上提示
[下一步] 设置快照 代理程序调度</p>
<p>[下一步] 完成配置</p>
<p>当完成出版物的创建后创建出版物的数据库也就变成了一个共享数据库</p>
<p>有数据
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">srv1.库名..author有字段:id,name,phone,</span><br><span class="line">srv2.库名..author有字段:id,name,telphone,adress</span><br></pre></td></tr></table></figure></p>
<p>要求：
<figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">srv1.库名<span class="built_in">..author</span>增加记录则srv1.库名<span class="built_in">..author</span>记录增加</span><br><span class="line"></span><br><span class="line">rv1.库名<span class="built_in">..author</span>的phone字段更新，则srv1.库名<span class="built_in">..author</span>对应字段t&gt;elphone更新</span><br><span class="line">*/</span><br></pre></td></tr></table></figure></p>
<h2>大致的处理步</h2>
<p>创建连接服务器</p>
<ol>
<li>在 srv1 上创建连接服务器,以便在 srv1 中操作 srv2,实现同步
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exec sp_addlinkedserver 'srv2','','SQLOLEDB','srv2的sql实例名或ip'</span><br><span class="line">exec sp_addlinkedsrvlogin 'srv2','false',null,'用户名','密码'</span><br><span class="line">go</span><br></pre></td></tr></table></figure></li>
<li>在 srv1 和 srv2 这两台电脑中,启动 msdtc(分布式事务处理服务),并且设置为自动启动</li>
</ol>
<p>我的电脑--控制面板--管理工具--服务--右键 Distributed Transaction Coordinator--属性--启动--并将启动类型设置为自动启动
go</p>
<ul>
<li>然后创建一个作业定时调用上面的同步处理存储过程就行了</li>
</ul>
<p>企业管理器
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">-管理</span></span><br><span class="line"><span class="ruby">--SQL Server代理</span></span><br><span class="line"><span class="ruby">--右键作业</span></span><br><span class="line"><span class="ruby">--新建作业</span></span><br><span class="line"><span class="ruby">--<span class="string">"常规"</span>项中输入作业名称</span></span><br><span class="line"><span class="ruby">--<span class="string">"步骤"</span>项</span></span><br><span class="line"><span class="ruby">--新建</span></span><br><span class="line"><span class="ruby">--<span class="string">"步骤名"</span>中输入步骤名</span></span><br><span class="line"><span class="ruby">--<span class="string">"类型"</span>中选择<span class="string">"Transact-SQL 脚本(TSQL)"</span></span></span><br><span class="line"><span class="ruby">--<span class="string">"数据库"</span>选择执行命令的数据库</span></span><br><span class="line"><span class="ruby">--<span class="string">"命令"</span>中输入要执行的语句: exec p_process</span></span><br><span class="line"><span class="ruby">--确定</span></span><br><span class="line"><span class="ruby">--<span class="string">"调度"</span>项</span></span><br><span class="line"><span class="ruby">--新建调度</span></span><br><span class="line"><span class="ruby">--<span class="string">"名称"</span>中输入调度名称</span></span><br><span class="line"><span class="ruby">--<span class="string">"调度类型"</span>中选择你的作业执行安排</span></span><br><span class="line"><span class="ruby">--如果选择<span class="string">"反复出现"</span></span></span><br><span class="line"><span class="ruby">--点<span class="string">"更改"</span>来设置你的时间安排</span></span><br></pre></td></tr></table></figure>
然后将SQL Agent服务启动,并设置为自动启动,否则你的作业不会被执行</p>
<ul>
<li>
<p>设置方法:</p>
<p>我的电脑--控制面板--管理工具--服务--右键 SQLSERVERAGENT--属性--启动类型--选择&quot;自动启动&quot;--确定.</p>
</li>
</ul>
<p>-3.实现同步处理的方法2,定时同步</p>
<ul>
<li>
<p>在srv1中创建如下的同步处理存储过程
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="function"><span class="keyword">proc</span> <span class="title">p_process</span></span></span><br><span class="line"><span class="function"><span class="title">as</span></span></span><br><span class="line"><span class="function">`</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>更新修改过的数据
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> b <span class="keyword">set</span> <span class="keyword">name</span>=i.name,telphone=i.telphone</span><br><span class="line"><span class="keyword">from</span> srv2.库名.dbo.author b,author i</span><br><span class="line"><span class="keyword">where</span> b.id=i.id <span class="keyword">and</span></span><br><span class="line">(b.name &lt;&gt; i.name <span class="keyword">or</span> b.telphone &lt;&gt; i.telphone)</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>插入新增的数据
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> srv2.库名.dbo.author(<span class="keyword">id</span>,<span class="keyword">name</span>,telphone)</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>,<span class="keyword">name</span>,telphone <span class="keyword">from</span> author i</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> srv2.库名.dbo.author <span class="keyword">where</span> <span class="keyword">id</span>=i.id)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>删除已经删除的数据(如果需要的话)
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> b</span><br><span class="line"><span class="keyword">from</span> srv2.库名.dbo.author b</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> author <span class="keyword">where</span> <span class="keyword">id</span>=b.id)</span><br><span class="line"><span class="keyword">go</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

    

        <a href="/posts/SQL-Command.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Java-variable-types"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-03-22 15:16:22" datetime="2018-03-22T07:16:22.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-03-22</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/Java/">Java</a></li></ul></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Java-variable-types.html">Java 变量类型</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Java 变量类型
&lt;!--more--&gt;</p>
<h1>Java变量类型</h1>
<p>在Java语言中，所有的变量在使用前必须声明。声明变量的基本格式如下：</p>
<blockquote>
<p>type identifier [ = value][, identifier [= value] ...] ;
格式说明：type为Java数据类型。identifier是变量名。可以使用逗号隔开来声明多个同类型变量。</p>
</blockquote>
<p>以下列出了一些变量的声明实例。注意有些包含了初始化过程。
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a, b, c;         <span class="comment">// 声明三个int型整数：a、 b、c</span></span><br><span class="line"><span class="keyword">int</span> d = <span class="number">3</span>, e = <span class="number">4</span>, f = <span class="number">5</span>; <span class="comment">// 声明三个整数并赋予初值</span></span><br><span class="line"><span class="keyword">byte</span> z = <span class="number">22</span>;         <span class="comment">// 声明并初始化 z</span></span><br><span class="line">String s = <span class="string">"runoob"</span>;  <span class="comment">// 声明并初始化字符串 s</span></span><br><span class="line"><span class="keyword">double</span> pi = <span class="number">3.14159</span>; <span class="comment">// 声明了双精度浮点型变量 pi</span></span><br><span class="line"><span class="keyword">char</span> x = <span class="string">'x'</span>;        <span class="comment">// 声明变量 x 的值是字符 'x'。</span></span><br></pre></td></tr></table></figure></p>
<h1>Java语言支持的变量类型有</h1>
<ul>
<li>类变量：独立于方法之外的变量，用 static 修饰。</li>
<li>实例变量：独立于方法之外的变量，不过没有 static 修饰。</li>
<li>局部变量：类的方法中的变量。</li>
<li>实例
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Variable</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> allClicks=<span class="number">0</span>;    <span class="comment">// 类变量</span></span><br><span class="line"></span><br><span class="line">    String str=<span class="string">"hello world"</span>;  <span class="comment">// 实例变量</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> i =<span class="number">0</span>;  <span class="comment">// 局部变量</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1>Java 局部变量</h1>
<ul>
<li>局部变量声明在方法、构造方法或者语句块中；</li>
<li>局部变量在方法、构造方法、或者语句块被执行的时候创建，当它们执行完成后，变量将会被销毁；</li>
<li>访问修饰符不能用于局部变量；</li>
<li>局部变量只在声明它的方法、构造方法或者语句块中可见；</li>
<li>局部变量是在栈上分配的。</li>
<li>局部变量没有默认值，所以局部变量被声明后，必须经过初始化，才可以使用。</li>
<li></li>
</ul>
<p>实例 1</p>
<p>在以下实例中age是一个局部变量。定义在pupAge()方法中，它的作用域就限制在这个方法中。
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pupAge</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">int</span> age = <span class="number">0</span>;</span><br><span class="line">      age = age + <span class="number">7</span>;</span><br><span class="line">      System.out.println(<span class="string">"小狗的年龄是: "</span> + age);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">      Test test = <span class="keyword">new</span> Test();</span><br><span class="line">      test.pupAge();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
以上实例编译运行结果如下:</p>
<blockquote>
<p>小狗的年龄是: 7</p>
</blockquote>
<p>实例 2</p>
<p>在下面的例子中 age 变量没有初始化，所以在编译时会出错：
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pupAge</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">int</span> age;</span><br><span class="line">      age = age + <span class="number">7</span>;</span><br><span class="line">      System.out.println(<span class="string">"小狗的年龄是 : "</span> + age);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">      Test test = <span class="keyword">new</span> Test();</span><br><span class="line">      test.pupAge();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
以上实例编译运行结果如下:</p>
<blockquote>
<p>Test.java:4:variable number might not have been initialized
age = age + 7;
^
1 error</p>
</blockquote>
<h1>实例变量</h1>
<ul>
<li>实例变量声明在一个类中，但在方法、构造方法和语句块之外；</li>
<li>当一个对象被实例化之后，每个实例变量的值就跟着确定；</li>
<li>实例变量在对象创建的时候创建，在对象被销毁的时候销毁；</li>
<li>实例变量的值应该至少被一个方法、构造方法或者语句块引用，使得外部能够通过这些方式获取实例变量信息；</li>
<li>实例变量可以声明在使用前或者使用后；</li>
<li>访问修饰符可以修饰实例变量；</li>
<li>实例变量对于类中的方法、构造方法或者语句块是可见的。一般情况下应该把实例变量设为私有。通过使用访问修饰符可以使实例变量对子类可见；</li>
<li>实例变量具有默认值。数值型变量的默认值是0，布尔型变量的默认值是false，引用类型变量的默认值是null。变量的值可以在声明时指定，也可以在构造方法中指定；</li>
<li>实例变量可以直接通过变量名访问。但在静态方法以及其他类中，就应该使用完全限定名：ObejectReference.VariableName。</li>
</ul>
<p>实例
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Employee.java 文件代码：</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span>&#123;</span><br><span class="line">   <span class="comment">// 这个实例变量对子类可见</span></span><br><span class="line">   <span class="keyword">public</span> String name;</span><br><span class="line">   <span class="comment">// 私有变量，仅在该类可见</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line">   <span class="comment">//在构造器中对name赋值</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Employee</span> <span class="params">(String empName)</span></span>&#123;</span><br><span class="line">      name = empName;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//设定salary的值</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalary</span><span class="params">(<span class="keyword">double</span> empSal)</span></span>&#123;</span><br><span class="line">      salary = empSal;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 打印信息</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printEmp</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"名字 : "</span> + name );</span><br><span class="line">      System.out.println(<span class="string">"薪水 : "</span> + salary);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">      Employee empOne = <span class="keyword">new</span> Employee(<span class="string">"RUNOOB"</span>);</span><br><span class="line">      empOne.setSalary(<span class="number">1000</span>);</span><br><span class="line">      empOne.printEmp();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
以上实例编译运行结果如下:</p>
<blockquote>
<p>$ javac Employee.java
$ java Employee
名字 : RUNOOB
薪水 : 1000.0</p>
</blockquote>
<h1>类变量（静态变量）</h1>
<ul>
<li>类变量也称为静态变量，在类中以static关键字声明，但必须在方法构造方法和语句块之外。</li>
<li>无论一个类创建了多少个对象，类只拥有类变量的一份拷贝。</li>
<li>静态变量除了被声明为常量外很少使用。常量是指声明为public/private，final和static类型的变量。常量初始化后不可改变。</li>
<li>静态变量储存在静态存储区。经常被声明为常量，很少单独使用static声明变量。</li>
<li>静态变量在程序开始时创建，在程序结束时销毁。</li>
<li>与实例变量具有相似的可见性。但为了对类的使用者可见，大多数静态变量声明为public类型。</li>
<li>默认值和实例变量相似。数值型变量默认值是0，布尔型默认值是false，引用类型默认值是null。变量的值可以在声明的时候指定，也可以在构造方法中指定。此外，静态变量还可以在静态语句块中初始化。</li>
<li>静态变量可以通过：ClassName.VariableName的方式访问。</li>
<li>类变量被声明为public static final类型时，类变量名称一般建议使用大写字母。如果静态变量不是public和final类型，其命名方式与实例变量以及局部变量的命名方式一致。</li>
</ul>
<p>实例：
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Employee.java 文件代码：</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="comment">//salary是静态的私有变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> salary;</span><br><span class="line">    <span class="comment">// DEPARTMENT是一个常量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEPARTMENT = <span class="string">"开发人员"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">    salary = <span class="number">10000</span>;</span><br><span class="line">        System.out.println(DEPARTMENT+<span class="string">"平均工资:"</span>+salary);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
以上实例编译运行结果如下:</p>
<blockquote>
<p>开发人员平均工资:10000.0</p>
</blockquote>
<p>注意：如果其他类想要访问该变量，可以这样访问：Employee.DEPARTMENT。</p>

    

        <a href="/posts/Java-variable-types.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Java-basic-datatypes"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-03-21 14:47:14" datetime="2018-03-21T06:47:14.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-03-21</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/Java/">Java</a></li></ul></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Java-basic-datatypes.html">Java 基本数据类型</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Java基本数据类型。
&lt;!--more--&gt;</p>
<h1>Java 的两大数据类型:</h1>
<ul>
<li>内置数据类型</li>
<li>引用数据类型</li>
</ul>
<h1><strong>内置数据类型</strong></h1>
<p>Java语言提供了八种基本类型。六种数字类型（四个整数型，两个浮点型），一种字符类型，还有一种布尔型。</p>
<h2><strong>byte：</strong></h2>
<ul>
<li>byte 数据类型是8位、有符号的，以二进制补码表示的整数；</li>
<li>最小值是<code>-128（-2^7</code>；</li>
<li>最大值是<code>127（2^7-1)</code>；</li>
<li>默认值是<code>0</code>；</li>
<li>byte 类型用在大型数组中节约空间，主要代替整数，因为 byte 变量占用的空间只有 int 类型的四分之一；</li>
<li>例子：byte a = 100，byte b = -50。</li>
</ul>
<h2><strong>short：</strong></h2>
<ul>
<li>short 数据类型是 16 位、有符号的以二进制补码表示的整数</li>
<li>最小值是<code>-32768（-2^15）</code>；</li>
<li>最大值是<code>32767（2^15 - 1)</code>；</li>
<li>Short 数据类型也可以像 byte 那样节省空间。一个short变量是int型变量所占空间的二分之一；</li>
<li>默认值是<code>0</code>；</li>
<li>例子：short s = 1000，short r = -20000。</li>
</ul>
<h2><strong>int：</strong></h2>
<ul>
<li>int 数据类型是32位、有符号的以二进制补码表示的整数；</li>
<li>最小值是<code>-2,147,483,648（-2^31）</code>；</li>
<li>最大值是<code>2,147,483,647（2^31 - 1)</code>；</li>
<li>一般地整型变量默认为 int 类型；</li>
<li>默认值是 <code>0</code> ；</li>
<li>例子：int a = 100000, int b = -200000。</li>
</ul>
<h2><strong>long：</strong></h2>
<ul>
<li>long 数据类型是 64 位、有符号的以二进制补码表示的整数；</li>
<li>最小值是<code>-9,223,372,036,854,775,808（-2^63）</code>；</li>
<li>最大值是<code>9,223,372,036,854,775,807（2^63 -1)</code>；</li>
<li>这种类型主要使用在需要比较大整数的系统上；</li>
<li>默认值是 <code>0L</code>；</li>
<li>例子： long a = 100000L，Long b = -200000L。</li>
<li>&quot;L&quot;理论上不分大小写，但是若写成&quot;l&quot;容易与数字&quot;1&quot;混淆，不容易分辩。所以最好大写。</li>
</ul>
<h2><strong>float：</strong></h2>
<ul>
<li>float 数据类型是单精度、32位、符合IEEE 754标准的浮点数；</li>
<li>float 在储存大型浮点数组的时候可节省内存空间；</li>
<li>默认值是<code>0.0f</code>；</li>
<li>浮点数不能用来表示精确的值，如货币；
例子：float f1 = 234.5f。</li>
</ul>
<h2><strong>double：</strong></h2>
<ul>
<li>double 数据类型是双精度、64 位、符合IEEE 754标准的浮点数；</li>
<li>浮点数的默认类型为double类型；</li>
<li>double类型同样不能表示精确的值，如货币；</li>
<li>默认值是<code>0.0d</code>；</li>
<li>例子：double d1 = 123.4。</li>
</ul>
<h2><strong>boolean:</strong></h2>
<ul>
<li>boolean数据类型表示一位的信息；</li>
<li>只有两个取值：<code>true</code> 和 <code>false</code>；</li>
<li>这种类型只作为一种标志来记录 true/false 情况；</li>
<li>默认值是 false；
例子：boolean one = true。</li>
</ul>
<h2><strong>char：</strong></h2>
<ul>
<li>char类型是一个单一的 16 位 Unicode 字符；</li>
<li>最小值是<code>\u0000</code>（即为0）`；</li>
<li>最大值是<code>\uffff</code>（即为65,535）；</li>
<li>char 数据类型可以储存任何字符；</li>
<li>例子：char letter = 'A';。</li>
</ul>
<h1><strong>引用类型</strong></h1>
<ul>
<li>在Java中，引用类型的变量非常类似于C/C++的指针。引用类型指向一个对象，指向对象的变量是引用变量。这些变量在声明时被指定为一个特定的类型，比如 Employee、Puppy 等。变量一旦声明后，类型就不能被改变了。</li>
<li>对象、数组都是引用数据类型。</li>
<li>所有引用类型的默认值都是null。</li>
<li>一个引用变量可以用来引用任何与之兼容的类型。</li>
<li>例子：Site site = new Site(&quot;Runoob&quot;)。</li>
</ul>
<h1><strong>Java 常量</strong></h1>
<ul>
<li>
<p>常量在程序运行时是不能被修改的。</p>
</li>
<li>
<p>在 Java 中使用 final 关键字来修饰常量，声明方式和变量类似：
final double PI = 3.1415927;</p>
</li>
<li>
<p>虽然常量名也可以用小写，但为了便于识别，通常使用大写字母表示常量。</p>
</li>
<li>
<p>字面量可以赋给任何内置类型的变量。例如：
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span> a = <span class="number">68</span>;</span><br><span class="line"><span class="keyword">char</span> a = <span class="string">'A'</span></span><br></pre></td></tr></table></figure>
byte、int、long、和short都可以用十进制、16进制以及8进制的方式来表示。</p>
</li>
</ul>
<p>当使用常量的时候，前缀 0 表示 8 进制，而前缀 0x 代表 16 进制, 例如：
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> decimal = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> octal = <span class="number">0144</span>;</span><br><span class="line"><span class="keyword">int</span> hexa =  <span class="number">0x64</span>;</span><br></pre></td></tr></table></figure>
和其他语言一样，Java的字符串常量也是包含在两个引号之间的字符序列。下面是字符串型字面量的例子：
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"Hello World"</span></span><br><span class="line"><span class="string">"two\nlines"</span></span><br><span class="line"><span class="string">"\"This is in quotes\""</span></span><br></pre></td></tr></table></figure>
字符串常量和字符常量都可以包含任何Unicode字符。例如：
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> a = <span class="string">'\u0001'</span>;</span><br><span class="line">String a = <span class="string">"\u0001"</span>;</span><br></pre></td></tr></table></figure></p>
<h1><strong>自动类型转换</strong></h1>
<p>整型、实型（常量）、字符型数据可以混合运算。运算中，不同类型的数据先转化为同一类型，然后进行运算。</p>
<p>转换从低级到高级。</p>
<blockquote>
<p>低  ------------------------------------&gt;  高
byte,short,char—&gt; int —&gt; long—&gt; float —&gt; double</p>
</blockquote>
<p>数据类型转换必须满足如下规则：</p>
<ul>
<li>
<ol>
<li>不能对boolean类型进行类型转换。</li>
</ol>
</li>
<li>
<ol start="2">
<li>不能把对象类型转换成不相关类的对象。</li>
</ol>
</li>
<li>
<ol start="3">
<li>在把容量大的类型转换为容量小的类型时必须使用强制类型转换。</li>
</ol>
</li>
<li>
<ol start="4">
<li>转换过程中可能导致溢出或损失精度，例如：
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i =<span class="number">128</span>;</span><br><span class="line"><span class="keyword">byte</span> b = (<span class="keyword">byte</span>)i;</span><br><span class="line">因为 <span class="keyword">byte</span> 类型是 <span class="number">8</span> 位，最大值为<span class="number">127</span>，所以当 <span class="keyword">int</span> 强制转换为 <span class="keyword">byte</span> 类型时，值 <span class="number">128</span> 时候就会导致溢出。</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>
<ol start="5">
<li>浮点数到整数的转换是通过舍弃小数得到，而不是四舍五入，例如：
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">int</span>)<span class="number">23.7</span> == <span class="number">23</span>;</span><br><span class="line">(<span class="keyword">int</span>)-<span class="number">45.89f</span> == -<span class="number">45</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h1><strong>自动类型转换</strong></h1>
<p>必须满足转换前的数据类型的位数要低于转换后的数据类型，例如: short数据类型的位数为16位，就可以自动转换位数为32的int类型，同样float数据类型的位数为32，可以自动转换为64位的double类型。</p>
<p>实例
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZiDongLeiZhuan</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">            <span class="keyword">char</span> c1=<span class="string">'a'</span>;<span class="comment">//定义一个char类型</span></span><br><span class="line">            <span class="keyword">int</span> i1 = c1;<span class="comment">//char自动类型转换为int</span></span><br><span class="line">            System.out.println(<span class="string">"char自动类型转换为int后的值等于"</span>+i1);</span><br><span class="line">            <span class="keyword">char</span> c2 = <span class="string">'A'</span>;<span class="comment">//定义一个char类型</span></span><br><span class="line">            <span class="keyword">int</span> i2 = c2+<span class="number">1</span>;<span class="comment">//char 类型和 int 类型计算</span></span><br><span class="line">            System.out.println(<span class="string">"char类型和int计算后的值等于"</span>+i2);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
运行结果为:</p>
<blockquote>
<p>char自动类型转换为int后的值等于97
char类型和int计算后的值等于66</p>
</blockquote>
<p>解析：c1的值为字符'a',查ascii码表可知对应的int类型值为97，'A'对应值为65，所以i2=65+1=66。</p>
<h1><strong>强制类型转换</strong></h1>
<ul>
<li>
<ol>
<li>条件是转换的数据类型必须是兼容的。</li>
</ol>
</li>
<li>
<ol start="2">
<li>格式：(type)value type是要强制类型转换后的数据类型 实例：</li>
</ol>
</li>
</ul>
<p>实例
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QiangZhiZhuanHuan</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i1 = <span class="number">123</span>;</span><br><span class="line">        <span class="keyword">byte</span> b = (<span class="keyword">byte</span>)i1;<span class="comment">//强制类型转换为byte</span></span><br><span class="line">        System.out.println(<span class="string">"int强制类型转换为byte后的值等于"</span>+b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
运行结果：</p>
<blockquote>
<p>int强制类型转换为byte后的值等于123</p>
</blockquote>
<h1><strong>隐含强制类型转换</strong></h1>
<ul>
<li>
<ol>
<li>整数的默认类型是 int。</li>
</ol>
</li>
<li>
<ol start="2">
<li>浮点型不存在这种情况，因为在定义 float 类型时必须在数字后面跟上 F 或者 f。</li>
</ol>
</li>
</ul>

    

        <a href="/posts/Java-basic-datatypes.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </div>
    
</article>

        </li>
    
    </ul>

    
<nav id="page-nav">
    <div class="inner">
    <a class="extend prev" rel="prev" href="/page/15/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/17/">下一页</a>
    </div>
</nav>


</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/xml/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Vitan &copy; 2017 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: false, REWARD: false };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>

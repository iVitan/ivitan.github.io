<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-144334903-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    
    

    



    <meta charset="utf-8">
    
    
    
    <link rel="canonical" href="https://vitan.me/page/6/">
    
    
    <title>Vitan&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Coder,Linux,Web,Blog...">
    <meta name="description" content="Vitan&#39;s Personal Website.">
<meta property="og:type" content="website">
<meta property="og:title" content="Vitan&#39;s Blog">
<meta property="og:url" content="https://vitan.me/page/6/index.html">
<meta property="og:site_name" content="Vitan&#39;s Blog">
<meta property="og:description" content="Vitan&#39;s Personal Website.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Vitan">
<meta property="article:tag" content="Coder">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Web">
<meta property="article:tag" content="Blog...">
<meta name="twitter:card" content="summary">
    
        <link rel="alternate" type="application/atom+xml" title="Vitan&#39;s Blog" href="/xml/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/ivitan.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Vitan</h5>
          <a href="mailto:admin@vitan.me" title="admin@vitan.me" class="mail">admin@vitan.me</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-info-circle"></i>
                关于
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/ivitan" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Vitan&#39;s Blog</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        
            <a href="https://github.com/ivitan" class="header-icon waves-effect waves-circle waves-light" target="_blank" title="Github">
                <i class="icon icon-lg icon-github"></i>
            </a>
        
    </div>
</header>
<header class="content-header index-header">

    <div class="container fade-scale">
        <h1 class="title">Vitan&#39;s Blog</h1>
        <h5 class="subtitle">
            
            ⁣⁣⁣求知若饥，虚心若愚。
            
        </h5>
    </div>

    


</header>

<div class="container body-wrap">

    <ul class="post-list">
    
        <li class="post-list-item fade">
            <article id="post-DataTransformation"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-12-11 13:14:47" datetime="2018-12-11T05:14:47.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-12-11</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/DataTransformation.html">Data Transformation</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>数据处理
&lt;!--more--&gt;</p>
<h1>数据转换</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas</span><br><span class="line">df = pandas.read_excel(<span class="string">'house_sample.xlsx'</span>)<span class="comment">#读取excel文件数据</span></span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure></p>
<h2>数据运算</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将总价*10000</span></span><br><span class="line">df[<span class="string">'总价'</span>]*<span class="number">10000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment">#求总价列数据的平方根</span></span><br><span class="line">np.sqrt(df[<span class="string">'总价'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#将‘朝向’与‘户型’两列数据拼接在一起</span></span><br><span class="line">df[<span class="string">'朝向'</span>]+df[<span class="string">'户型'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#求每套房的房价均值（记得要先将总价*10000）</span></span><br><span class="line">df[<span class="string">'总价'</span>]*<span class="number">10000</span>/df[<span class="string">'建筑面积'</span>]</span><br><span class="line"><span class="comment">#df.head()</span></span><br></pre></td></tr></table></figure></p>
<h2>切分</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#以“元”为分界对s进行切分，并获取切分后的第一个字符</span></span><br><span class="line">s = <span class="string">'1.5元/平米・月'</span></span><br><span class="line">s.split(<span class="string">'元'</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义removeDollar函数实现对字符e按‘元’进行切分并获取切分后的第一个字符</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">removeDollar</span><span class="params">(e)</span>:</span> </span><br><span class="line">    <span class="keyword">return</span> e.split(<span class="string">'元'</span>)[<span class="number">0</span>]</span><br><span class="line">removeDollar(s)<span class="comment">#调用以上函数对s进行应用</span></span><br><span class="line"><span class="comment">#将函数removeDollar套用到df的物业费列</span></span><br><span class="line">df[<span class="string">'物 业 费'</span>].map(removeDollar)</span><br></pre></td></tr></table></figure></p>
<h2>匿名函数</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">removeDollar</span><span class="params">(e)</span>:</span></span><br><span class="line"><span class="keyword">return</span> e.split(<span class="string">'元'</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#将上面函数以匿名函数形式套用到df的物业费列</span></span><br><span class="line">df[<span class="string">'物 业 费'</span>].map(<span class="keyword">lambda</span> e:e.split(<span class="string">'元'</span>)[<span class="number">0</span>])</span><br></pre></td></tr></table></figure></p>
<h2>其他</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square</span><span class="params">(e)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> e * e </span><br><span class="line">square(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">square2 = <span class="keyword">lambda</span> e: e * e</span><br><span class="line">square2(<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>行列最值</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df = pandas.DataFrame([</span><br><span class="line">                [<span class="number">60</span>,<span class="number">70</span>,<span class="number">50</span>],\</span><br><span class="line">                [<span class="number">80</span>,<span class="number">79</span>,<span class="number">68</span>],\</span><br><span class="line">                [<span class="number">63</span>,<span class="number">66</span>,<span class="number">82</span>]], columns = [<span class="string">'First'</span>, <span class="string">'Second'</span>, <span class="string">'Third'</span>])</span><br><span class="line">df</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#对df的每一行数据应用匿名函数进行计算，匿名函数实现对每一行数据的最大值与最小值计算</span></span><br><span class="line">df.apply(<span class="keyword">lambda</span> e:e.max()-e.min(),axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#对df的每一列数据应用匿名函数进行计算，匿名函数实现对每一列数据的最大值与最小值计算</span></span><br><span class="line">df.apply(<span class="keyword">lambda</span> e:e.max()-e.min())</span><br></pre></td></tr></table></figure></p>
<h2>例题</h2>
<p>导入数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas</span><br><span class="line">df = pandas.read_excel(<span class="string">'house_sample.xlsx'</span>)</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure></p>
<p>实操
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">convertNaN</span><span class="params">(e)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> e == <span class="string">'暂无资料'</span>:</span><br><span class="line">        <span class="keyword">return</span> np.nan</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> e</span><br><span class="line">        </span><br><span class="line"><span class="comment">#将函数convertNaN应用到df的每个数据元素上</span></span><br><span class="line">df.applymap(convertNaN)</span><br><span class="line"></span><br><span class="line"><span class="comment">#以匿名函数形式将函数套用到df的每个数据元素上</span></span><br><span class="line">df.applymap(<span class="keyword">lambda</span> e:np.nan <span class="keyword">if</span> e ==<span class="string">'暂无资料'</span> <span class="keyword">else</span> e)</span><br></pre></td></tr></table></figure></p>
<h1>时间转换</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#导入时间处理库datetime</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment">#获取系统当前时间</span></span><br><span class="line">current_time = datetime.now()</span><br><span class="line"></span><br><span class="line">type(current_time)</span><br></pre></td></tr></table></figure></p>
<h2>时间&lt;----&gt;String</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将时间转换成字符串</span></span><br><span class="line">current_time.strftime(<span class="string">'%Y/%m%d'</span>)</span><br><span class="line"></span><br><span class="line">s = <span class="string">'2017/04-22'</span></span><br><span class="line"><span class="comment">#将字符串转换成时间</span></span><br><span class="line">print(datetime.strptime(s,<span class="string">'%Y/%m-%d'</span>))</span><br></pre></td></tr></table></figure></p>
<h2>时间回溯</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line"><span class="comment">#newday为当前时间往前回溯10天</span></span><br><span class="line">newday = current_time - timedelta(<span class="number">10</span>)</span><br><span class="line">print(newday)</span><br><span class="line"></span><br><span class="line">current_time - newday</span><br><span class="line"><span class="comment">#将current_time往后推迟10天</span></span><br><span class="line">current_time + timedelta(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="comment">#dt代表往前推移的每一个日期</span></span><br><span class="line">    dt = current_time - timedelta(i)</span><br><span class="line">    <span class="comment">#将dt转换成字符串类似格式为“2017/04/21”，并打印输出</span></span><br><span class="line">    print(dt.strftime(<span class="string">'%Y/%m/%d'</span>))</span><br></pre></td></tr></table></figure></p>
<h2>时间戳</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> mktime</span><br><span class="line"><span class="comment">#利用mktime将current_time转换成unix时间戳</span></span><br><span class="line">mktime(current_time.timetuple())</span><br><span class="line"></span><br><span class="line"><span class="comment">#将上面的unix时间戳转换成datetime，调用datetime的fromtimestamp</span></span><br><span class="line">print(datetime.fromtimestamp(<span class="number">1544492604.0</span>))</span><br></pre></td></tr></table></figure></p>
<h2>例题</h2>
<p>数据导入
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas</span><br><span class="line">df = pandas.read_excel(<span class="string">'house_sample.xlsx'</span>)</span><br><span class="line">df.head()</span><br><span class="line">df.info()</span><br></pre></td></tr></table></figure></p>
<h2>时间转换</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将df的'张贴日期'列转换成日期（datetime）形式</span></span><br><span class="line">df[<span class="string">'张贴日期'</span>] =pandas.to_datetime(df[<span class="string">'张贴日期'</span>],format=<span class="string">'西元%Y年%m月%d日'</span>)</span><br></pre></td></tr></table></figure></p>
<h1>数据重塑</h1>
<h2>数据导入</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df = pd.read_excel(<span class="string">'house_sample.xlsx'</span>)</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure></p>
<h2>数据操作</h2>
<ul>
<li>one-hot</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将df的"朝向"列数据进行one-hot处理，即转换成虚拟变量</span></span><br><span class="line">pd.get_dummies(df[<span class="string">'朝向'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#利用pandas的concat函数将“朝向”列数据进行one-hot处理后，与原来的df数据框合并</span></span><br><span class="line">df = jion(pd.compat([df,pd.get_dummies([<span class="string">'朝向'</span>])],axis=<span class="number">1</span>))</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://ww1.sinaimg.cn/large/d71f8b2fgy1fy2qy19bzvj203k08pa9y.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<ul>
<li>删除数据</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除df的'朝向'数据</span></span><br><span class="line">df = df.drop(<span class="string">'朝向'</span>,axis=<span class="number">1</span>)</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure></p>
<h2>数据透视表</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#利用数据透视表绘制以下表格</span></span><br><span class="line">df2 = df.pivot_table(index=<span class="string">'张贴日期'</span>,columns=<span class="string">'产权性质'</span>,values=<span class="string">'总价'</span>,aggfunc=sum,fill_value=<span class="number">0</span>)</span><br><span class="line"><span class="comment">#表中数据为对应交叉对象的总价之和</span></span><br><span class="line">df2.head()</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://ww1.sinaimg.cn/large/d71f8b2fgy1fy2r0yfipgj208p077dg7.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<ul>
<li>转换</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将上面表格的行索引与列索引进行对换</span></span><br><span class="line">df3 = df.pivot_table(index=<span class="string">'产权性质'</span>,columns=<span class="string">'张贴日期'</span>,values=<span class="string">'总价'</span>,aggfunc=sum,fill_value=<span class="number">0</span>)</span><br><span class="line">df3.head()</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://ww1.sinaimg.cn/large/d71f8b2fgy1fy2r25wh3fj20hq067wen.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h1>利用转置函数实现上面的行索引与列索引对换</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df2.T</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://ww1.sinaimg.cn/large/d71f8b2fgy1fy2r3aj8ejj20ho065wen.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<ul>
<li>表</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#调整上面的参数，绘制以下表格</span></span><br><span class="line">df_multi_idx = df.pivot_table(index=[<span class="string">'装修'</span>,<span class="string">'楼层'</span>],columns=<span class="string">'张贴日期'</span>,values=<span class="string">'总价'</span>,aggfunc=sum,fill_value=<span class="number">0</span>)</span><br><span class="line">df_multi_idx.head()</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://ww1.sinaimg.cn/large/d71f8b2fgy1fy2r4alq9qj20fm08lwet.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<ul>
<li>unstack函数</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#利用unstack函数转换成宽表格</span></span><br><span class="line">df_wide = df_multi_idx.unstack()</span><br><span class="line">df_wide.head()</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://ww1.sinaimg.cn/large/d71f8b2fgy1fy2r5crzljj20hc08mt95.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<ul>
<li>stack函数</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#利用stack转换成长表格</span></span><br><span class="line">df_long = df_wide.stack()</span><br><span class="line">df_long.head()</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://ww1.sinaimg.cn/large/d71f8b2fgy1fy2r6ol8gaj20fs08f3yv.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h1>综合练习</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas</span><br><span class="line"><span class="comment">#将抓取返回的数据列组合成数据框df</span></span><br><span class="line">df = pandas.read_excel(<span class="string">'news.xlsx'</span>)</span><br><span class="line"><span class="comment">#输出打印df的行数与列数</span></span><br><span class="line">df.shape</span><br><span class="line">df.head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure></p>
<h2>整理文章关键词</h2>
<p>空单元格处理
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#判断df中每一列是否有空的单元格</span></span><br><span class="line">df.isnull().any()</span><br><span class="line"></span><br><span class="line"><span class="comment">#将具有空单元格的行数据删除</span></span><br><span class="line">df = df.dropna()</span><br><span class="line">df.shape</span><br></pre></td></tr></table></figure>
关键字处理
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'keyword'</span>].head(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#对df的keyword列提取关键词并将提取结果覆盖原keyword列 提示：先根据空格切割split再索引</span></span><br><span class="line">s = <span class="string">'    \n关键字 : \n联合报农发农业部门'</span></span><br><span class="line">df[<span class="string">'keyword'</span>] = df[<span class="string">'keyword'</span>].map(<span class="keyword">lambda</span> e:e.split(<span class="string">':'</span>)[<span class="number">1</span>].strip())</span><br><span class="line">df.head(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://ww1.sinaimg.cn/large/d71f8b2fgy1fy2rgd6jh1j20a303vgmb.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://ww1.sinaimg.cn/large/d71f8b2fgy1fy2rguhdh6j20ko05mq3z.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<p>正则表达法抽取时间与源数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'source'</span>].head()</span><br><span class="line"></span><br><span class="line"><span class="comment">#法一 对source列根据空格应用切割函数</span></span><br><span class="line">df[<span class="string">'source'</span>].map(<span class="keyword">lambda</span> e:e.split()[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">df.head(<span class="number">3</span>)</span><br><span class="line"><span class="comment">#法二 根据正则表达式提取str.extract</span></span><br><span class="line">df[<span class="string">'source'</span>].str.extract(<span class="string">'(\d+年\d+月\d+)日'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#根据正则表达式提取后的数据'datetime', 'from'合并入df</span></span><br><span class="line">df[[<span class="string">'datetime'</span>,<span class="string">'from'</span>]] = df[<span class="string">'source'</span>].str.extract(<span class="string">'(\d+年\d+月\d+日) \d+:\d+\n(\w*)'</span>)</span><br></pre></td></tr></table></figure></p>
<p>转换时间格式
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将pandas整列数据转换成日期格式</span></span><br><span class="line"><span class="comment"># s = '2018年06月14日'</span></span><br><span class="line"><span class="comment"># import datetime</span></span><br><span class="line"><span class="comment"># s.strptime(s,'%Y年%m月%d日')</span></span><br><span class="line">df[<span class="string">'datetime'</span>] = pandas.to_datetime(df[<span class="string">'datetime'</span>],format=<span class="string">'%Y年%m月%d日'</span>)</span><br><span class="line">df[<span class="string">'datetime'</span>].head()</span><br></pre></td></tr></table></figure></p>
<p>刪除Source
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除source列数据</span></span><br><span class="line"><span class="keyword">del</span> df[<span class="string">'source'</span>]</span><br><span class="line"></span><br><span class="line">df.head(<span class="number">3</span>)</span><br></pre></td></tr></table></figure></p>
<hr>
<p><strong>数据</strong></p>
<ul>
<li><a href="https://github.com/ivitan/Note/tree/master/Python/Class/%E6%95%B0%E6%8D%AE%E6%B8%85%E7%90%862" target="_blank" rel="noopener">链接</a></li>
</ul>

    

        <a href="/posts/DataTransformation.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebCrawler/" rel="tag">WebCrawler</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-tmux"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-12-06 14:08:33" datetime="2018-12-06T06:08:33.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-12-06</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Diary/">Diary</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/tmux.html">Tmux</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Tmux 可以复用终端、分屏、托管进程等
&lt;!--more--&gt;</p>
<h1>Tmux</h1>
<p>alias
<figure class="highlight bash"><figcaption><span>vimrc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> tnew=<span class="string">'tmux new =s'</span></span><br></pre></td></tr></table></figure></p>
<h1>模块</h1>
<table>
<thead>
<tr>
<th style="text-align:center">名词</th>
<th style="text-align:center">含义</th>
<th style="text-align:left">解析</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">session</td>
<td style="text-align:center">会话</td>
<td style="text-align:left">一个服务器可以包含多个会话</td>
</tr>
<tr>
<td style="text-align:center">window</td>
<td style="text-align:center">窗口</td>
<td style="text-align:left">一个会话可以包含多个窗口</td>
</tr>
<tr>
<td style="text-align:center">pane</td>
<td style="text-align:center">面板</td>
<td style="text-align:left">一个窗口可以包含多个面板[强悍的分屏]</td>
</tr>
</tbody>
</table>
<hr>
<h1>输入命令 tmux 使用工具</h1>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">分屏状态</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Ctrl+b z</td>
<td style="text-align:left">缩放窗格</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b ?</td>
<td style="text-align:left">显示快捷键帮助</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b C-o</td>
<td style="text-align:left">调换窗口位置，类似与vim 里的C-w</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b 空格键</td>
<td style="text-align:left">采用下一个内置布局</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b !</td>
<td style="text-align:left">把当前窗口变为新窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b “</td>
<td style="text-align:left">横向分隔窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b %</td>
<td style="text-align:left">纵向分隔窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b q</td>
<td style="text-align:left">显示分隔窗口的编号</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b o</td>
<td style="text-align:left">跳到下一个分隔窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b 上下键</td>
<td style="text-align:left">上一个及下一个分隔窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b C-方向键</td>
<td style="text-align:left">调整分隔窗口大小</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b c</td>
<td style="text-align:left">创建新窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b 0~9</td>
<td style="text-align:left">选择几号窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b c</td>
<td style="text-align:left">创建新窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b n</td>
<td style="text-align:left">选择下一个窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b l</td>
<td style="text-align:left">切换到最后使用的窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b p</td>
<td style="text-align:left">选择前一个窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b w</td>
<td style="text-align:left">以菜单方式显示及选择窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b t</td>
<td style="text-align:left">显示时钟</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b ;</td>
<td style="text-align:left">切换到最后一个使用的面板</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b x</td>
<td style="text-align:left">关闭面板</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b &amp;</td>
<td style="text-align:left">关闭窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b s</td>
<td style="text-align:left">以菜单方式显示和选择会话</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b d</td>
<td style="text-align:left">退出tumx，并保存当前会话，这时，tmux仍在后台运行，可以通过tmux attach进入 到指定的会话</td>
</tr>
</tbody>
</table>
<h2>窗格间移动</h2>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">分屏状态</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Ctrl+b ←</td>
<td style="text-align:left">选择左边的窗格</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b →</td>
<td style="text-align:left">选择右边的窗格</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b ↑</td>
<td style="text-align:left">选择上边的窗格</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b ↓</td>
<td style="text-align:left">选择下边的窗格</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b {</td>
<td style="text-align:left">来向左交换窗格</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b }</td>
<td style="text-align:left">来向右交换窗格</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b o</td>
<td style="text-align:left">切换到下一个窗格（从左到右，从上到下）</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b ;</td>
<td style="text-align:left">移动到先前活动的窗格</td>
</tr>
</tbody>
</table>
<h2>打开/创建新窗口</h2>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">分屏状态</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Ctrl+b c</td>
<td style="text-align:left">创建一个新窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b n</td>
<td style="text-align:left">移动到下一个窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b p</td>
<td style="text-align:left">移动到上一个窗口。</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b 0 ~ Ctrl+b 9</td>
<td style="text-align:left">立即移动到特定窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b l</td>
<td style="text-align:left">移动到先前选择的窗口</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+b w</td>
<td style="text-align:left">以交互方式选择当前窗口</td>
</tr>
</tbody>
</table>

    

        <a href="/posts/tmux.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Termux/" rel="tag">Termux</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-PyData"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-12-04 14:12:45" datetime="2018-12-04T06:12:45.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-12-04</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/Python/">Python</a></li></ul></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/PyData.html">数据处理</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>数据处理
&lt;!--more--&gt;</p>
<h1>数据筛选</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df = pd.DataFrame([&#123;<span class="string">'name'</span>:<span class="string">'frank'</span>, <span class="string">'gender'</span>:<span class="string">'M'</span>, <span class="string">'age'</span>:<span class="number">29</span>&#125;, </span><br><span class="line">                &#123;<span class="string">'name'</span>:<span class="string">'mary'</span>,  <span class="string">'gender'</span>:<span class="string">'F'</span>, <span class="string">'age'</span>:<span class="number">23</span>&#125;, </span><br><span class="line">                &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,   <span class="string">'gender'</span>:<span class="string">'M'</span>, <span class="string">'age'</span>:<span class="number">35</span>&#125;, </span><br><span class="line">                &#123;<span class="string">'name'</span>:<span class="string">'ted'</span>,   <span class="string">'gender'</span>:<span class="string">'M'</span>, <span class="string">'age'</span>:<span class="number">33</span>&#125;, </span><br><span class="line">                &#123;<span class="string">'name'</span>:<span class="string">'jean'</span>,  <span class="string">'gender'</span>:<span class="string">'F'</span>, <span class="string">'age'</span>:<span class="number">21</span>&#125;, </span><br><span class="line">                &#123;<span class="string">'name'</span>:<span class="string">'lisa'</span>,  <span class="string">'gender'</span>:<span class="string">'F'</span>, <span class="string">'age'</span>:<span class="number">20</span>&#125;])</span><br></pre></td></tr></table></figure></p>
<h2>筛选</h2>
<ol>
<li>查看df前5行
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.head(<span class="number">5</span>)</span><br></pre></td></tr></table></figure></li>
<li>利用ix索引查找行号名为1的行记录
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.ix[<span class="number">1</span>]</span><br></pre></td></tr></table></figure></li>
<li>利用ix查找行号名为1-3的行记录
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.ix[<span class="number">1</span>:<span class="number">3</span>]</span><br></pre></td></tr></table></figure></li>
<li>利用列名返回name列数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'name'</span>]</span><br></pre></td></tr></table></figure></li>
<li>返回name与age列数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[[<span class="string">'name'</span>,<span class="string">'age'</span>]]</span><br></pre></td></tr></table></figure></li>
<li>返回行名号为1、2的name与age列数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.ix[<span class="number">1</span>:<span class="number">2</span>,[<span class="string">'name'</span>,<span class="string">'age'</span>]]</span><br></pre></td></tr></table></figure></li>
<li>返回gender列数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'gender'</span>]</span><br><span class="line">df.gender</span><br></pre></td></tr></table></figure></li>
<li>判断每行的gender列数据是否为M
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.gender==<span class="string">'M'</span></span><br></pre></td></tr></table></figure></li>
<li>返回男性的行数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[df.gender==<span class="string">'M'</span>]</span><br></pre></td></tr></table></figure></li>
<li>判断各行记录age列是否大于30
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.age&gt;<span class="number">30</span></span><br></pre></td></tr></table></figure></li>
<li>返回年龄大于30岁的行数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[df.age&gt;<span class="number">30</span>]</span><br></pre></td></tr></table></figure></li>
<li>返回男性且年龄大于30的行数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.ix[(df.gender==<span class="string">'M'</span>) &amp; (df.age&gt;<span class="number">30</span>),]</span><br></pre></td></tr></table></figure></li>
<li>返回男性或年龄大于30的行数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.ix[(df.gender==<span class="string">'M'</span>) | (df.age&gt;<span class="number">30</span>),]</span><br></pre></td></tr></table></figure></li>
<li>df增加employee列，其值均为True
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'employee'</span>]=<span class="literal">True</span></span><br><span class="line">```python</span><br><span class="line"><span class="number">14.</span> 利用<span class="keyword">del</span>删除employee列</span><br><span class="line">```python</span><br><span class="line"><span class="keyword">del</span> df[<span class="string">'employee'</span>]</span><br></pre></td></tr></table></figure></li>
<li>再次为df增加employee列
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'employee'</span>]=<span class="literal">True</span></span><br><span class="line">df.head()<span class="comment">#查看df前5行</span></span><br></pre></td></tr></table></figure></li>
<li>利用df.drop函数删除employee列，按列删除
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df = df.drop(<span class="string">'employee'</span>,axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure></li>
<li>利用loc查看行号名为5的行数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f.loc[<span class="number">5</span>]</span><br></pre></td></tr></table></figure></li>
<li>为df增加行号名为6的行数据，数据为{'age':20, 'gender': 'F', 'name':'qoo'}
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.loc[<span class="number">6</span>]=&#123;<span class="string">'age'</span>:<span class="number">20</span>, <span class="string">'gender'</span>: <span class="string">'F'</span>, <span class="string">'name'</span>:<span class="string">'qoo'</span>&#125;</span><br></pre></td></tr></table></figure></li>
<li>利用df.drop删除索引号为6的记录
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df = df.drop(<span class="number">6</span>)</span><br></pre></td></tr></table></figure></li>
<li>利用df.append增加以上行数据到df中，ignore_index为True
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df = df.append(pd.DataFrame([&#123;<span class="string">'age'</span>:<span class="number">20</span>, <span class="string">'gender'</span>: <span class="string">'F'</span>, <span class="string">'name'</span>:<span class="string">'qoo'</span>&#125;]), ignore_index=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></li>
<li>利用df.drop删除索引号为6的行数据
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.drop(<span class="number">6</span>)</span><br></pre></td></tr></table></figure></li>
<li>为df增加一列数据userid，值为101-106,提示：利用range函数
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'userid'</span>] = range(<span class="number">101</span>,<span class="number">107</span>)</span><br></pre></td></tr></table></figure></li>
<li>利用set_index设置userid为索引列，代替原来行号名
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df = df.set_index(<span class="string">'userid'</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>oc——通过行（行名字）标签索引行数据 iloc——通过行号（行序号，从0开始）索引行数据 ix——通过行标签或者行号索引行数据（基于loc和iloc 的混合）</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#分别利用行名与行序号返回第一条行数据</span></span><br><span class="line">df.loc[<span class="number">101</span>]</span><br><span class="line">df.iloc[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#返回df第2，4，6行的数据</span></span><br><span class="line">df.iloc[[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>]]</span><br><span class="line">df.loc[[<span class="number">102</span>,<span class="number">104</span>,<span class="number">106</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment">#利用ix返回行名为101,103,105的记录</span></span><br><span class="line">df.ix[[<span class="number">101</span>,<span class="number">103</span>,<span class="number">105</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment">#利用loc返回行名为[101,103,105]的记录</span></span><br><span class="line">df.loc[[<span class="number">101</span>,<span class="number">103</span>,<span class="number">105</span>]]</span><br></pre></td></tr></table></figure></p>
<h1>检测缺失值</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy  <span class="keyword">as</span> np</span><br><span class="line">df = pd.DataFrame([\</span><br><span class="line">            [<span class="string">'frank'</span>, <span class="string">'M'</span>,    np.nan], \</span><br><span class="line">            [<span class="string">'mary'</span> , np.nan, np.nan], \</span><br><span class="line">            [<span class="string">'tom'</span>  , <span class="string">'M'</span>,    <span class="number">35</span>], \</span><br><span class="line">            [<span class="string">'ted'</span>  , <span class="string">'M'</span>,    <span class="number">33</span>], \</span><br><span class="line">            [<span class="string">'jean'</span> , np.nan, <span class="number">21</span>], \</span><br><span class="line">            [<span class="string">'lisa'</span> , <span class="string">'F'</span>,    <span class="number">20</span>]])</span><br><span class="line">df.columns = [<span class="string">'name'</span>, <span class="string">'gender'</span>, <span class="string">'age'</span>]</span><br></pre></td></tr></table></figure></p>
<h2>数据操作</h2>
<ul>
<li>判断df的gender列每个单元格是否为空</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.gender.isnull()</span><br></pre></td></tr></table></figure></p>
<ul>
<li>判断df的age列是否存在空的单元格（结果只需知道有没有存在）</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.age.isnull().any()</span><br></pre></td></tr></table></figure></p>
<ul>
<li>判断df整个数据框是否存在空的单元格（结果只需知道有没有存在）</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.isnull().values.any()</span><br></pre></td></tr></table></figure></p>
<ul>
<li>求df的age列空的单元格的总数</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.age.isnull().sum()</span><br></pre></td></tr></table></figure></p>
<ul>
<li>求df所有列空单元格的总数</li>
</ul>
<p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">df</span><span class="selector-class">.isnull</span>()<span class="selector-class">.sum</span>()<span class="selector-class">.sum</span>()</span><br></pre></td></tr></table></figure></p>
<h1>Imputing Missing Value</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy  <span class="keyword">as</span> np</span><br><span class="line">df = pd.DataFrame([\</span><br><span class="line">             [<span class="string">'frank'</span>, <span class="string">'M'</span>,    np.nan], \</span><br><span class="line">             [np.nan , np.nan, np.nan], \</span><br><span class="line">             [<span class="string">'tom'</span>  , <span class="string">'M'</span>,    <span class="number">35</span>], \</span><br><span class="line">             [<span class="string">'ted'</span>  , <span class="string">'M'</span>,    <span class="number">33</span>], \</span><br><span class="line">             [<span class="string">'jean'</span> , np.nan, <span class="number">21</span>], \</span><br><span class="line">             [<span class="string">'lisa'</span> , <span class="string">'F'</span>,    <span class="number">20</span>]])</span><br><span class="line">df.columns = [<span class="string">'name'</span>, <span class="string">'gender'</span>, <span class="string">'age'</span>]</span><br></pre></td></tr></table></figure></p>
<ul>
<li>删除</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除df具有Nan值的行</span></span><br><span class="line">df.dropna()</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除df所有列均为空值的行记录</span></span><br><span class="line">df.dropna(how=<span class="string">'all'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除df空值超过2个的行记录</span></span><br><span class="line">df.dropna(thresh=<span class="number">2</span>)</span><br><span class="line"><span class="comment">#删除df的age列</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除df中整列值均为nan的列</span></span><br><span class="line">df.dropna(axis=<span class="number">1</span>,how=<span class="string">'all'</span>)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>增加</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在df中增加一新列employee，且值为空（np.nan）</span></span><br><span class="line"> df[<span class="string">'employee'</span>]=np.nan</span><br></pre></td></tr></table></figure></p>
<ul>
<li>填补</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#填补df里任意空单元格的值为0</span></span><br><span class="line">df.fillna(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#将df的age列的均值填入该列值为空的单元格</span></span><br><span class="line">df[<span class="string">'age'</span>].fillna(df[<span class="string">'age'</span>].mean())</span><br><span class="line"></span><br><span class="line"><span class="comment">#将df的age列的空单元格，按性别填入该类性别的平均年龄值</span></span><br><span class="line">df[<span class="string">'age'</span>].fillna(df.groupby(<span class="string">'gender'</span>)[<span class="string">'age'</span>].transform(<span class="string">'mean'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用向后填补方面对df的空值单元格进行填补</span></span><br><span class="line">df.fillna(method=<span class="string">'backfill'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用向前填补对df的空值单元格进行填补</span></span><br><span class="line">df.fillna(method=<span class="string">'pad'</span>)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>数据2</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df2 = pd.DataFrame([[<span class="number">1</span>, <span class="number">870</span>],\</span><br><span class="line">            [<span class="number">2</span>, <span class="number">900</span>],\</span><br><span class="line">            [np.nan, np.nan],\</span><br><span class="line">            [<span class="number">4</span>, <span class="number">950</span>],\</span><br><span class="line">            [<span class="number">5</span>,<span class="number">1080</span>],\</span><br><span class="line">            [<span class="number">6</span>,<span class="number">1200</span>]])</span><br><span class="line">df2.columns = [<span class="string">'time'</span>, <span class="string">'val'</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用内插法对df2进行填补</span></span><br><span class="line">df2.interpolate()</span><br></pre></td></tr></table></figure></p>
<h1>实例</h1>
<ul>
<li>读取数据</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas</span><br><span class="line">df = pandas.read_csv(<span class="string">'house_data.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#用del删除列名为'Unnamed: 0'的列</span></span><br><span class="line"><span class="keyword">del</span> df[<span class="string">'Unnamed: 0'</span>]</span><br><span class="line">df.head(<span class="number">3</span>)</span><br></pre></td></tr></table></figure></p>
<h2>检视</h2>
<ul>
<li>检视前几行资料</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.head(<span class="number">5</span>)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>检视后三行资料</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.tail(<span class="number">3</span>)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>检视DataFrame 信息</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看df所有的信息(列名，各列非空计数，数据类型)</span></span><br><span class="line">df.info()</span><br></pre></td></tr></table></figure></p>
<ul>
<li>检视字段名称</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看df所有列名</span></span><br><span class="line">df.columns</span><br></pre></td></tr></table></figure></p>
<ul>
<li>检视字段型态</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看df各列数据类型</span></span><br><span class="line">df.dtypes</span><br></pre></td></tr></table></figure></p>
<h2>舍弃第一栏</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将文件读取进来，命名为df，并且在读取文件同时删除第1列</span></span><br><span class="line">df = pandas.read_csv(<span class="string">'house_data.csv'</span>,index_col=<span class="number">0</span>)</span><br></pre></td></tr></table></figure></p>
<h2>将&quot;暂无资料&quot;变成缺失值</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#筛选df数据框中“物业费”列的值为“暂无资料”的行记录</span></span><br><span class="line">df[df[<span class="string">'物 业 费'</span>]==<span class="string">'暂无资料'</span>]</span><br><span class="line"><span class="comment"># df.ix[df['物 业 费']=='暂无资料',]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment">#将“物业费”列的值为“暂无资料”的单元格设置为空</span></span><br><span class="line">df.loc[df[<span class="string">'物 业 费'</span>]==<span class="string">'暂无资料'</span>,<span class="string">'物 业 费'</span>]=np.nan</span><br><span class="line">df.head(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas</span><br><span class="line"><span class="comment">#读取文件同时，将“暂无资料”的单元格设置为空，且去掉第一列</span></span><br><span class="line">df = pandas.read_csv(<span class="string">'house_data.csv'</span>,index_col=<span class="number">0</span>,na_values=<span class="string">'暂无资料'</span>)</span><br><span class="line">df.head(<span class="number">3</span>)</span><br></pre></td></tr></table></figure></p>
<h2>取得叙述性统计</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#对df各非字符串列进行描述性统计（计数，均值，标准差，最大最小，4分位等）</span></span><br><span class="line">df.describe()</span><br></pre></td></tr></table></figure></p>
<h2>侦测缺失值</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#对事个数据框df每个单元格进行缺失值判断</span></span><br><span class="line">df.isnull()</span><br></pre></td></tr></table></figure></p>
<h2>缺失值</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#对数据框各列分别进行判断，返回每列是否有缺失值</span></span><br><span class="line">df.isnull().any()</span><br><span class="line"></span><br><span class="line"><span class="comment">#对数据框df按列统计各列各有多少个缺失值</span></span><br><span class="line">df.isnull().sum()</span><br><span class="line"></span><br><span class="line"><span class="comment">#统计数据框各列缺失值与各占各列非空单元格的比例</span></span><br><span class="line">df.count() <span class="comment"># 所有非空单元格</span></span><br><span class="line">df.isnull().sum()/df.count()</span><br></pre></td></tr></table></figure></p>
<ul>
<li>删除有缺失值的字段</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#用drop删除df的“参考月供”列数据</span></span><br><span class="line">df = df.drop(<span class="string">'参考月供'</span>,axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>
<h2>筛选字段</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#对数据框df的“产权性质”列所有出现的值进行计数</span></span><br><span class="line">df[<span class="string">'产权性质'</span>].value_counts()</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取产权性质为'个人产权'的行记录</span></span><br><span class="line">df[df[<span class="string">'产权性质'</span>]==<span class="string">'个人产权'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看获取产权性质为'个人产权'的行记录的前3行</span></span><br><span class="line">df[df[<span class="string">'产权性质'</span>] == <span class="string">'个人产权'</span>].head(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">df.iloc[<span class="number">5</span>:<span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#筛选'建筑面积'大于100且總價大于2000的行记录，查看第1行</span></span><br><span class="line">df[(df[<span class="string">'建筑面积'</span>]&gt;<span class="number">100</span>) &amp; (df[<span class="string">'總價'</span>]&gt;<span class="number">2000</span>)]</span><br><span class="line"></span><br><span class="line">df.loc[df[<span class="string">'建筑面积'</span>] &gt; <span class="number">100</span>].head(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#筛选产权性质为“个人产权”的行记录</span></span><br><span class="line">df[<span class="string">'产权性质'</span>]</span><br><span class="line">df.head(<span class="number">3</span>)</span><br></pre></td></tr></table></figure></p>
<h2>舍弃包含缺失值的字段</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#筛选建筑类别为空的行记录，并查看前3行，问，建筑类别列数据是否均为空</span></span><br><span class="line">df[df[<span class="string">'建筑类别'</span>].isnull()]</span><br><span class="line"></span><br><span class="line"><span class="comment">#利用dropna删除df的列,并将结果重新赋值给df（整列均为空的列）</span></span><br><span class="line">f.dropna(axis=<span class="number">1</span>,how=<span class="string">'all'</span>)</span><br></pre></td></tr></table></figure></p>
<h2>补齐缺失值</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#对物业费为空的单元格，填补为0</span></span><br><span class="line">df[<span class="string">'物 业 费'</span>] = df[<span class="string">'物 业 费'</span>].fillna(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#计算'總價'列为空的单元格个数</span></span><br><span class="line">df[<span class="string">'總價'</span>].isnull().sum()</span><br><span class="line"></span><br><span class="line"><span class="comment">#筛选出‘總價’为空的行记录</span></span><br><span class="line">df[df[<span class="string">'總價'</span>].isnull()]</span><br><span class="line"></span><br><span class="line"><span class="comment">#利用‘總價’列与‘建筑面积’列求均价</span></span><br><span class="line">(df[<span class="string">'總價'</span>] / df[<span class="string">'建筑面积'</span>]).mean()    </span><br><span class="line">df[<span class="string">'總價'</span>].isnull().sum()</span><br><span class="line"></span><br><span class="line"><span class="comment">#对‘總價’列单元格为空的，按上面求的“均价”与建筑面积相乘进行计算</span></span><br><span class="line">df[<span class="string">'總價'</span>] = df[<span class="string">'總價'</span>].fillna((df[<span class="string">'總價'</span>] / df[<span class="string">'建筑面积'</span>]).mean()* df[<span class="string">'建筑面积'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#再次计算‘總價’为空的单元格个数</span></span><br><span class="line">df[<span class="string">'總價'</span>].isnull().sum()</span><br></pre></td></tr></table></figure></p>
<h1>将资料写入CSV 中</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.to_csv(<span class="string">'house_final.csv'</span>, index_label=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure></p>

    

        <a href="/posts/PyData.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebCrawler/" rel="tag">WebCrawler</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-PycharmShortcut"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-11-30 19:17:57" datetime="2018-11-30T11:17:57.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-11-30</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Diary/">Diary</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/PycharmShortcut.html">Pycharm Shortcut</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>PyCharm 快捷键
&lt;!--more--&gt;</p>
<h1>常用快捷键</h1>
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Ctrl + Q</td>
<td style="text-align:left">快速查看文档</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + F1</td>
<td style="text-align:left">显示错误描述或警告信息</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + /</td>
<td style="text-align:left">行注释</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Alt + L</td>
<td style="text-align:left">代码格式化</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Alt + O</td>
<td style="text-align:left">自动导入</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Alt + I</td>
<td style="text-align:left">自动缩进</td>
</tr>
<tr>
<td style="text-align:left">Tab / Shift + Tab</td>
<td style="text-align:left">缩进、不缩进当前行</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+C/Ctrl+Insert</td>
<td style="text-align:left">复制当前行或选定的代码块到剪贴板</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + D</td>
<td style="text-align:left">复制选定的区域或行到后面或下一行</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Y</td>
<td style="text-align:left">删除当前行</td>
</tr>
<tr>
<td style="text-align:left">Shift + Enter</td>
<td style="text-align:left">下一行另起一行</td>
</tr>
<tr>
<td style="text-align:left">Ctrl +Ｊ</td>
<td style="text-align:left">插入模版</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Numpad+/-</td>
<td style="text-align:left">展开折叠代码块</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Numpad+</td>
<td style="text-align:left">全部展开</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Numpad-</td>
<td style="text-align:left">全部折叠</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Delete</td>
<td style="text-align:left">删除到字符结束</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Backspace</td>
<td style="text-align:left">删除到字符开始</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + F7</td>
<td style="text-align:left">将当前单词在整个文件中高亮，F3移动到下一个，ESC取消高亮</td>
</tr>
<tr>
<td style="text-align:left">Alt+Enter</td>
<td style="text-align:left">import模块</td>
</tr>
<tr>
<td style="text-align:left">Alt + up/down</td>
<td style="text-align:left">方法上移或下移动</td>
</tr>
<tr>
<td style="text-align:left">Alt + Shift + up/down</td>
<td style="text-align:left">当前行上移或下移动</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + B/鼠标左键</td>
<td style="text-align:left">转到方法定义处</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + W</td>
<td style="text-align:left">选中增加的代码块</td>
</tr>
<tr>
<td style="text-align:left">Shift + F6</td>
<td style="text-align:left">方法或变量重命名</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + E</td>
<td style="text-align:left">最近访问的文件</td>
</tr>
<tr>
<td style="text-align:left">Esc</td>
<td style="text-align:left">从其他窗口回到编辑窗口</td>
</tr>
<tr>
<td style="text-align:left">Shift + Esc</td>
<td style="text-align:left">隐藏当前窗口，焦点到编辑窗口</td>
</tr>
<tr>
<td style="text-align:left">F12</td>
<td style="text-align:left">回到先前的工具窗口</td>
</tr>
</tbody>
</table>
<h1>运行</h1>
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Alt + Shift + F10</td>
<td style="text-align:left">运行模式配置</td>
</tr>
<tr>
<td style="text-align:left">Alt + Shift + F9</td>
<td style="text-align:left">调试模式配置</td>
</tr>
<tr>
<td style="text-align:left">Shift + F10</td>
<td style="text-align:left">运行</td>
</tr>
<tr>
<td style="text-align:left">Shift + F9</td>
<td style="text-align:left">调试</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + F10</td>
<td style="text-align:left">运行编辑器配置</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Alt + R</td>
<td style="text-align:left">运行manage.py任务</td>
</tr>
</tbody>
</table>
<h1>调试</h1>
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">F8</td>
<td style="text-align:left">跳过</td>
</tr>
<tr>
<td style="text-align:left">F7</td>
<td style="text-align:left">进入</td>
</tr>
<tr>
<td style="text-align:left">Shift + F8</td>
<td style="text-align:left">退出</td>
</tr>
<tr>
<td style="text-align:left">Alt + F9</td>
<td style="text-align:left">运行游标</td>
</tr>
<tr>
<td style="text-align:left">Alt + F8</td>
<td style="text-align:left">验证表达式</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Alt + F8</td>
<td style="text-align:left">快速验证表达式</td>
</tr>
<tr>
<td style="text-align:left">F9</td>
<td style="text-align:left">恢复程序</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + F8</td>
<td style="text-align:left">断点开关</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + F8</td>
<td style="text-align:left">查看断点</td>
</tr>
</tbody>
</table>
<h1>编辑</h1>
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Ctrl + Space</td>
<td style="text-align:left">基本的代码完成（类、方法、属性）</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Alt + Space</td>
<td style="text-align:left">快速导入任意类</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + Enter</td>
<td style="text-align:left">语句完成</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + P</td>
<td style="text-align:left">参数信息（在方法中调用参数）</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Q</td>
<td style="text-align:left">快速查看文档</td>
</tr>
<tr>
<td style="text-align:left">Shift + F1</td>
<td style="text-align:left">外部文档</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + 鼠标</td>
<td style="text-align:left">简介</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + F1</td>
<td style="text-align:left">显示错误描述或警告信息</td>
</tr>
<tr>
<td style="text-align:left">Alt + Insert</td>
<td style="text-align:left">自动生成代码</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + O</td>
<td style="text-align:left">重新方法</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Alt + T</td>
<td style="text-align:left">选中</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + /</td>
<td style="text-align:left">行注释</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + /</td>
<td style="text-align:left">块注释</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + W</td>
<td style="text-align:left">选中增加的代码块</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + W</td>
<td style="text-align:left">回到之前状态</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + ]/[</td>
<td style="text-align:left">选定代码块结束、开始</td>
</tr>
<tr>
<td style="text-align:left">Alt + Enter</td>
<td style="text-align:left">快速修正</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Alt + L</td>
<td style="text-align:left">代码格式化</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Alt + O</td>
<td style="text-align:left">自动导入</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Alt + I</td>
<td style="text-align:left">自动缩进</td>
</tr>
<tr>
<td style="text-align:left">Tab / Shift + Tab</td>
<td style="text-align:left">缩进、不缩进当前行</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+X/Shift+Delete</td>
<td style="text-align:left">剪切当前行或选定的代码块到剪贴板</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+C/Ctrl+Insert</td>
<td style="text-align:left">复制当前行或选定的代码块到剪贴板</td>
</tr>
<tr>
<td style="text-align:left">Ctrl+V/Shift+Insert</td>
<td style="text-align:left">从剪贴板粘贴</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + V</td>
<td style="text-align:left">从最近的缓冲区粘贴</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + D</td>
<td style="text-align:left">复制选定的区域或行到后面或下一行</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Y</td>
<td style="text-align:left">删除当前行</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + J</td>
<td style="text-align:left">添加智能线</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Enter</td>
<td style="text-align:left">智能线切割</td>
</tr>
<tr>
<td style="text-align:left">Shift + Enter</td>
<td style="text-align:left">下一行另起一行</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + U</td>
<td style="text-align:left">在选定的区域或代码块间切换</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Delete</td>
<td style="text-align:left">删除到字符结束</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Backspace</td>
<td style="text-align:left">删除到字符开始</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Numpad+/-</td>
<td style="text-align:left">展开折叠代码块</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Numpad+</td>
<td style="text-align:left">全部展开</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Numpad-</td>
<td style="text-align:left">全部折叠</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + F4</td>
<td style="text-align:left">关闭运行的选项卡</td>
</tr>
</tbody>
</table>
<h1>查找/替换</h1>
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">F3</td>
<td style="text-align:left">下一个</td>
</tr>
<tr>
<td style="text-align:left">Shift + F3</td>
<td style="text-align:left">前一个</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + R</td>
<td style="text-align:left">替换</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + F</td>
<td style="text-align:left">全局查找</td>
</tr>
<tr>
<td style="text-align:left">Ctrl + Shift + R</td>
<td style="text-align:left">全局替换</td>
</tr>
</tbody>
</table>

    

        <a href="/posts/PycharmShortcut.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ArchLinux/" rel="tag">ArchLinux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Win/" rel="tag">Win</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-ScrapyCommand"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-11-27 11:57:17" datetime="2018-11-27T03:57:17.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-11-27</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/Python/">Python</a></li></ul></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/ScrapyCommand.html">Scrapy</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Scrapy 命令
&lt;!--more--&gt;</p>
<h1>安装</h1>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install scrapy</span><br></pre></td></tr></table></figure></p>
<h1>创建/运行</h1>
<h2>创建项目</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject projectName</span><br></pre></td></tr></table></figure></p>
<h2>项目 tree</h2>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">├── scrapy.cfg  项目的配置文件</span><br><span class="line">└── zhihu  该项目的python模块。之后您将在此加入代码</span><br><span class="line">    ├── __init__.py</span><br><span class="line">    ├── items.py  项目中的 item 文件.</span><br><span class="line">    ├── middlewares.py</span><br><span class="line">    ├── pipelines.py</span><br><span class="line">    ├── __pycache__</span><br><span class="line">    ├── settings.py  项目的设置文件</span><br><span class="line">    └── spiders  放置 spider 代码的目录</span><br><span class="line">        ├── __init__.py</span><br><span class="line">        └── __pycache__</span><br></pre></td></tr></table></figure></p>
<h2>创建新的 spider</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy genspider mydomain mydomain.com</span><br></pre></td></tr></table></figure></p>
<h2>运行</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl mydomain</span><br></pre></td></tr></table></figure></p>
<h1>项目操作</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl zhihu <span class="comment"># 执行项目</span></span><br><span class="line">scrapy check [-l] &lt;zhihu&gt; <span class="comment"># 检查错误</span></span><br><span class="line">scrapy list <span class="comment"># 返回 spider 名称</span></span><br><span class="line">scrapy edit &lt;zhihu&gt; <span class="comment"># 在命令行编辑</span></span><br><span class="line">scrapy fetch url <span class="comment"># 下载网页源码</span></span><br><span class="line">scrapy fetch --nolog url <span class="comment"># 无日志</span></span><br><span class="line">scrapy fetch --nolog --no-redirect url <span class="comment"># 重定向</span></span><br><span class="line">scrapy view url <span class="comment"># 下载网页后浏览器打开</span></span><br><span class="line">scrapy shell <span class="comment"># 交互模式</span></span><br><span class="line">scrapy crawl user -o items.json <span class="comment"># 保存数据（sv,xml,json,jsonlines,pickle,marshal）</span></span><br></pre></td></tr></table></figure></p>
<h1>选择器</h1>
<p>网页源码</p>
<p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">'http://example.com/'</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Example website<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">'images'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'image1.html'</span>&gt;</span>Name: My image 1 <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">'image1_thumb.jpg'</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'image2.html'</span>&gt;</span>Name: My image 2 <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">'image2_thumb.jpg'</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'image3.html'</span>&gt;</span>Name: My image 3 <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">'image3_thumb.jpg'</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'image4.html'</span>&gt;</span>Name: My image 4 <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">'image4_thumb.jpg'</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'image5.html'</span>&gt;</span>Name: My image 5 <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">'image5_thumb.jpg'</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>交互模式下</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crapy shell https://doc.scrapy.org/en/latest/_static/selectors-sample1.html</span><br></pre></td></tr></table></figure></p>
<ol>
<li>构建一个选择器来选择title标签内的文本</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># xpath</span></span><br><span class="line">response.selector.xpath(<span class="string">'//title/text()'</span>)</span><br><span class="line"><span class="comment"># selector 可省略</span></span><br><span class="line">response.xpath(<span class="string">'//title/text()'</span>)</span><br><span class="line">  </span><br><span class="line"><span class="comment"># css</span></span><br><span class="line">response.css(<span class="string">'title::text'</span>)</span><br></pre></td></tr></table></figure></p>
<p>提取文本数据，必须调用selector .extract() 方法</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">response.xpath(<span class="string">'//title/text()'</span>).extract() <span class="comment"># 所有</span></span><br><span class="line">response.css(<span class="string">'title::text'</span>).extract_first() <span class="comment"># 第一个</span></span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>获取属性</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">response.xpath(<span class="string">'//a/Ahref'</span>).extract()</span><br><span class="line">response.css(<span class="string">'a::attr(href)'</span>).extract()</span><br><span class="line"></span><br><span class="line">response.css(<span class="string">'img'</span>).xpath(<span class="string">'@src'</span>).extract()</span><br><span class="line">response.xpath(<span class="string">'//div[@id="images"]/a/text()'</span>).extract_first()</span><br></pre></td></tr></table></figure></p>
<p>default 默认返回值作为参数</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.xpath(<span class="string">'//div[@id="not-exists"]/text()'</span>).extract_first(default=<span class="string">'not-found'</span>)</span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li>获取文本内容</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">response.xpath(<span class="string">'//a/text()'</span>).extract()</span><br><span class="line">response.css(<span class="string">'a::text()'</span>).estract()</span><br></pre></td></tr></table></figure></p>
<ol start="4">
<li>模糊查找(属性名包含)</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找三星包含image</span></span><br><span class="line">response.xpath(<span class="string">'//a[contains(@href,"image")]/@href'</span>).extract()</span><br><span class="line">response.css(<span class="string">'a[href* = image]::attr(href)'</span>).extract()</span><br><span class="line"></span><br><span class="line"><span class="comment"># a 标签里面的image里的src属性</span></span><br><span class="line">response.xpath(<span class="string">"//a[contains(@href,'image')]/img/@src"</span>).extract()</span><br><span class="line">response.css(<span class="string">'a[href* = image] img::attr(src)'</span>).extract()</span><br></pre></td></tr></table></figure></p>
<h2>嵌套选择器</h2>
<ol>
<li>xpath,css</li>
</ol>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">links = response.xpath(<span class="string">'//a[contains(@href, "image")]'</span>)</span><br><span class="line">links.extract()</span><br><span class="line"><span class="keyword">for</span> index, link <span class="keyword">in</span> enumerate(links):</span><br><span class="line">  args = (index, link.xpath(<span class="string">'@href'</span>).extract(), link.xpath(<span class="string">'img/@src'</span>).extract())</span><br><span class="line">  <span class="keyword">print</span> <span class="string">'Link number %d points to url %s and image %s'</span> % args</span><br></pre></td></tr></table></figure></p>
<h2>具有正则表达式的选择器</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">response.css(<span class="string">'a::text'</span>).re(<span class="string">'Name\:(.*)'</span>) <span class="comment"># 返回的是列表</span></span><br><span class="line">response.css(<span class="string">'a::text'</span>).re_first(<span class="string">'Name\:(.*)'</span>) <span class="comment"># 第一个值</span></span><br><span class="line">response.css(<span class="string">'a::text'</span>).re_first(<span class="string">'Name\:(.*)'</span>).strip() <span class="comment"># 去空格</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取图像名称</span></span><br><span class="line">response.xpath(<span class="string">'//a[contains(@href, "image")]/text()'</span>).re(<span class="string">r'Name:\s*(.*)'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取第一个匹配的字符串</span></span><br><span class="line">response.xpath(<span class="string">'//a[contains(@href, "image")]/text()'</span>).re_first(<span class="string">r'Name:\s*(.*)'</span>)</span><br></pre></td></tr></table></figure></p>
<h1>定义 Item</h1>
<p>Item 是保存爬取到的数据的容器；其使用方法和python字典类似.</p>
<ul>
<li>编辑 tutorial 目录中的 items.py 文件:</li>
</ul>
<h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DmozItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    link = scrapy.Field()</span><br><span class="line">    desc = scrapy.Field()</span><br></pre></td></tr></table></figure></h2>
<p><strong>官方文档</strong></p>
<ul>
<li><a href="https://docs.scrapy.org/en/latest/" target="_blank" rel="noopener">英文</a></li>
<li><a href="https://scrapy-chs.readthedocs.io/zh_CN/1.0/index.html" target="_blank" rel="noopener">中文</a></li>
</ul>

    

        <a href="/posts/ScrapyCommand.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebCrawler/" rel="tag">WebCrawler</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-PythonSQL"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-11-22 11:33:20" datetime="2018-11-22T03:33:20.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-11-22</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/Python/">Python</a></li></ul></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/PythonSQL.html">Python SQL</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Python SQL 操作
&lt;!--more--&gt;</p>
<h1>MonngoDB</h1>
<h2>连接</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 普通连接</span></span><br><span class="line">client = MongoClient(<span class="string">'localhost'</span>, <span class="number">27017</span>)</span><br><span class="line"><span class="comment"># client = MongoClient('mongodb://localhost:27017/')</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 密码连接</span></span><br><span class="line">client = MongoClient(<span class="string">'mongodb://username:password@localhost:27017/dbname'</span>)</span><br><span class="line">db = client.mydatabase</span><br><span class="line"><span class="comment"># db = client['mydatabase']</span></span><br></pre></td></tr></table></figure></p>
<h2>增删查改</h2>
<ul>
<li>增(insert)</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 增加一条记录</span></span><br><span class="line">person = &#123;<span class="string">'name'</span>: <span class="string">'zone'</span>,<span class="string">'sex'</span>:<span class="string">'boy'</span>&#125;</span><br><span class="line">person_id = test.insert_one(person).inserted_id</span><br><span class="line">print(person_id)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量插入</span></span><br><span class="line">persons = [&#123;<span class="string">'name'</span>: <span class="string">'zone'</span>, <span class="string">'sex'</span>: <span class="string">'boy'</span>&#125;, &#123;<span class="string">'name'</span>: <span class="string">'zone1'</span>, <span class="string">'sex'</span>: <span class="string">'boy1'</span>&#125;]</span><br><span class="line">result = test.insert_many(persons)</span><br><span class="line">print(result.inserted_ids)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>删(delete)</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line">myclient = pymongo.MongoClient(<span class="string">"mongodb://localhost:27017/"</span>)</span><br><span class="line">mydb = myclient[<span class="string">"mydatabase"</span>]</span><br><span class="line">mycol = mydb[<span class="string">"customers"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除地址为“Mountain 21”的文档：</span></span><br><span class="line">myquery = &#123; <span class="string">"address"</span>: <span class="string">"Mountain 21"</span> &#125;</span><br><span class="line">mycol.delete_one(myquery)</span><br><span class="line"></span><br><span class="line"><span class="comment"># delete_many() 删除多个</span></span><br><span class="line">myquery = &#123; <span class="string">"address"</span>: &#123;<span class="string">"$regex"</span>: <span class="string">"^S"</span>&#125; &#125;</span><br><span class="line">x = mycol.delete_many(myquery)</span><br><span class="line">print(x.deleted_count, <span class="string">" documents deleted."</span>)</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除单条记录</span></span><br><span class="line">result1 = test.delete_one(&#123;<span class="string">'name'</span>: <span class="string">'zone'</span>&#125;)</span><br><span class="line">pprint.pprint(result1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量删除</span></span><br><span class="line">result1 = test.delete_many(&#123;<span class="string">'name'</span>: <span class="string">'zone'</span>&#125;)</span><br><span class="line">pprint.pprint(result1)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>改(update)</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Valley 345”更改为“Canyon 123” </span></span><br><span class="line">myquery = &#123; <span class="string">"address"</span>: <span class="string">"Valley 345"</span> &#125;</span><br><span class="line">newvalues = &#123; <span class="string">"$set"</span>: &#123; <span class="string">"address"</span>: <span class="string">"Canyon 123"</span> &#125; &#125;</span><br><span class="line"></span><br><span class="line">mycol.update_one(myquery, newvalues)</span><br><span class="line"></span><br><span class="line"><span class="comment">#print "customers" after the update:</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> mycol.find():</span><br><span class="line">    print(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># update_many() 更新多个</span></span><br><span class="line">myquery = &#123; <span class="string">"address"</span>: &#123; <span class="string">"$regex"</span>: <span class="string">"^S"</span> &#125; &#125;</span><br><span class="line">newvalues = &#123; <span class="string">"$set"</span>: &#123; <span class="string">"name"</span>: <span class="string">"Minnie"</span> &#125; &#125;</span><br><span class="line"></span><br><span class="line">x = mycol.update_many(myquery, newvalues)</span><br><span class="line"></span><br><span class="line">print(x.modified_count, <span class="string">"documents updated."</span>)</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更新单条记录</span></span><br><span class="line">res = test.update_one(&#123;<span class="string">'name'</span>: <span class="string">'zone'</span>&#125;, &#123;<span class="string">'$set'</span>: &#123;<span class="string">'sex'</span>: <span class="string">'girl girl'</span>&#125;&#125;)</span><br><span class="line">print(res.matched_count)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新多条记录</span></span><br><span class="line">test.update_many(&#123;<span class="string">'name'</span>: <span class="string">'zone'</span>&#125;, &#123;<span class="string">'$set'</span>: &#123;<span class="string">'sex'</span>: <span class="string">'girl girl'</span>&#125;&#125;)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>查(Querry)</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line">myclient = pymongo.MongoClient(<span class="string">"mongodb://localhost:27017/"</span>)</span><br><span class="line">mydb = myclient[<span class="string">"mydatabase"</span>]</span><br><span class="line">mycol = mydb[<span class="string">"customers"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找地址以字母“S”或更高开头的文档：</span></span><br><span class="line">myquery = &#123; <span class="string">"address"</span>: &#123; <span class="string">"$gt"</span>: <span class="string">"S"</span> &#125; &#125;</span><br><span class="line"></span><br><span class="line">mydoc = mycol.find(myquery)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> mydoc:</span><br><span class="line">    print(x)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 正则表达式过滤</span></span><br><span class="line">myquery = &#123; <span class="string">"address"</span>: &#123; <span class="string">"$regex"</span>: <span class="string">"^S"</span> &#125; &#125;</span><br><span class="line"></span><br><span class="line">mydoc = mycol.find(myquery)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> mydoc:</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找多条记录</span></span><br><span class="line">pprint.pprint(test.find())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加查找条件</span></span><br><span class="line">pprint.pprint(test.find(&#123;<span class="string">"sex"</span>: <span class="string">"boy"</span>&#125;).sort(<span class="string">"name"</span>))</span><br></pre></td></tr></table></figure></p>
<h1>排序</h1>
<ul>
<li>sort()方法</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">results = collection.find().sort(<span class="string">'name'</span>, pymongo.ASCENDING)</span><br><span class="line">print([result[<span class="string">'name'</span>] <span class="keyword">for</span> result <span class="keyword">in</span> results])</span><br></pre></td></tr></table></figure></p>
<h2>示例</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">client = pymongo.MongoClient(<span class="string">'localhost'</span>)</span><br><span class="line">b = client[<span class="string">'MaFengWoView'</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_to_mongo</span><span class="params">(view)</span>:</span></span><br><span class="line"><span class="keyword">if</span> db[<span class="string">'MaFengWoView'</span>].insert_one(view):</span><br><span class="line">    print(<span class="string">'Saving to MongoDB'</span>,view)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"> save_to_mongo(view)</span><br></pre></td></tr></table></figure></p>
<h1>MySQL</h1>
<h2>连接创建</h2>
<ul>
<li>创建一个名为“customers”的表</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"></span><br><span class="line">mydb = mysql.connector.connect(</span><br><span class="line">host=<span class="string">"localhost"</span>,</span><br><span class="line">user=<span class="string">"yourusername"</span>,</span><br><span class="line">passwd=<span class="string">"yourpassword"</span>,</span><br><span class="line">database=<span class="string">"mydatabase"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mycursor = mydb.cursor()</span><br><span class="line"></span><br><span class="line">mycursor.execute(<span class="string">"CREATE TABLE customers (name VARCHAR(255), address VARCHAR(255))"</span>)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>检查表是否存在</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mycursor = mydb.cursor()</span><br><span class="line"></span><br><span class="line">mycursor.execute(<span class="string">"SHOW TABLES"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> mycursor:</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>创建表时创建主键(存在用ALTER TABLE)</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"></span><br><span class="line">mydb = mysql.connector.connect(</span><br><span class="line">host=<span class="string">"localhost"</span>,</span><br><span class="line">user=<span class="string">"yourusername"</span>,</span><br><span class="line">passwd=<span class="string">"yourpassword"</span>,</span><br><span class="line">database=<span class="string">"mydatabase"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mycursor = mydb.cursor()</span><br><span class="line"></span><br><span class="line">mycursor.execute(<span class="string">"CREATE TABLE customers (id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255), address VARCHAR(255))"</span>)</span><br></pre></td></tr></table></figure></p>
<h1>插入</h1>
<ul>
<li>单行</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mycursor = mydb.cursor()</span><br><span class="line"></span><br><span class="line">sql = <span class="string">"INSERT INTO customers (name, address) VALUES (%s, %s)"</span></span><br><span class="line">val = (<span class="string">"John"</span>, <span class="string">"Highway 21"</span>)</span><br><span class="line">mycursor.execute(sql, val)</span><br><span class="line"></span><br><span class="line">mydb.commit()</span><br><span class="line"></span><br><span class="line">print(mycursor.rowcount, <span class="string">"record inserted."</span>)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>多行</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mycursor = mydb.cursor()</span><br><span class="line"></span><br><span class="line">sql = <span class="string">"INSERT INTO customers (name, address) VALUES (%s, %s)"</span></span><br><span class="line">val = [</span><br><span class="line">    (<span class="string">'Peter'</span>, <span class="string">'Lowstreet 4'</span>),</span><br><span class="line">    (<span class="string">'Amy'</span>, <span class="string">'Apple st 652'</span>),</span><br><span class="line">    (<span class="string">'Hannah'</span>, <span class="string">'Mountain 21'</span>),</span><br><span class="line">    (<span class="string">'Michael'</span>, <span class="string">'Valley 345'</span>),</span><br><span class="line">    (<span class="string">'Sandy'</span>, <span class="string">'Ocean blvd 2'</span>),</span><br><span class="line">    (<span class="string">'Betty'</span>, <span class="string">'Green Grass 1'</span>),</span><br><span class="line">    (<span class="string">'Richard'</span>, <span class="string">'Sky st 331'</span>),</span><br><span class="line">    (<span class="string">'Susan'</span>, <span class="string">'One way 98'</span>),</span><br><span class="line">    (<span class="string">'Vicky'</span>, <span class="string">'Yellow Garden 2'</span>),</span><br><span class="line">    (<span class="string">'Ben'</span>, <span class="string">'Park Lane 38'</span>),</span><br><span class="line">    (<span class="string">'William'</span>, <span class="string">'Central st 954'</span>),</span><br><span class="line">    (<span class="string">'Chuck'</span>, <span class="string">'Main Road 989'</span>),</span><br><span class="line">    (<span class="string">'Viola'</span>, <span class="string">'Sideway 1633'</span>)</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">mycursor.executemany(sql, val)</span><br><span class="line"></span><br><span class="line">mydb.commit()</span><br><span class="line"></span><br><span class="line">print(mycursor.rowcount, <span class="string">"was inserted."</span>)</span><br></pre></td></tr></table></figure></p>
<h2>Select</h2>
<ul>
<li>所有</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mycursor = mydb.cursor()</span><br><span class="line"></span><br><span class="line">mycursor.execute(<span class="string">"SELECT * FROM customers"</span>)</span><br><span class="line"></span><br><span class="line">myresult = mycursor.fetchall()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> myresult:</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>列</li>
</ul>
<h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mycursor = mydb.cursor()</span><br><span class="line"></span><br><span class="line">mycursor.execute(<span class="string">"SELECT name, address FROM customers"</span>)</span><br><span class="line"></span><br><span class="line">myresult = mycursor.fetchall()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> myresult:</span><br><span class="line">     print(x)</span><br></pre></td></tr></table></figure></h2>
<p><strong>参考</strong></p>
<ul>
<li><a href="https://api.mongodb.com/python/current/tutorial.html" target="_blank" rel="noopener">官方文档</a></li>
<li><a href="https://www.w3schools.com/python/python_mongodb_drop_collection.asp" target="_blank" rel="noopener">W3School</a></li>
<li><a href="https://juejin.im/post/5be245b251882516bc477aae" target="_blank" rel="noopener">zone</a></li>
</ul>

    

        <a href="/posts/PythonSQL.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebCrawler/" rel="tag">WebCrawler</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Qunar"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-11-20 23:01:37" datetime="2018-11-20T15:01:37.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-11-20</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/Python/">Python</a></li></ul></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Qunar.html">Qunar</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Selenium Qunar.com
&lt;!---more--&gt;</p>
<h1>修改版</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> WebDriverException,TimeoutException</span><br><span class="line"><span class="keyword">from</span> pyquery.pyquery <span class="keyword">import</span> PyQuery <span class="keyword">as</span> pq</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line">wait = WebDriverWait(driver,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">client = pymongo.MongoClient(<span class="string">'localhost'</span>)</span><br><span class="line">db = client[<span class="string">'Qunar'</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lastPage</span><span class="params">(url)</span>:</span></span><br><span class="line">    driver.get(url)</span><br><span class="line">    wait.until(EC.presence_of_element_located((By.CSS_SELECTOR,<span class="string">'.next'</span>)))</span><br><span class="line">    html = driver.page_source</span><br><span class="line">    soup = BeautifulSoup(html,<span class="string">'lxml'</span>)</span><br><span class="line">    total = int(soup.select(<span class="string">'.pager a'</span>)[<span class="number">-2</span>].text)</span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search_next</span><span class="params">(page)</span>:</span></span><br><span class="line">    next = driver.find_element_by_css_selector(<span class="string">'.next'</span>)</span><br><span class="line">    wait.until(EC.presence_of_element_located((By.CSS_SELECTOR,<span class="string">'.next'</span>)))</span><br><span class="line">    next.click()</span><br><span class="line">    wait.until(EC.text_to_be_present_in_element((By.CSS_SELECTOR,<span class="string">'.pager em'</span>),str(page)))</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_url</span><span class="params">()</span>:</span></span><br><span class="line">    doc = pq(driver.page_source)</span><br><span class="line">    doc = doc.find(<span class="string">'.sight_item_caption'</span>)</span><br><span class="line">    li = []</span><br><span class="line">    <span class="keyword">for</span> box <span class="keyword">in</span> doc.items():</span><br><span class="line">        url = <span class="string">'http://piao.qunar.com'</span>+str(box.find(<span class="string">'.name'</span>).attr(<span class="string">'href'</span>))</span><br><span class="line">        li.append(url)</span><br><span class="line">    <span class="keyword">return</span> li</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_comment_last</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="comment"># 评论总页数</span></span><br><span class="line">    driver.get(url)</span><br><span class="line">    wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, <span class="string">'.mp-pager-next.mp-pager-item'</span>)))</span><br><span class="line">    doc = pq(driver.page_source)</span><br><span class="line">    doc = doc.find(<span class="string">'#pageContainer'</span>)</span><br><span class="line">    li = [i.text() <span class="keyword">for</span> i <span class="keyword">in</span> doc.find(<span class="string">'.mp-pager-item'</span>).items()]</span><br><span class="line">    <span class="keyword">return</span> int(li[<span class="number">-2</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_comment_next</span><span class="params">(page)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        next = driver.find_element_by_css_selector(<span class="string">'.mp-pager-next.mp-pager-item'</span>)</span><br><span class="line">        wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, <span class="string">'.mp-pager-next.mp-pager-item'</span>)))</span><br><span class="line">        next.click()</span><br><span class="line">        wait.until(EC.text_to_be_present_in_element((By.CSS_SELECTOR,<span class="string">'.mp-pager em'</span>),str(page)))</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        get_comment_next(page)</span><br><span class="line">    <span class="keyword">except</span> WebDriverException:</span><br><span class="line">        get_comment_next(page)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_comments</span><span class="params">()</span>:</span></span><br><span class="line">    doc = pq(driver.page_source)</span><br><span class="line">    doc = doc.find(<span class="string">'.mp-comments-list'</span>)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> doc.find(<span class="string">'.mp-comments-item'</span>).items():</span><br><span class="line">        usr = item.find(<span class="string">'.mp-comments-username'</span>).text()</span><br><span class="line">        date = item.find(<span class="string">'.mp-comments-time'</span>).text()</span><br><span class="line">        comment = item.find(<span class="string">'.mp-comments-desc'</span>).text()</span><br><span class="line">        view = &#123;</span><br><span class="line">            <span class="string">'user'</span>:usr,</span><br><span class="line">            <span class="string">'date'</span>:date,</span><br><span class="line">            <span class="string">'comment'</span>:comment</span><br><span class="line">        &#125;</span><br><span class="line">        save_to_mongo(view)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_to_mongo</span><span class="params">(view)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> db[<span class="string">'comment'</span>].insert_one(view):</span><br><span class="line">        print(<span class="string">'Saving to MongoDB'</span>,view)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    url = <span class="string">'http://piao.qunar.com/ticket/list_%E6%88%90%E9%83%BD.html#from=home_remen&amp;in_track=qunar_djmp_gnmdd_%E6%88%90%E9%83%BD'</span></span><br><span class="line">    total = lastPage(url)</span><br><span class="line">    all_url = get_url()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>,total+<span class="number">1</span>):</span><br><span class="line">        search_next(i)</span><br><span class="line">        all_url.extend(get_url())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> all_url:</span><br><span class="line">        total = get_comment_last(url)</span><br><span class="line">        get_comments()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>,total+<span class="number">1</span>):</span><br><span class="line">            get_comment_next(i)</span><br><span class="line">            get_comments()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p>
<h1>自动获取页数</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time    : 18-11-20 上午11:53</span></span><br><span class="line"><span class="comment"># @Author  : Vitan</span></span><br><span class="line"><span class="comment"># @File    : Qunar.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> WebDriverException,NoSuchElementException,TimeoutException</span><br><span class="line"><span class="keyword">from</span> pyquery.pyquery <span class="keyword">import</span> PyQuery <span class="keyword">as</span> pq</span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line">wait = WebDriverWait(driver,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">client = pymongo.MongoClient(<span class="string">'localhost'</span>)</span><br><span class="line">db = client[<span class="string">'Qunar'</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lastPage</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        url = <span class="string">'http://piao.qunar.com/ticket/list_%E6%88%90%E9%83%BD.html?keyword=%E6%88%90%E9%83%BD&amp;page=1#from=home_remen&amp;in_track=qunar_djmp_gnmdd_%E6%88%90%E9%83%BD'</span></span><br><span class="line">        driver.get(url)</span><br><span class="line">        doc = pq(driver.page_source)</span><br><span class="line">        doc = str(doc.find(<span class="string">'.pager'</span>))</span><br><span class="line">        pattern = re.compile(<span class="string">'&lt;div.*?&lt;a.*?data-pager-pageno="63"&gt;(\d+)&lt;/a&gt;'</span>, re.S)</span><br><span class="line">        result = re.match(pattern, doc)</span><br><span class="line">        total = int(result.group(<span class="number">1</span>))</span><br><span class="line">        print(total)</span><br><span class="line">        <span class="keyword">return</span> total</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        <span class="keyword">return</span> total</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_url</span><span class="params">()</span>:</span></span><br><span class="line">    doc = pq(driver.page_source)</span><br><span class="line">    doc = doc.find(<span class="string">'.sight_item_caption'</span>)</span><br><span class="line">    li = []</span><br><span class="line">    <span class="keyword">for</span> box <span class="keyword">in</span> doc.items():</span><br><span class="line">        url = <span class="string">'http://piao.qunar.com'</span>+str(box.find(<span class="string">'.name'</span>).attr(<span class="string">'href'</span>))</span><br><span class="line">        li.append(url)</span><br><span class="line">    <span class="keyword">return</span> li</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_comment_last</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 评论总页数</span></span><br><span class="line">    doc = pq(driver.page_source)</span><br><span class="line">    doc = doc.find(<span class="string">'#pageContainer'</span>)</span><br><span class="line">    li = [i.text() <span class="keyword">for</span> i <span class="keyword">in</span> doc.find(<span class="string">'.mp-pager-item'</span>).items()]</span><br><span class="line">    <span class="keyword">return</span> int(li[<span class="number">-2</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_comment_next</span><span class="params">(i)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        next = driver.find_element_by_css_selector(<span class="string">'.mp-pager-next.mp-pager-item'</span>)</span><br><span class="line">        next.click()</span><br><span class="line">        wait.until(EC.text_to_be_present_in_element((By.CSS_SELECTOR,<span class="string">'.pager em'</span>),str(i)))</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        get_comment_next(i)</span><br><span class="line">    <span class="keyword">except</span> WebDriverException:</span><br><span class="line">        get_comment_next(i)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_page_comments</span><span class="params">()</span>:</span></span><br><span class="line">    doc = pq(driver.page_source)</span><br><span class="line">    doc = doc.find(<span class="string">'.mp-comments-list'</span>)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> doc.find(<span class="string">'.mp-comments-item'</span>).items():</span><br><span class="line">        usr = item.find(<span class="string">'.mp-comments-username'</span>).text()</span><br><span class="line">        date = item.find(<span class="string">'.mp-comments-time'</span>).text()</span><br><span class="line">        comment = item.find(<span class="string">'.mp-comments-desc'</span>).text()</span><br><span class="line">        view = &#123;</span><br><span class="line">            <span class="string">'user'</span>:usr,</span><br><span class="line">            <span class="string">'date'</span>:date,</span><br><span class="line">            <span class="string">'comment'</span>:comment</span><br><span class="line">        &#125;</span><br><span class="line">        print(view)</span><br><span class="line">        save_to_mongo(view)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_all_url</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 所有景点 Url</span></span><br><span class="line">    driver.execute_script(<span class="string">'window.open()'</span>)  <span class="comment"># 打开新的选项卡</span></span><br><span class="line">    driver.switch_to.window(driver.window_handles[<span class="number">1</span>])</span><br><span class="line">    total = lastPage()</span><br><span class="line">    driver.switch_to.window(driver.window_handles[<span class="number">0</span>])</span><br><span class="line">    all_url = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, total - <span class="number">60</span>):</span><br><span class="line">        url = <span class="string">'http://piao.qunar.com/ticket/list_%E6%88%90%E9%83%BD.html?keyword=%E6%88%90%E9%83%BD&amp;page='</span> + str(</span><br><span class="line">            i) + <span class="string">'#from=home_remen&amp;in_track=qunar_djmp_gnmdd_%E6%88%90%E9%83%BD'</span></span><br><span class="line">        driver.get(url)</span><br><span class="line">        wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, <span class="string">'.next'</span>)))</span><br><span class="line">        all_url.extend(get_url())</span><br><span class="line">        print(all_url)</span><br><span class="line">    <span class="keyword">return</span> all_url</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_allcomment_url</span><span class="params">()</span>:</span></span><br><span class="line">    all_url = get_all_url()</span><br><span class="line">    <span class="comment"># 景点所有评论</span></span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> all_url:</span><br><span class="line">        driver.get(url)</span><br><span class="line">        wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, <span class="string">'.mp-pager-next.mp-pager-item'</span>)))</span><br><span class="line">        total = get_comment_last()  <span class="comment"># 评论页数</span></span><br><span class="line">        get_page_comments()</span><br><span class="line">        print(total)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, total + <span class="number">1</span>):</span><br><span class="line">            get_comment_next(i)</span><br><span class="line">            get_page_comments()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_to_mongo</span><span class="params">(view)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> db[<span class="string">'comment'</span>].insert_one(view):</span><br><span class="line">        print(<span class="string">'Saving to MongoDB'</span>,view)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    get_allcomment_url()</span><br><span class="line">    get_page_comments()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p>
<h1>手动设置页数</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time    : 18-11-20 上午11:53</span></span><br><span class="line"><span class="comment"># @Author  : Vitan</span></span><br><span class="line"><span class="comment"># @File    : Qunar.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> WebDriverException,NoSuchElementException,TimeoutException</span><br><span class="line"><span class="keyword">from</span> pyquery.pyquery <span class="keyword">import</span> PyQuery <span class="keyword">as</span> pq</span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line">wait = WebDriverWait(driver,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">client = pymongo.MongoClient(<span class="string">'localhost'</span>)</span><br><span class="line">db = client[<span class="string">'Qunar'</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_url</span><span class="params">()</span>:</span></span><br><span class="line">    doc = pq(driver.page_source)</span><br><span class="line">    doc = doc.find(<span class="string">'.sight_item_caption'</span>)</span><br><span class="line">    li = []</span><br><span class="line">    <span class="keyword">for</span> box <span class="keyword">in</span> doc.items():</span><br><span class="line">        url = <span class="string">'http://piao.qunar.com'</span>+str(box.find(<span class="string">'.name'</span>).attr(<span class="string">'href'</span>))</span><br><span class="line">        li.append(url)</span><br><span class="line">    <span class="keyword">return</span> li</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_comment_last</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 评论总页数</span></span><br><span class="line">    doc = pq(driver.page_source)</span><br><span class="line">    doc = doc.find(<span class="string">'#pageContainer'</span>)</span><br><span class="line">    li = [i.text() <span class="keyword">for</span> i <span class="keyword">in</span> doc.find(<span class="string">'.mp-pager-item'</span>).items()]</span><br><span class="line">    <span class="keyword">return</span> int(li[<span class="number">-2</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_comment_next</span><span class="params">(i)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        next = driver.find_element_by_css_selector(<span class="string">'.mp-pager-next.mp-pager-item'</span>)</span><br><span class="line">        next.click()</span><br><span class="line">        wait.until(EC.text_to_be_present_in_element((By.CSS_SELECTOR,<span class="string">'.pager em'</span>),str(i)))</span><br><span class="line">    <span class="keyword">except</span> TimeoutException:</span><br><span class="line">        get_comment_next(i)</span><br><span class="line">    <span class="keyword">except</span> WebDriverException:</span><br><span class="line">        get_comment_next(i)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_page_comments</span><span class="params">()</span>:</span></span><br><span class="line">    doc = pq(driver.page_source)</span><br><span class="line">    doc = doc.find(<span class="string">'.mp-comments-list'</span>)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> doc.find(<span class="string">'.mp-comments-item'</span>).items():</span><br><span class="line">        usr = item.find(<span class="string">'.mp-comments-username'</span>).text()</span><br><span class="line">        date = item.find(<span class="string">'.mp-comments-time'</span>).text()</span><br><span class="line">        comment = item.find(<span class="string">'.mp-comments-desc'</span>).text()</span><br><span class="line">        view = &#123;</span><br><span class="line">            <span class="string">'user'</span>:usr,</span><br><span class="line">            <span class="string">'date'</span>:date,</span><br><span class="line">            <span class="string">'comment'</span>:comment</span><br><span class="line">        &#125;</span><br><span class="line">        print(view)</span><br><span class="line">        save_to_mongo(view)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_to_mongo</span><span class="params">(view)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> db[<span class="string">'comment'</span>].insert_one(view):</span><br><span class="line">        print(<span class="string">'Saving to MongoDB'</span>,view)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 所有景点 Url</span></span><br><span class="line">    all_url = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">2</span>):</span><br><span class="line">        url = <span class="string">'http://piao.qunar.com/ticket/list_%E6%88%90%E9%83%BD.html?keyword=%E6%88%90%E9%83%BD&amp;page='</span>+ str(i) +<span class="string">'#from=home_remen&amp;in_track=qunar_djmp_gnmdd_%E6%88%90%E9%83%BD'</span></span><br><span class="line">        driver.get(url)</span><br><span class="line">        wait.until(EC.presence_of_element_located((By.CSS_SELECTOR,<span class="string">'.next'</span>)))</span><br><span class="line">        all_url.extend(get_url())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 景点所有评论Url</span></span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> all_url:</span><br><span class="line">        driver.get(url)</span><br><span class="line">        wait.until(EC.presence_of_element_located((By.CSS_SELECTOR,<span class="string">'.mp-pager-next.mp-pager-item'</span>)))</span><br><span class="line">        total = get_comment_last() <span class="comment"># 评论页数</span></span><br><span class="line">        print(total)</span><br><span class="line">        get_page_comments()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>,total+<span class="number">1</span>):</span><br><span class="line">            get_comment_next(i)</span><br><span class="line">            get_page_comments()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p>

    

        <a href="/posts/Qunar.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebCrawler/" rel="tag">WebCrawler</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-PythonExcel"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-11-19 15:08:39" datetime="2018-11-19T07:08:39.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-11-19</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/Python/">Python</a></li></ul></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/PythonExcel.html">读写 Excel 文件</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>读写 Excel
&lt;!--more--&gt;</p>
<h1>读 Excel</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xlrd</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_file</span><span class="params">(<span class="string">'file.xlsx'</span>)</span>:</span></span><br><span class="line">data = xlrd.open_workbook(url)</span><br><span class="line">table = data.sheets()[<span class="number">0</span>] <span class="comment"># 打开第一张表</span></span><br><span class="line">nrows = table.nrows <span class="comment"># 获取表的行数</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(nrows): <span class="comment"># 循环逐行打印</span></span><br><span class="line">   print(table.row_values(i)[<span class="number">1</span>:])</span><br></pre></td></tr></table></figure></p>
<h1>写 Excel</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xlwt</span><br><span class="line">data = xlrd.open_workbook(<span class="string">'excelFile.xls'</span>)</span><br><span class="line">excel = copy(data)                                       </span><br><span class="line"></span><br><span class="line"><span class="comment">#使用wlrd的方法获取已有的的行数</span></span><br><span class="line">rows = data.sheet()[num].nrows                  </span><br><span class="line"><span class="comment">#获得要操作的sheet</span></span><br><span class="line">table = excel.get_sheet(num)                      </span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> n:</span><br><span class="line">  <span class="comment">#xlwt的写方法，参数为行，列，值，行</span></span><br><span class="line">  table.write(rows,num1,value)  </span><br><span class="line">  num1 = num1+<span class="number">1</span> </span><br><span class="line"></span><br><span class="line">excel.save(name)</span><br></pre></td></tr></table></figure></p>

    

        <a href="/posts/PythonExcel.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebCrawler/" rel="tag">WebCrawler</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-PythonPandas"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-11-19 14:06:20" datetime="2018-11-19T06:06:20.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-11-19</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/Python/">Python</a></li></ul></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/PythonPandas.html">Pandas</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Python  Data.Frame
&lt;!--more--&gt;</p>
<h1>panadas</h1>
<h2>导入数据</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pandas.read_excel(<span class="string">'file.xlsx'</span>)</span><br><span class="line">data = pandas.read_csv(<span class="string">'file.csv'</span>)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>查看前10行</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(data.head[<span class="number">10</span>])</span><br></pre></td></tr></table></figure></p>
<ul>
<li>数据集中有多少个列(columns)</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(data.shape[<span class="number">1</span>])</span><br></pre></td></tr></table></figure></p>
<ul>
<li>打印出全部的列名称</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(data.columns)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>数据集的索引</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(data.index)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>panadas.DataFrame 构造函数</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pandas.DataFrame( data, index, columns, dtype, copy)</span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">data</td>
<td style="text-align:left">数据采取各种形式，如ndarray：series，map，lists，dict， ，constant和另一个DataFrame</td>
</tr>
<tr>
<td style="text-align:left">index</td>
<td style="text-align:left">对于行标签，要用于结果帧的索引是可选缺省值np.arrange(n)，如果没有传递索引值</td>
</tr>
<tr>
<td style="text-align:left">columns</td>
<td style="text-align:left">对于列标签，可选的默认语法是 - np.arange(n)。这只有在没有索引传递的情况下才是这样</td>
</tr>
<tr>
<td style="text-align:left">dtype</td>
<td style="text-align:left">每列的数据类型</td>
</tr>
<tr>
<td style="text-align:left">copy</td>
<td style="text-align:left">如果默认值为False，则此命令（或任何它）用于复制数据</td>
</tr>
</tbody>
</table>
<h1>创建数据帧</h1>
<h2>列表创建数据框</h2>
<ul>
<li>空数据帧</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 空数据帧 </span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df = pd.DataFrame()</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>有数据</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">df = pd.DataFrame(data)</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>有表头</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = [[<span class="string">'Alex'</span>,<span class="number">10</span>],[<span class="string">'Bob'</span>,<span class="number">12</span>],[<span class="string">'Clarke'</span>,<span class="number">13</span>]]</span><br><span class="line">df = pd.DataFrame(data,columns=[<span class="string">'Name'</span>,<span class="string">'Age'</span>])</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>df = pd.DataFrame(data,columns=['Name','Age'],dtype=float)(设置数据类型)</li>
</ul>
<h2>从ndarrays /列表的字典来创建数据帧</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = &#123;<span class="string">'Name'</span>:[<span class="string">'Tom'</span>, <span class="string">'Jack'</span>, <span class="string">'Steve'</span>, <span class="string">'Ricky'</span>],<span class="string">'Age'</span>:[<span class="number">28</span>,<span class="number">34</span>,<span class="number">29</span>,<span class="number">42</span>]&#125;</span><br><span class="line">df = pd.DataFrame(data)</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>所有的ndarrays必须具有相同的长度。如果传递了索引（index），则索引的长度应等于数组的长度。如果没有传递索引，则默认情况下，索引将为range(n)，其中n为数组长度。</li>
</ul>
<h2>数组创建一个索引的数据帧（DataFrame）</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = &#123;<span class="string">'Name'</span>:[<span class="string">'Tom'</span>, <span class="string">'Jack'</span>, <span class="string">'Steve'</span>, <span class="string">'Ricky'</span>],<span class="string">'Age'</span>:[<span class="number">28</span>,<span class="number">34</span>,<span class="number">29</span>,<span class="number">42</span>]&#125;</span><br><span class="line">df = pd.DataFrame(data, index=[<span class="string">'rank1'</span>,<span class="string">'rank2'</span>,<span class="string">'rank3'</span>,<span class="string">'rank4'</span>])</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure></p>
<h2>字典列表来创建数据帧</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = [&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;,&#123;<span class="string">'a'</span>: <span class="number">5</span>, <span class="string">'b'</span>: <span class="number">10</span>, <span class="string">'c'</span>: <span class="number">20</span>&#125;]</span><br><span class="line">df = pd.DataFrame(data)</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>字典，行索引和列索引列表创建数据帧</li>
</ul>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = [&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;,&#123;<span class="string">'a'</span>: <span class="number">5</span>, <span class="string">'b'</span>: <span class="number">10</span>, <span class="string">'c'</span>: <span class="number">20</span>&#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment">#With two column indices, values same as dictionary keys</span></span><br><span class="line">df1 = pd.DataFrame(data, index=[<span class="string">'first'</span>, <span class="string">'second'</span>], columns=[<span class="string">'a'</span>, <span class="string">'b'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#With two column indices with one index with other name</span></span><br><span class="line">df2 = pd.DataFrame(data, index=[<span class="string">'first'</span>, <span class="string">'second'</span>], columns=[<span class="string">'a'</span>, <span class="string">'b1'</span>])</span><br></pre></td></tr></table></figure></p>
<h1>从系列的字典来创建</h1>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">'one'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]),</span><br><span class="line">        <span class="string">'two'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])&#125;</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(d)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>字典的系列可以传递以形成一个DataFrame。 所得到的索引是通过的所有系列索引的并集。</li>
</ul>
<h1>列操作</h1>
<h2>列选择</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">'one'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]),</span><br><span class="line">        <span class="string">'two'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])&#125;</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(d)</span><br><span class="line">print(df [<span class="string">'one'</span>])</span><br></pre></td></tr></table></figure></p>
<h2>列添加</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">'one'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]),</span><br><span class="line">        <span class="string">'two'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])&#125;</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(d)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Adding a new column to an existing DataFrame object with column label by passing new series</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Adding a new column by passing as Series:"</span>)</span><br><span class="line">df[<span class="string">'three'</span>]=pd.Series([<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>],index=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>])</span><br><span class="line">print(df)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Adding a new column using the existing columns in DataFrame:"</span>)</span><br><span class="line">df[<span class="string">'four'</span>]=df[<span class="string">'one'</span>]+df[<span class="string">'three'</span>]</span><br><span class="line"></span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure></p>
<h2>列删除</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Using the previous DataFrame, we will delete a column</span></span><br><span class="line"><span class="comment"># using del function</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">'one'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]), </span><br><span class="line">  <span class="string">'two'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]), </span><br><span class="line">  <span class="string">'three'</span> : pd.Series([<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>], index=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>])&#125;</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(d)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Our dataframe is:"</span>)</span><br><span class="line">print(df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># using del function</span></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Deleting the first column using DEL function:"</span>)</span><br><span class="line"><span class="keyword">del</span> df[<span class="string">'one'</span>]</span><br><span class="line">print(df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># using pop function</span></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Deleting another column using POP function:"</span>)</span><br><span class="line">df.pop(<span class="string">'two'</span>)</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure></p>
<h1>行操作</h1>
<h2>行选择</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">'one'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]), </span><br><span class="line">    <span class="string">'two'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])&#125;</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(d)</span><br><span class="line">print(df.loc[<span class="string">'b'</span>])</span><br></pre></td></tr></table></figure></p>
<h2>按整数位置选择</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">'one'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]),</span><br><span class="line">    <span class="string">'two'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])&#125;</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(d)</span><br><span class="line">print(df.iloc[<span class="number">2</span>])</span><br></pre></td></tr></table></figure></p>
<h2>行切片</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mport pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">'one'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]), </span><br><span class="line">    <span class="string">'two'</span> : pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>])&#125;</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(d)</span><br><span class="line">print(df[<span class="number">2</span>:<span class="number">4</span>])</span><br></pre></td></tr></table></figure></p>
<h2>附加行</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]], columns = [<span class="string">'a'</span>,<span class="string">'b'</span>])</span><br><span class="line">df2 = pd.DataFrame([[<span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>]], columns = [<span class="string">'a'</span>,<span class="string">'b'</span>])</span><br><span class="line"></span><br><span class="line">df = df.append(df2)</span><br></pre></td></tr></table></figure></p>
<h2>删除行</h2>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]], columns = [<span class="string">'a'</span>,<span class="string">'b'</span>])</span><br><span class="line">df2 = pd.DataFrame([[<span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>]], columns = [<span class="string">'a'</span>,<span class="string">'b'</span>])</span><br><span class="line"></span><br><span class="line">df = df.append(df2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Drop rows with label 0</span></span><br><span class="line">df = df.drop(<span class="number">0</span>)</span><br></pre></td></tr></table></figure></p>
<hr>
<p><strong>Via</strong></p>
<ul>
<li><a href="https://www.yiibai.com/pandas/python_pandas_dataframe.html" target="_blank" rel="noopener">Pandas数据帧（DataFrame）</a></li>
</ul>

    

        <a href="/posts/PythonPandas.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebCrawler/" rel="tag">WebCrawler</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-CSSselector"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-11-18 08:52:54" datetime="2018-11-18T00:52:54.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-11-18</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/CSSselector.html">CSS 选择器</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Css 选择器与权重
&lt;!--more--&gt;</p>
<h1>引入 CSS</h1>
<h2>行间引入</h2>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style = "width:100px;height:100px;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<h2>页面级引入(内嵌式)</h2>
<ul>
<li><code>&lt;head&gt;</code> 和 <code>&lt;/head&gt;</code> 之间
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type="css/text"&gt;</span><br><span class="line"><span class="selector-class">.text</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: o;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125; </span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2>导入式</h2>
<ol>
<li>在style元素中导入CSS文件</li>
</ol>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type="text/css"&gt;    </span><br><span class="line">@<span class="keyword">import</span> <span class="string">"CSS样式文件的绝对地址"</span>;</span><br><span class="line">@<span class="keyword">import</span> url(<span class="string">"样式文件的绝对地址"</span>);</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>在CSS文件中再导入CSS文件</li>
</ol>
<p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*某个CSS文件*/</span></span><br><span class="line">@<span class="keyword">import</span> <span class="string">"另一个CSS文件的地址"</span>;</span><br><span class="line"><span class="selector-class">.test</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">   <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">   <span class="attribute">background-color</span>: red; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2>链接式</h2>
<ul>
<li>网页的 <code>&lt;head&gt;&lt;/head&gt;</code> 标签对中使用<code>&lt;link&gt;</code> 标记来引入外部样式表文件</li>
</ul>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link type="text/css" rel="stylesheet" href="CSS样式文件的地址"&gt;</span><br></pre></td></tr></table></figure></p>
<h1>选择器</h1>
<h2>基础选择器</h2>
<table>
<thead>
<tr>
<th style="text-align:left">选择器</th>
<th style="text-align:left">含义</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">通用选择器，匹配任何元素</td>
<td style="text-align:left">*{font-size:16px;}</td>
</tr>
<tr>
<td style="text-align:left">E</td>
<td style="text-align:left">标签选择器，匹配所有使用E标签的元素</td>
<td style="text-align:left">p{font-family:arial;}</td>
</tr>
<tr>
<td style="text-align:left">.error</td>
<td style="text-align:left">class选择器，匹配所有class属性中包含error的元素</td>
<td style="text-align:left">.error{font-weight:bold;}</td>
</tr>
<tr>
<td style="text-align:left">#correct</td>
<td style="text-align:left">id选择器，匹配所有id属性值为correct的元素</td>
<td style="text-align:left">#correct{font-style:italic;}</td>
</tr>
</tbody>
</table>
<ul>
<li>id(唯一)</li>
</ul>
<p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"only&gt;</span></span></span><br><span class="line"><span class="tag"><span class="string">123</span></span></span><br><span class="line"><span class="tag"><span class="string">&lt;/div&gt;</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#only</span>&#123;</span><br><span class="line">   <span class="attribute">background-color</span>: red;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>class</li>
</ul>
<p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"only&gt;</span></span></span><br><span class="line"><span class="tag"><span class="string">123</span></span></span><br><span class="line"><span class="tag"><span class="string">&lt;/div&gt;</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.only</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>可以有多个 class</li>
</ul>
<h2>标准选择器</h2>
<ul>
<li>会选择所有相同元素</li>
</ul>
<p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>123</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>123</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">span</span>&#123;</span><br><span class="line">   <span class="attribute">background-color</span>: green;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>通配符选择器</p>
<ul>
<li>会匹配所有的元素</li>
</ul>
<p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">0px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2>组合选择器</h2>
<table>
<thead>
<tr>
<th style="text-align:left">选择器</th>
<th style="text-align:left">含义</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">E,F</td>
<td style="text-align:left">多元素选择器，同时匹配所有E元素或F元素</td>
<td style="text-align:left">div,p{background-attachment:fixed;}</td>
</tr>
<tr>
<td style="text-align:left">E F</td>
<td style="text-align:left">后代元素选择器，匹配所有属于E元素的后代F元素</td>
<td style="text-align:left">div a{background-color:blue;}</td>
</tr>
<tr>
<td style="text-align:left">E &gt; F</td>
<td style="text-align:left">子元素选择器，匹配所有E元素的子元素F</td>
<td style="text-align:left">div&gt;p{background-image:url(xxx.gif)}</td>
</tr>
<tr>
<td style="text-align:left">E+F</td>
<td style="text-align:left">毗邻元素选择器，匹配所有紧随E元素之后的同级元素F</td>
<td style="text-align:left">p+div{background-position:x% y%}</td>
</tr>
</tbody>
</table>
<ul>
<li>父子选择器/派生选择器</li>
</ul>
<p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">span</span>&#123;</span><br><span class="line">   <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>直接子元素选择器</li>
</ul>
<p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">em</span>&gt;</span>134<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">em</span>&gt;</span>323<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &gt; <span class="selector-tag">em</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>并列选择器</li>
</ul>
<p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> =<span class="string">"demo"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span> = <span class="string">"demo1"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-class">.demo</span>&#123;</span><br><span class="line">   <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>分组选择器</li>
</ul>
<p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span>1<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>2<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">spam</span>&gt;</span>3<span class="tag">&lt;/<span class="name">spam</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">em</span>,</span><br><span class="line"><span class="selector-tag">strong</span>,</span><br><span class="line"><span class="selector-tag">span</span>&#123;</span><br><span class="line">   <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2>伪类选择器</h2>
<table>
<thead>
<tr>
<th style="text-align:left">选择器</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">E:first-child</td>
<td style="text-align:left">匹配父元素E下的第一个子元素</td>
</tr>
<tr>
<td style="text-align:left">E:link</td>
<td style="text-align:left">匹配所有未被点击的链接</td>
</tr>
<tr>
<td style="text-align:left">E:visited</td>
<td style="text-align:left">匹配所有已被点击的链接</td>
</tr>
<tr>
<td style="text-align:left">E:active</td>
<td style="text-align:left">匹配鼠标已经按下、还没有释放的E元素</td>
</tr>
<tr>
<td style="text-align:left">E:hover</td>
<td style="text-align:left">匹配鼠标悬停其上的E元素</td>
</tr>
<tr>
<td style="text-align:left">E:focus</td>
<td style="text-align:left">匹配获得当前焦点的E元素</td>
</tr>
<tr>
<td style="text-align:left">E:lang(c)</td>
<td style="text-align:left">匹配lang属性等于c的E元素</td>
</tr>
</tbody>
</table>
<h2>属性选择器</h2>
<table>
<thead>
<tr>
<th style="text-align:left">选择器</th>
<th style="text-align:left">含义</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">E[att]</td>
<td style="text-align:left">匹配所有具有att属性的E元素</td>
<td style="text-align:left">p[style]{background-repeat:repeat-y;}</td>
</tr>
<tr>
<td style="text-align:left">E[att=val]</td>
<td style="text-align:left">匹配所有att属性等于“val”的E元素</td>
<td style="text-align:left">div[class=&quot;c1&quot;]</td>
</tr>
<tr>
<td style="text-align:left">E[att~=val]</td>
<td style="text-align:left">匹配所有att属性具有多个空格分隔的值、其中一个值等于“val”的E元素</td>
<td style="text-align:left">div[class~=c2]</td>
</tr>
<tr>
<td style="text-align:left">E[att｜=val]</td>
<td style="text-align:left">匹配所有att属性具有多个连字号分隔（hyphen-separated）的值、其中一个值以“val”开头的E元素</td>
<td style="text-align:left">p[lang｜=en]</td>
</tr>
</tbody>
</table>
<h2>伪元素</h2>
<table>
<thead>
<tr>
<th style="text-align:left">选择器</th>
<th style="text-align:left">含义</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">E:first-line</td>
<td style="text-align:left">匹配E元素的第一行</td>
<td style="text-align:left">p:first-line{color:red;}</td>
</tr>
<tr>
<td style="text-align:left">E:first-letter</td>
<td style="text-align:left">匹配E元素的第一个字母</td>
<td style="text-align:left">.c1:first-letter{color:blue;}</td>
</tr>
<tr>
<td style="text-align:left">E:before</td>
<td style="text-align:left">在E元素之前插入生成的内容</td>
<td style="text-align:left">.ctn before{content:&quot;&quot;;display:block;;height:40px;width:40px;}</td>
</tr>
<tr>
<td style="text-align:left">E:after</td>
<td style="text-align:left">在E元素之后插入生成的内容</td>
<td style="text-align:left">.ctn after{content:&quot;&quot;;display:block;;height:40px;width:40px;}</td>
</tr>
</tbody>
</table>
<h1>选择器的权重</h1>
<ul>
<li>!important &gt; 行间样式 &gt; id &gt; class | 属性 &gt; 标签选择器 &gt; 通配符</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">选择器</th>
<th style="text-align:center">权重</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">!important</td>
<td style="text-align:center">Infinity</td>
</tr>
<tr>
<td style="text-align:left">行间样式</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:left">class、属性、伪累</td>
<td style="text-align:center">10</td>
</tr>
<tr>
<td style="text-align:left">标签、伪属性</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:left">通配符</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<h2>权重的计算</h2>
<ol>
<li>在比较样式的优先级时，只需统计选择符中的id、class和标签名的个数，然后把相应的权值相加即可，最后根据结果排出优先级</li>
<li>权值较大的优先级越高，权值相同的，后定义的优先级较高，样式值含有<code>！important</code>，优先级最高
<ul>
<li>div .class1 #people 的权值等于 1+10+100=111</li>
</ul>
</li>
</ol>
<h1>颜色的三种方法</h1>
<h2>纯英文单词</h2>
<p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">color</span>: <span class="selector-tag">red</span></span><br></pre></td></tr></table></figure></p>
<h2>十六进制颜色</h2>
<p><code>＃RRGGBB</code>，其中 RR（红色），GG（绿色）和 BB（蓝色）。所有值必须介于0和FF之间。
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">color</span>: <span class="selector-id">#ff4040</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>两位相同可以缩写</li>
</ul>
<p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">color</span>: # <span class="selector-tag">f40</span>;</span><br></pre></td></tr></table></figure></p>
<h2>RGB</h2>
<p>RGB（红，绿，蓝）。每个参数（红色，绿色和蓝色）定义颜色的亮度，可在0和255之间，或一个百分比值（从0％到100％）之间的整数。
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background-color</span><span class="selector-pseudo">:rgba(255</span>,0,0,0<span class="selector-class">.5</span>);</span><br></pre></td></tr></table></figure></p>
<hr>
<p><strong>参考</strong></p>
<ul>
<li><a href="https://www.w3cschool.cn/css/css-selector.html" target="_blank" rel="noopener">W3School</a></li>
<li><a href="https://www.jianshu.com/p/a53ba8e1fe72" target="_blank" rel="noopener">CSS选择器与优先级浅析</a></li>
</ul>

    

        <a href="/posts/CSSselector.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/" rel="tag">Web</a></li></ul>

    </div>
    
</article>

        </li>
    
    </ul>

    
<nav id="page-nav">
    <div class="inner">
    <a class="extend prev" rel="prev" href="/page/5/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/7/">下一页</a>
    </div>
</nav>


</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/xml/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Vitan &copy; 2017 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: false, REWARD: false };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>

<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-144334903-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<!-- End Google Analytics -->


    <script data-ad-client="ca-pub-2581760538335948" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    

    



    <meta charset="utf-8">
    
    
    
    <link rel="canonical" href="https://vitan.me/page/11/">
    
    
    <title>Vitan&#39;s Blog | ⁣⁣⁣Stay Hungry, Stay Foolish.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Coder,Linux,Web,Blog...">
    <meta name="description" content="Vitan&apos;s Personal Website.">
<meta name="keywords" content="Coder,Linux,Web,Blog...">
<meta property="og:type" content="website">
<meta property="og:title" content="Vitan&#39;s Blog">
<meta property="og:url" content="https://vitan.me/page/11/index.html">
<meta property="og:site_name" content="Vitan&#39;s Blog">
<meta property="og:description" content="Vitan&apos;s Personal Website.">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vitan&#39;s Blog">
<meta name="twitter:description" content="Vitan&apos;s Personal Website.">
    
        <link rel="alternate" type="application/atom+xml" title="Vitan&#39;s Blog" href="/xml/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.png">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/ivitan.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Vitan</h5>
          <a href="mailto:admin@vitan.me" title="admin@vitan.me" class="mail">admin@vitan.me</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-info-circle"></i>
                关于
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/ivitan" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Vitan&#39;s Blog</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        
            <a href="https://github.com/ivitan" class="header-icon waves-effect waves-circle waves-light" target="_blank" title="Github">
                <i class="icon icon-lg icon-github"></i>
            </a>
        
    </div>
</header>
<header class="content-header index-header">

    <div class="container fade-scale">
        <h1 class="title">Vitan&#39;s Blog</h1>
        <h5 class="subtitle">
            
            ⁣⁣⁣Stay Hungry, Stay Foolish.
            
        </h5>
    </div>

    


</header>

<div class="container body-wrap">

    <ul class="post-list">
    
        <li class="post-list-item fade">
            <article id="post-Git-Commit"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-08-10 13:43:03" datetime="2018-08-10T05:43:03.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-08-10</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Diary/">Diary</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Git-Commit.html">Git Commit 规范</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Git Commit 规范
&lt;!--more--&gt;</p>
<h1>Commit message 格式</h1>
<p>每次提交，Commit message 都包括三个部分：Header，Body 和 Footer。
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line">// 空一行</span><br><span class="line">&lt;body&gt;</span><br><span class="line">// 空一行s</span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>其中，Header 是必需的，Body 和 Footer 可以省略。
<ul>
<li>不管是哪一个部分，任何一行都不得超过72个字符（或100个字符）。这是为了避免自动换行影响美观。</li>
</ul>
</li>
</ul>
<h2>Header</h2>
<p>Header 部分只有一行，包括三个字段：type（必需）、scope（可选）和subject（必需）。</p>
<h2>type</h2>
<ul>
<li>type用于说明 commit 的类别，只允许使用下面7个标识。</li>
</ul>
<p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">feat：新功能（<span class="built_in">feature</span>）</span><br><span class="line"><span class="built_in">fix</span>：修补bug</span><br><span class="line">docs：文档（documentation）</span><br><span class="line"><span class="built_in">style</span>： 格式（不影响代码运行的变动）</span><br><span class="line">refactor：重构（即不是新增功能，也不是修改bug的代码变动）</span><br><span class="line">test：增加测试</span><br><span class="line">chore：构建过程或辅助工具的变动</span><br></pre></td></tr></table></figure></p>
<ul>
<li>如果 type 为 feat 和 fix，则该 commit 将肯定出现在 Change log 之中。其他情况（docs、chore、style、refactor、test）由你决定，要不要放入 Change log，建议是不要。</li>
</ul>
<h2>scope</h2>
<p>scope用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。</p>
<h2>subject</h2>
<ul>
<li>subject 是 commit 目的的简短描述，不超过50个字符。
<ol>
<li>以动词开头，使用第一人称现在时，比如change，而不是changed或changes</li>
<li>第一个字母小写</li>
<li>结尾不加句号（.）</li>
</ol>
</li>
</ul>
<h2>Body</h2>
<ul>
<li>Body 部分是对本次 commit 的详细描述，可以分成多行。下面是一个范例。</li>
</ul>
<p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">More <span class="keyword">detailed</span> explanatory <span class="keyword">text</span>, <span class="keyword">if</span> necessary.  Wrap <span class="keyword">it</span> <span class="built_in">to</span></span><br><span class="line">about <span class="number">72</span> <span class="keyword">characters</span> <span class="keyword">or</span> so.</span><br><span class="line"></span><br><span class="line">Further paragraphs come <span class="keyword">after</span> blank <span class="keyword">lines</span>.</span><br><span class="line"></span><br><span class="line">- Bullet points are okay, too</span><br><span class="line">- Use <span class="keyword">a</span> hanging indent</span><br></pre></td></tr></table></figure></p>
<ul>
<li>有两个注意点。
<ol>
<li>使用第一人称现在时，比如使用 change 而不是 changed 或 changes。</li>
<li>应该说明代码变动的动机，以及与以前行为的对比。</li>
</ol>
</li>
</ul>
<h2>Footer</h2>
<ul>
<li>Footer 部分只用于两种情况。
<ol>
<li>不兼容变动
如果当前代码与上一个版本不兼容，则 Footer 部分以 <code>BREAKING CHANGE</code> 开头，后面是对变动的描述、以及变动理由和迁移方法。</li>
</ol>
</li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">BREAKING <span class="keyword">CHANGE</span>: isolate <span class="keyword">scope</span> bindings definition has changed.</span><br><span class="line"></span><br><span class="line">  <span class="keyword">To</span> migrate the code follow the example below:</span><br><span class="line"></span><br><span class="line">  <span class="keyword">Before</span>:</span><br><span class="line"></span><br><span class="line">  <span class="keyword">scope</span>: &#123;</span><br><span class="line">    myAttr: <span class="string">'attribute'</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">After</span>:</span><br><span class="line"></span><br><span class="line">  <span class="keyword">scope</span>: &#123;</span><br><span class="line">    myAttr: <span class="string">'@'</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  The removed <span class="string">`inject`</span> wasn<span class="string">'t generaly useful for directives so there should be no code using it.</span></span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>关闭 issue</li>
</ol>
<ul>
<li>如果当前 commit 针对某个issue，那么可以在 Footer 部分关闭这个 issue 。</li>
</ul>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Closes #234</span><br></pre></td></tr></table></figure></p>
<ul>
<li>一次关闭多个 issue</li>
</ul>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Closes #123, #245, #992</span><br></pre></td></tr></table></figure></p>
<h2>Revert</h2>
<ul>
<li>还有一种特殊情况，如果当前 commit 用于撤销以前的 commit，则必须以 <code>revert:</code> 开头，后面跟着被撤销 Commit 的 Header。</li>
</ul>
<p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">revert: feat(pencil): <span class="keyword">add</span> <span class="string">'graphiteWidth'</span> <span class="keyword">option</span></span><br><span class="line"></span><br><span class="line">This reverts <span class="keyword">commit</span> <span class="number">667</span>ecc1654a317a13331b17617d973392f415f02.</span><br></pre></td></tr></table></figure></p>
<ul>
<li>Body 部分的格式是固定的，必须写成 <code>This reverts commit &amp;lt;hash&gt;.</code>，其中的hash是被撤销 commit 的 SHA 标识符。</li>
<li>如果当前 commit 与被撤销的 commit，在同一个发布（release）里面，那么它们都不会出现在 Change log 里面。如果两者在不同的发布，那么当前 commit，会出现在 Change log 的 Reverts小标题下面。</li>
</ul>
<h1>总结</h1>
<p><figure class="highlight plain"><figcaption><span>公式</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>type
<ul>
<li>用于说明 commit 的类别，只允许使用下面7个标识。</li>
</ul>
</li>
<li>feat：新功能（feature）</li>
<li>fix：修补bug</li>
<li>docs：文档（documentation）</li>
<li>style： 格式（不影响代码运行的变动）</li>
<li>refactor：重构（即不是新增功能，也不是修改bug的代码变动）</li>
<li>test：增加测试</li>
<li>chore：构建过程或辅助工具的变动</li>
<li>scope
<ul>
<li>用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。</li>
</ul>
</li>
<li>subject
<ul>
<li>是 commit 目的的简短描述，不超过50个字符。
<ol>
<li>以动词开头，使用第一人称现在时，比如 change，而不是 changed 或 changes</li>
<li>第一个字母小写</li>
<li>结尾不加句号（.）</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>Via</strong></p>
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html" target="_blank" rel="noopener">Commit message 和 Change log 编写指南</a></li>
</ul>

    

        <a href="/posts/Git-Commit.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Github/">Github</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-sudo-su-different"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-08-08 13:01:18" datetime="2018-08-08T05:01:18.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-08-08</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux/">Linux</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/sudo-su-different.html">Sudo 与 Su 的区别</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>sudo su 区别
&lt;!--more--&gt;</p>
<h1>su</h1>
<p>简介</p>
<ol>
<li>su 用于用户之间的切换。但是前面的用户依然保持在登录状态。这种切换如果超级权限用户 root 向普通或虚拟用户切换不需要密码，而普通用户切换到其它任何用户都需要密码验证。</li>
<li>变更为其他使用者的身份，除 root 外，需要键入该使用者的密码</li>
</ol>
<p>语法
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su [选项] [-] [&lt;用户&gt; [&lt;参数&gt;...]]</span><br></pre></td></tr></table></figure></p>
<ul>
<li>选项
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">f  或 --fast</span><br><span class="line"><span class="comment"># 不必读启动档（如 csh.cshrc 等），仅用于 csh 或 tcsh</span></span><br><span class="line">-m -p 或 --preserve-environment</span><br><span class="line"><span class="comment"># 执行 su 时不改变环境变数</span></span><br><span class="line">-c <span class="built_in">command</span> 或 --<span class="built_in">command</span>=<span class="built_in">command</span></span><br><span class="line"><span class="comment"># 变更为帐号为 USER 的使用者并执行指令（command）后再变回原来使用者</span></span><br><span class="line">-s shell 或 --shell=shell</span><br><span class="line"><span class="comment"># 指定要执行的 shell(bash,csh,tcsh等），预设值为 /etc/passwd 内的该使用者(USER) shell</span></span><br><span class="line">--<span class="built_in">help</span> <span class="comment"># 显示说明文件</span></span><br><span class="line">--version <span class="comment"># 显示版本资讯</span></span><br><span class="line">- -l 或 --login</span><br><span class="line"><span class="comment"># 类似重新 login 为该使用者一样，大部份环境变数（HOME SHELL USER等等）</span></span><br><span class="line">都是以该使用者（USER）为主，并且工作目录也会改变，如果没有指定 USER ，内定是 root</span><br><span class="line">USER <span class="comment"># 欲变更的使用者帐号</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>su – root 和 su root（su）的区别</p>
<ul>
<li><code>su – root</code> 表示人 以root 身份登录</li>
<li><code>su root</code> 表示与 root 建立一个链接，通过 root 执行命令</li>
</ul>
<p>不足</p>
<ol>
<li>不安全 su 工具在多人参与的系统管理中，并不是最好的选择，su 只适用于一两个人参与管理的系统，毕竟 su 并不能让普通用户受限的使用；超级用户 root 密码应该掌握在少数用户手中。</li>
<li>如果某个用户需要使用 root 权限,则必须要把 root 密码告诉此用户。</li>
</ol>
<h1>sudo</h1>
<p>简介</p>
<ol>
<li>为所有想使用 root 权限的普通用户设计的。可以让普通用户具有临时使用root权限的权利。只需输入自己账户的密码即可。个普通用户必须在 /etc/sudoers 文件中有配置项,才具有使用sudo的权利.</li>
<li>执行命令的流程是当前用户切换到 root（或其它指定切换到的用户），然后以 root（或其它指定的切换到的用户）身份执行命令，执行完成后，直接退回到当前用户.</li>
</ol>
<p>语法
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo 参数</span><br></pre></td></tr></table></figure></p>
<ul>
<li>参数
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-V <span class="comment"># 显示版本编号</span></span><br><span class="line">-h <span class="comment"># 会显示版本编号及指令的使用方式说明</span></span><br><span class="line">-l <span class="comment"># 显示出自己（执行 sudo 的使用者）的权限</span></span><br><span class="line">-v <span class="comment"># sudo 在第一次执行时或是在 N 分钟内没有执行（N 预设为五）会问密码，</span></span><br><span class="line">这个参数是重新做一次确认，如果超过 N 分钟，也会问密码</span><br><span class="line">-k <span class="comment"># 将会强迫使用者在下一次执行 sudo 时问密码（不论有没有超过 N 分钟）</span></span><br><span class="line">-b <span class="comment"># 将要执行的指令放在背景执行</span></span><br><span class="line">-p <span class="comment"># prompt 可以更改问密码的提示语，其中 %u 会代换为使用者的帐号名称， %h 会显示主机名称</span></span><br><span class="line">-u <span class="comment"># username/#uid 不加此参数，代表要以 root 的身份执行指令</span></span><br><span class="line">而加了此参数，可以以 username 的身份执行指令（<span class="comment">#uid 为该 username 的使用者号码）</span></span><br><span class="line">-s <span class="comment"># 执行环境变数中的 SHELL 所指定的 shell ，或是 /etc/passwd 里所指定的 shell</span></span><br><span class="line">-H <span class="comment"># 将环境变数中的 HOME （家目录）指定为要变更身份的使用者家目录</span></span><br><span class="line">（如不加 -u 参数就是系统管理者 root ）</span><br><span class="line"><span class="built_in">command</span> <span class="comment"># 要以系统管理者身份（或以 -u 更改为其他人）执行的指令</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h1>区别</h1>
<p>总结</p>
<ul>
<li>共同点：都是 root 用户的权限；</li>
<li>不同点：su 仅仅取得 root 权限，工作环境不变，还是在切换之前用户的工作环境；sudo 是完全取得 root 的权限和 root 的工作环境。</li>
<li>su 用于用户之间的切换。</li>
<li>sudo 用于普通用户可以使用 root 权限来执行指定命令。</li>
</ul>
<hr>
<p><strong>参考</strong></p>
<ul>
<li><a href="https://wanglu.info/1237.html" target="_blank" rel="noopener">Linux中su与sudo、su – root的区别</a></li>
<li><a href="https://www.tecmint.com/difference-between-su-and-su-commands-in-linux/" target="_blank" rel="noopener">Learn Difference Between “su” and “su -” Commands in Linux</a></li>
<li><a href="https://www.jb51.net/LINUXjishu/12713.html" target="_blank" rel="noopener">linux su和sudo命令的区别</a></li>
</ul>

    

        <a href="/posts/sudo-su-different.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ArchLinux/">ArchLinux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-LinuxAnds"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-08-07 11:39:20" datetime="2018-08-07T03:39:20.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-08-07</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux/">Linux</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/LinuxAnds.html">Linux 命令连接符</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Linux 命令连接符
&lt;!--more--&gt;</p>
<h1>和号操作符 (&amp;)</h1>
<p><code>&amp;</code> 的作用是使命令在后台运行。只要在命令后面跟上一个空格和 <code>&amp;</code>,可以一口气在后台运行多个命令。</p>
<ul>
<li>在后台运行一个命令</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping ­c5 www.tecmint.com</span><br></pre></td></tr></table></figure></p>
<ul>
<li>同时在后台运行两个命令</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update &amp; mkdit <span class="built_in">test</span></span><br></pre></td></tr></table></figure></p>
<h1>分号操作符（;）</h1>
<p>分号操作符使你可以一口气运行几个命令，命令顺序执行。</p>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update ; apt-get upgrade ; mkdir <span class="built_in">test</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>上述命令先后执行了 update 和 upgrade，最后在当前工作目录下创建了一个 <code>test</code> 文件夹。</li>
</ul>
<h1>与操作符 (&amp;&amp;)</h1>
<p>如果第一个命令执行成功，与操作符 <code>&amp;&amp;</code> 才会执行第二个命令，也就是说，第一个命令退出状态是0。（在UNIX里面，0表示无错误，而所有非0返回值都是各种错误）。这个命令在检查最后一个命令的执行状态时很有用。</p>
<ul>
<li>使用links 命令在终端中访问网站 tecmint.com ，但在这之前我需要检查主机是否在线或不在线
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c3 www.tecmint.com &amp;&amp; links www.tecmint.com</span><br></pre></td></tr></table></figure></li>
</ul>
<h1>或操作符 (||)</h1>
<p>或操作符 <code>||</code> 很像编程中的 <code>else</code> 语句。上面的操作符允许你在第一个命令失败的情况下执行第二个命令，比如，第一个命令的退出状态是1。</p>
<ul>
<li>在非root帐户中执行 <code>apt-get update</code> ，如果第一个命令失败了，接着会执行第二个命令 <code>links www.tecmint.com</code> 。</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update || links tecmint.com</span><br></pre></td></tr></table></figure></p>
<ul>
<li>
<p>上面的命令中，由于该用户不允许更新系统，这意味着第一个命令的退出状态是 <code>1</code> ,因此最后一个命令 <code>links tecmint.com</code> 会执行。</p>
<ul>
<li>如果第一个命令成功执行并且退出状态是 <code>0</code> 呢？很明显的，第二个命令不会执行。</li>
</ul>
</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="built_in">test</span> || links tecmint.com</span><br></pre></td></tr></table></figure></p>
<ul>
<li>这里，用户在家目录创建了一个 <code>test</code> 文件夹，这是被允许的。命令成功的执行，退出状态是 <code>0</code> ,因此，最后的命令不会执行。</li>
</ul>
<h1>非操作符 (!)</h1>
<p>非操作符 <code>!</code> 很像 except 语句。这个命令会执行除了提供的条件外的所有的语句。</p>
<ul>
<li>在你的主目录创建一个目录 <code>tecmint</code> ，并 <code>cd</code> 到它这里。</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir tecmint</span><br><span class="line"><span class="built_in">cd</span> tecmint</span><br></pre></td></tr></table></figure></p>
<ul>
<li>接下来，在文件夹‘tecmint’下创建不同类型的文件。</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch a.doc b.doc a.pdf b.pdf a.xml b.xml a.html b.html</span><br></pre></td></tr></table></figure></p>
<ul>
<li>看一下我们在文件夹 <code>tecmint</code> 创建的新文件。</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>a.doc  a.html  a.pdf  a.xml  b.doc  b.html  b.pdf  b.xml</p>
</blockquote>
<ul>
<li>用一种聪明的办法马上删除除了 ‘html’之外的所有文件。</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -r !(*.html)</span><br></pre></td></tr></table></figure></p>
<ul>
<li>验证一下上次的执行结果，使用ls 命令列出可见所有文件。</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>a.html  b.html</p>
</blockquote>
<h1>与或操作符 (&amp;&amp; – ||)</h1>
<p>上面的操作符实际上是‘与’和‘或’操作符的组合。它很像 <code>if-else</code> 语句。</p>
<ul>
<li>
<p>ping tecmint.com，如果成功打印‘已验证’，否则打印‘主机故障’。
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c3 www.tecmint.com &amp;&amp; <span class="built_in">echo</span> <span class="string">"Verified"</span> || <span class="built_in">echo</span> <span class="string">"Host Down"</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>示例输出</p>
</li>
</ul>
<blockquote>
<p>PING www.tecmint.com (212.71.234.61) 56(84) bytes of data.
64 bytes from www.tecmint.com (212.71.234.61): icmp_req=1 ttl=55 time=216 ms
64 bytes from www.tecmint.com (212.71.234.61): icmp_req=2 ttl=55 time=224 ms
64 bytes from www.tecmint.com (212.71.234.61): icmp_req=3 ttl=55 time=226 ms</p>
</blockquote>
<p>--- www.tecmint.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2001ms
rtt min/avg/max/mdev = 216.960/222.789/226.423/4.199 ms
Verified</p>
<ul>
<li>
<p>断开我们现在的网络连接诶，再试一下相同的命令。
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c3 www.tecmint.com &amp;&amp; <span class="built_in">echo</span> <span class="string">"verified"</span> || <span class="built_in">echo</span> <span class="string">"Host Down"</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>实例输出
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping: unknown host www.tecmint.com</span><br><span class="line">Host Down</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<h1>管道操作符 (|)</h1>
<p>PIPE 在将第一个命令的输出作为第二个命令的输入时很有用。</p>
<ul>
<li><code>ls -l</code> 的输出通过管道到‘less’，并看一下输出。
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l | less</span><br></pre></td></tr></table></figure></li>
</ul>
<h1>命令合并操作符 {}</h1>
<p>合并两个或多个命令，第二个命令依赖于第一个命令的执行。</p>
<ul>
<li>
<p>检查一下文件‘xyz.txt’是否在Downloads目录下，如果不存在则创建之并输出提示信息。
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ -f /home/tecmint/Downloads/xyz.txt ] || touch /home/tecmint/Downloads/xyz.txt; <span class="built_in">echo</span> <span class="string">"The file does not exist"</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>但是这样的命令的运行结果并不如我们预期的运行，会始终都输出提示信息。因此需要使用{}操作符来合并命令：
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ -f /home/tecmint/Downloads/xyz1.txt ] || &#123;touch /home/tecmint/Downloads/xyz.txt; <span class="built_in">echo</span> <span class="string">"The file does not exist"</span>&#125;</span><br><span class="line"></span><br><span class="line">“The file does not exist”</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<h1>优先操作符 ()</h1>
<p>这个操作符可以让命令以优先顺序执行。</p>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Command_x1 &amp;&amp;Command_x2 || Command_x3 &amp;&amp; Command_x4</span><br></pre></td></tr></table></figure></p>
<ul>
<li>
<p>在上面的伪代码中，如果Command_x1执行失败了会怎么样，Command_x2, Command_x3, Command_x4没有一个会执行，对于这种情况，我们使用优先操作符。
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Command_x1 &amp;&amp;Command_x2) || (Command_x3 &amp;&amp; Command_x4)</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>在上面的伪代码中，如果Command_x1执行失败，Command_x2不会执行，但是Command_x3会继续执行， Command_x4会依赖于 Command_x3的退出状态。</p>
</li>
</ul>
<h1>连接符 ($$)</h1>
<p>连接符 <code>$$</code> 如它名字所说，被用于连接 shell 中那些太长而需要分成多行的命令。</p>
<ul>
<li>可以在输入一个 <code>\</code> 之后就回车，然后继续输入命令行，直到输入完成。比如，下面的命令会打开文本文件 test(1).txt。
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="built_in">test</span> \</span><br><span class="line">1.txt</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<p><strong>Via</strong></p>
<ul>
<li><a href="https://www.tecmint.com/category/linux-commands/" target="_blank" rel="noopener">LINUX COMMANDS</a></li>
<li><a href="https://mp.weixin.qq.com/s/ui-Ey-JYo7X8qlMoP5Llqg" target="_blank" rel="noopener">Linux 中命令链接操作符，让你的代码更简洁！</a></li>
</ul>

    

        <a href="/posts/LinuxAnds.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ArchLinux/">ArchLinux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Markdown-Plus"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-08-06 12:32:58" datetime="2018-08-06T04:32:58.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-08-06</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Diary/">Diary</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Markdown-Plus.html">Markdown 各种图</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Markdown 流程图，干特图。
&lt;!--more--&gt;</p>
<h1>流程图 (Flowchart)</h1>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[Christmas] --&gt;|Get money| B(Go shopping)</span><br><span class="line">    B --&gt; C&#123;Let me think&#125;</span><br><span class="line">    C --&gt;|One| D[Laptop]</span><br><span class="line">    C --&gt;|Two| E[iPhone]</span><br><span class="line">    C --&gt;|Three| F[Car]</span><br></pre></td></tr></table></figure></p>
<h1>序列图  (Sequence diagram)</h1>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    loop every day</span><br><span class="line">        Alice-&gt;&gt;John: Hello John, how are you?</span><br><span class="line">        John--&gt;&gt;Alice: Great!</span><br><span class="line">    end</span><br></pre></td></tr></table></figure></p>
<h1>甘特图 (Gantt diagram)</h1>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">gantt</span><br><span class="line">    dateFormat  YYYY-MM-DD</span><br><span class="line">    title Adding GANTT diagram functionality to mermaid</span><br><span class="line"></span><br><span class="line">    section A section</span><br><span class="line">    Completed task            :done,    des1, 2014-01-06,2014-01-08</span><br><span class="line">    Active task               :active,  des2, 2014-01-09, 3d</span><br><span class="line">    Future task               :         des3, after des2, 5d</span><br><span class="line">    Future task2               :         des4, after des3, 5d</span><br><span class="line"></span><br><span class="line">    section Critical tasks</span><br><span class="line">    Completed task in the critical line :crit, done, 2014-01-06,24h</span><br><span class="line">    Implement parser and jison          :crit, done, after des1, 2d</span><br><span class="line">    Create tests for parser             :crit, active, 3d</span><br><span class="line">    Future task in critical line        :crit, 5d</span><br><span class="line">    Create tests for renderer           :2d</span><br><span class="line">    Add to mermaid                      :1d</span><br><span class="line"></span><br><span class="line">    section Documentation</span><br><span class="line">    Describe gantt syntax               :active, a1, after des1, 3d</span><br><span class="line">    Add gantt diagram to demo page      :after a1  , 20h</span><br><span class="line">    Add another diagram to demo page    :doc1, after a1  , 48h</span><br><span class="line"></span><br><span class="line">    section Last section</span><br><span class="line">    Describe gantt syntax               :after doc1, 3d</span><br><span class="line">    Add gantt diagram to demo page      : 20h</span><br><span class="line">    Add another diagram to demo page    : 48h</span><br></pre></td></tr></table></figure></p>
<hr>
<p><strong>参考</strong></p>
<ul>
<li><a href="https://mermaidjs.github.io/" target="_blank" rel="noopener">Mermaidjs</a></li>
</ul>

    

        <a href="/posts/Markdown-Plus.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Markdown/">Markdown</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Typography/">Typography</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-OpenSourceLicense"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-08-04 11:24:46" datetime="2018-08-04T03:24:46.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-08-04</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Diary/">Diary</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/OpenSourceLicense.html">开源协议</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <blockquote>
<p>几种常用的开源协议,更多的协议可以去<a href="https://opensource.org/licenses/alphabetical" target="_blank" rel="noopener">
Open Source Initiative</a>了解。</p>
</blockquote>
<p>&lt;!--more--&gt;</p>
<h1>两张图看懂各种开源协议</h1>
<p><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1ftxjq8saxij20m80dw3zd.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure></p>
<ul>
<li>限制
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1ftxjqhs2z8j20le09uac5.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure></li>
</ul>
<h1><a href="https://zh.wikipedia.org/zh/GNU%E5%AE%BD%E9%80%9A%E7%94%A8%E5%85%AC%E5%85%B1%E8%AE%B8%E5%8F%AF%E8%AF%81" target="_blank" rel="noopener">GNU GPL</a></h1>
<p>通用公共许可协议(GNU General Public License), GPL 保证了所有开发者的权利，同时为使用者提供了足够的复制，分发，修改的权利.</p>
<p>要求</p>
<ul>
<li>修改后的源码也需要公开</li>
<li>版权及协议也要于此协议一致</li>
<li>修改后，需要在相应的文件做说明</li>
</ul>
<p>允许</p>
<ul>
<li>商用，分发，修改，专利授权，私用</li>
</ul>
<p>禁止</p>
<ul>
<li>禁止因使用等造成影响责任承担、也就是说免责申明</li>
<li>静止在软件分发传播过程中附加上原来没有的协议条款等</li>
</ul>
<h1><a href="https://zh.wikipedia.org/zh-hans/BSD%E8%AE%B8%E5%8F%AF%E8%AF%81" target="_blank" rel="noopener">BSD协议</a></h1>
<ul>
<li>如果再发布的产品中含有源代码，则在源代码中必须带有原来代码中的BSD协议。</li>
<li>如果再发布的只是二进制类库/软件，则需要再类库/软件的文档和版权申明中包含原有代码中的BSD协议。</li>
<li>不可以用开源代码的作者/机构名字和原来产品的名字做市场推广。</li>
<li>在代码中保留作者提供的协议和版权信息</li>
</ul>
<p>允许</p>
<ul>
<li>商用、分发、修改、私用、附加协议</li>
</ul>
<p>禁止</p>
<ul>
<li>禁止承担责任，(免责申明)</li>
</ul>
<h1><a href="https://zh.wikipedia.org/zh-hans/Apache%E8%AE%B8%E5%8F%AF%E8%AF%81" target="_blank" rel="noopener">Apache Licence 2.0</a></h1>
<p>这是一个著名的非盈利开源组织Apache采用的协议，它励代码共享和尊重原作者的著作权，同时也允许代码修改，再发布(作为开源或商业软件)。</p>
<p>要求</p>
<ul>
<li>在代码中保留作者提供的协议和版权信息</li>
<li>如果修改了代码，则必须在被修改的文件中进行说明。</li>
</ul>
<p>允许
的权利商用、分发、修改、专利授权、私用、附加协议</p>
<p>禁止</p>
<ul>
<li>禁止因使用等造成影响责任承担、也就是说免责申明</li>
<li>不能使用相应的商标。</li>
</ul>
<hr>
<ul>
<li>提示：商业软件可以使用，也可以修改使用 Apache 协议的代码。</li>
</ul>
<h1><a href="https://zh.wikipedia.org/zh/MIT%E8%A8%B1%E5%8F%AF%E8%AD%89" target="_blank" rel="noopener">MIT</a></h1>
<p>宽松简单且精要的一个协议。在适当标明来源及免责的情况下，它允许你对代码进行任何形式的使用,也就是原作者只想保留版权,而无任何其他了限制,而你必须在发行版里包含原许可协议的声明,无论你是以二进制发布的还是以源代码发布的。</p>
<p>要求</p>
<ul>
<li>在代码中保留作者提供的协议和版权信息</li>
</ul>
<p>允许</p>
<ul>
<li>商用、分发、修改、私用、附加协议</li>
</ul>
<p>禁止</p>
<ul>
<li>禁止承担责任，(免责申明)</li>
</ul>
<hr>
<ul>
<li>提示：商业软件可以使用，也可以修改MIT协议的代码，甚至可以出售MIT协议的代码。</li>
</ul>
<h1><a href="https://baike.baidu.com/item/LGPL" target="_blank" rel="noopener">LGPL</a></h1>
<p>其主要用于一些代码库，LGPL比起GPL它授予的权限较少，LGPL允许商业软件通过类库引用(link)方式使用LGPL类库而不需要开源商业软件的代码。因此使用LGPL协议的开源代码可以被商业软件作为类库引用并发布和销售。注意是以类库的形式使用，也就是说如果修改了源代码的话则也必须使用LGPL协议贡献源码出来。</p>
<p>要求</p>
<ul>
<li>公开使用了LGPL部分的代码，其余部分不需要公开。</li>
<li>可以库引用的方式用于商业软件。</li>
<li>在代码中保留作者提供的协议和版权信息</li>
</ul>
<p>允许</p>
<ul>
<li>商用、分发、修改、专利授权、私用、附加协议</li>
</ul>
<p>禁止</p>
<ul>
<li>禁止承担责任，(免责申明)、</li>
</ul>
<hr>
<ul>
<li>提示：商业软件可以使用，但不能修改 LGPL 协议的代码。</li>
<li>GPL/LGPL都保障原作者的知识产权，避免有人利用开源代码复制并开发类似的产品。</li>
</ul>
<blockquote>
<p>更多内容详见 <a href="http://choosealicense.online/appendix/" target="_blank" rel="noopener">ChooseLicense 附录</a></p>
</blockquote>
<h1>如何选择</h1>
<ul>
<li>选择合适的协议
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1ftxjqepb31j20p90wi43t.jpg" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<ul>
<li><strong>一个网站 <a href="http://choosealicense.online/" target="_blank" rel="noopener">ChooseLicense</a></strong></li>
</ul>
</li>
</ul>
<hr>
<p><strong>参考</strong></p>
<ul>
<li><a href="https://juejin.im/post/5a0a745b51882531bb6c5389" target="_blank" rel="noopener">十分钟理清常见的开源协议</a></li>
</ul>

    

        <a href="/posts/OpenSourceLicense.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Win/">Win</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Linux-Win-Time"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-08-03 10:03:49" datetime="2018-08-03T02:03:49.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-08-03</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux/">Linux</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Linux-Win-Time.html">解决 Win10 与 Linux 时间不一致</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>解决 Win10 与 Linux 时间不一致
&lt;!--more--&gt;</p>
<h1>原因</h1>
<h2>UTC 与 GMT</h2>
<ol>
<li>UTC即Universal Time Coordinated，协调世界时（世界统一时间）</li>
<li>GMT 即Greenwich Mean Time，格林尼治平时</li>
</ol>
<h2>原因</h2>
<ul>
<li>Windows 把计算机硬件时间当作本地时间(local time)，所以在Windows系统中显示的时间跟BIOS中显示的时间是一样的。</li>
<li>Linux/Unix/Mac把计算机硬件时间当作 UTC， 所以在Linux/Unix/Mac系统启动后在该时间的基础上，加上电脑设置的时区数（ 比如我们在中国，它就加上“8” ），因此，Linux/Unix/Mac系统中显示的时间总是比Windows系统中显示的时间快8个小时。</li>
<li>所以，当你在Linux/Unix/Mac系统中，把系统现实的时间设置正确后，其实计算机硬件时间是在这个时间上减去8小时，所以当你切换成Windows系统后，会发现时间慢了8小时。就是这样个原因。</li>
</ul>
<h1>解决方法</h1>
<h2>方法一</h2>
<ul>
<li>把 Linux 计算机硬件时间改成系统显示的时间，即禁用 UTC
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timedatectl <span class="built_in">set</span>-local-rtc 1 --adjust-system-clock</span><br></pre></td></tr></table></figure></li>
</ul>
<h2>方法二</h2>
<ul>
<li>修改 Windows 对硬件时间的对待方式，让 Windows把硬件时间当作 UTC.
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Reg add HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d 1</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<p><strong>Via</strong></p>
<ul>
<li><a href="https://www.zhihu.com/question/46525639" target="_blank" rel="noopener">滑稽</a></li>
</ul>

    

        <a href="/posts/Linux-Win-Time.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ArchLinux/">ArchLinux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Win/">Win</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Raspberry-LCD"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-08-02 22:04:46" datetime="2018-08-02T14:04:46.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-08-02</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Diary/">Diary</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/Raspberry-LCD.html">RaspberryPi 安装屏幕触控驱动及设置分辨率</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>Raspberry Pi 屏幕触控驱动安装及分辨率设置。
&lt;!--more--&gt;</p>
<h1>触摸驱动</h1>
<h2>下载链接</h2>
<ul>
<li><a href="https://github.com/goodtft/LCD-show" target="_blank" rel="noopener">GitHub 中获取</a></li>
</ul>
<h1>安装(3.5寸为例)</h1>
<h2>修改 config 配置文件</h2>
<ol>
<li>烧写系统完成后,将 <code>LCD-show.tar.gz</code> 拷贝到 TF 卡根目录,</li>
<li>打开 TF 卡根目录的 <code>config.txt</code> 文件并在文件末端加入以下代码,保存并安全弹出 TF 卡:
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hdmi_drive=2</span><br><span class="line">hdmi_force_hotplug=1</span><br><span class="line">hdmi_group=2</span><br><span class="line">hdmi_mode=87</span><br><span class="line">hdmi_cvt 480 320 60 6 0 0 0</span><br></pre></td></tr></table></figure></li>
</ol>
<h2>配置</h2>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /boot</span><br><span class="line">cp LCD-show.tar.gz ~</span><br><span class="line">cd ~</span><br><span class="line">sudo tar zxvf LCD-show.tar.gz</span><br><span class="line">cd LCD-show/</span><br><span class="line">sudo ./MPI3508_480_320-show</span><br></pre></td></tr></table></figure></p>
<h1>修改分辨率</h1>
<ul>
<li>终端输入</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /boot/config.txt</span><br></pre></td></tr></table></figure></p>
<ul>
<li>修改</li>
</ul>
<p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hdmi_drive</span>=<span class="number">2</span></span><br><span class="line"><span class="attr">hdmi_force_hotplug</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">hdmi_group</span>=<span class="number">2</span></span><br><span class="line"><span class="attr">hdmi_mode</span>=<span class="number">87</span></span><br><span class="line"><span class="comment"># 这里根据分辨率来设置</span></span><br></pre></td></tr></table></figure></p>
<h2>分辨率表</h2>
<h3>CEA 分辨率(电视规格分辨率)</h3>
<ul>
<li>CEA 规定的电视规格分辨率，这些分辨率的 <code>hdmi_group = 1</code></li>
</ul>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">hdmi_mode=1    VGA</span><br><span class="line">hdmi_mode=2    480p  60Hz</span><br><span class="line">hdmi_mode=3    480p  60Hz  H</span><br><span class="line">hdmi_mode=4    720p  60Hz</span><br><span class="line">hdmi_mode=5    1080i 60Hz</span><br><span class="line">hdmi_mode=6    480i  60Hz</span><br><span class="line">hdmi_mode=7    480i  60Hz  H</span><br><span class="line">hdmi_mode=8    240p  60Hz</span><br><span class="line">hdmi_mode=9    240p  60Hz  H</span><br><span class="line">hdmi_mode=10   480i  60Hz  4x</span><br><span class="line">hdmi_mode=11   480i  60Hz  4x H</span><br><span class="line">hdmi_mode=12   240p  60Hz  4x</span><br><span class="line">hdmi_mode=13   240p  60Hz  4x H</span><br><span class="line">hdmi_mode=14   480p  60Hz  2x</span><br><span class="line">hdmi_mode=15   480p  60Hz  2x H</span><br><span class="line">hdmi_mode=16   1080p 60Hz</span><br><span class="line">hdmi_mode=17   576p  50Hz</span><br><span class="line">hdmi_mode=18   576p  50Hz  H</span><br><span class="line">hdmi_mode=19   720p  50Hz</span><br><span class="line">hdmi_mode=20   1080i 50Hz</span><br><span class="line">hdmi_mode=21   576i  50Hz</span><br><span class="line">hdmi_mode=22   576i  50Hz  H</span><br><span class="line">hdmi_mode=23   288p  50Hz</span><br><span class="line">hdmi_mode=24   288p  50Hz  H</span><br><span class="line">hdmi_mode=25   576i  50Hz  4x</span><br><span class="line">hdmi_mode=26   576i  50Hz  4x H</span><br><span class="line">hdmi_mode=27   288p  50Hz  4x</span><br><span class="line">hdmi_mode=28   288p  50Hz  4x H</span><br><span class="line">hdmi_mode=29   576p  50Hz  2x</span><br><span class="line">hdmi_mode=30   576p  50Hz  2x H</span><br><span class="line">hdmi_mode=31   1080p 50Hz</span><br><span class="line">hdmi_mode=32   1080p 24Hz</span><br><span class="line">hdmi_mode=33   1080p 25Hz</span><br><span class="line">hdmi_mode=34   1080p 30Hz</span><br><span class="line">hdmi_mode=35   480p  60Hz  4x</span><br><span class="line">hdmi_mode=36   480p  60Hz  4xH</span><br><span class="line">hdmi_mode=37   576p  50Hz  4x</span><br><span class="line">hdmi_mode=38   576p  50Hz  4x H</span><br><span class="line">hdmi_mode=39   1080i 50Hz  reduced blanking</span><br><span class="line">hdmi_mode=40   1080i 100Hz</span><br><span class="line">hdmi_mode=41   720p  100Hz</span><br><span class="line">hdmi_mode=42   576p  100Hz</span><br><span class="line">hdmi_mode=43   576p  100Hz H</span><br><span class="line">hdmi_mode=44   576i  100Hz</span><br><span class="line">hdmi_mode=45   576i  100Hz H</span><br><span class="line">hdmi_mode=46   1080i 120Hz</span><br><span class="line">hdmi_mode=47   720p  120Hz</span><br><span class="line">hdmi_mode=48   480p  120Hz</span><br><span class="line">hdmi_mode=49   480p  120Hz H</span><br><span class="line">hdmi_mode=50   480i  120Hz</span><br><span class="line">hdmi_mode=51   480i  120Hz H</span><br><span class="line">hdmi_mode=52   576p  200Hz</span><br><span class="line">hdmi_mode=53   576p  200Hz H</span><br><span class="line">hdmi_mode=54   576i  200Hz</span><br><span class="line">hdmi_mode=55   576i  200Hz H</span><br><span class="line">hdmi_mode=56   480p  240Hz</span><br><span class="line">hdmi_mode=57   480p  240Hz H</span><br><span class="line">hdmi_mode=58   480i  240Hz</span><br><span class="line">hdmi_mode=59   480i  240Hz H</span><br><span class="line">H means 16:9 variant (of a normally 4:3 mode).</span><br><span class="line">2x means pixel doubled (i.e. higher clock rate, with each pixel repeated twice)</span><br><span class="line">4x means pixel quadrupled (i.e. higher clock rate, with each pixel repeated four times)</span><br></pre></td></tr></table></figure></p>
<h3>DMT分辨率(计算机显示器)</h3>
<ul>
<li>以下的英文计算机显示器使用的分辨率,这些分辨率的 <code>hdmi_group = 2</code></li>
</ul>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">hdmi_mode=1    640x350   85Hz</span><br><span class="line">hdmi_mode=2    640x400   85Hz</span><br><span class="line">hdmi_mode=3    720x400   85Hz</span><br><span class="line">hdmi_mode=4    640x480   60Hz</span><br><span class="line">hdmi_mode=5    640x480   72Hz</span><br><span class="line">hdmi_mode=6    640x480   75Hz</span><br><span class="line">hdmi_mode=7    640x480   85Hz</span><br><span class="line">hdmi_mode=8    800x600   56Hz</span><br><span class="line">hdmi_mode=9    800x600   60Hz</span><br><span class="line">hdmi_mode=10   800x600   72Hz</span><br><span class="line">hdmi_mode=11   800x600   75Hz</span><br><span class="line">hdmi_mode=12   800x600   85Hz</span><br><span class="line">hdmi_mode=13   800x600   120Hz</span><br><span class="line">hdmi_mode=14   848x480   60Hz</span><br><span class="line">hdmi_mode=15   1024x768  43Hz  DO NOT USE</span><br><span class="line">hdmi_mode=16   1024x768  60Hz</span><br><span class="line">hdmi_mode=17   1024x768  70Hz</span><br><span class="line">hdmi_mode=18   1024x768  75Hz</span><br><span class="line">hdmi_mode=19   1024x768  85Hz</span><br><span class="line">hdmi_mode=20   1024x768  120Hz</span><br><span class="line">hdmi_mode=21   1152x864  75Hz</span><br><span class="line">hdmi_mode=22   1280x768        reduced blanking</span><br><span class="line">hdmi_mode=23   1280x768  60Hz</span><br><span class="line">hdmi_mode=24   1280x768  75Hz</span><br><span class="line">hdmi_mode=25   1280x768  85Hz</span><br><span class="line">hdmi_mode=26   1280x768  120Hz reduced blanking</span><br><span class="line">hdmi_mode=27   1280x800        reduced blanking</span><br><span class="line">hdmi_mode=28   1280x800  60Hz</span><br><span class="line">hdmi_mode=29   1280x800  75Hz</span><br><span class="line">hdmi_mode=30   1280x800  85Hz</span><br><span class="line">hdmi_mode=31   1280x800  120Hz reduced blanking</span><br><span class="line">hdmi_mode=32   1280x960  60Hz</span><br><span class="line">hdmi_mode=33   1280x960  85Hz</span><br><span class="line">hdmi_mode=34   1280x960  120Hz reduced blanking</span><br><span class="line">hdmi_mode=35   1280x1024 60Hz</span><br><span class="line">hdmi_mode=36   1280x1024 75Hz</span><br><span class="line">hdmi_mode=37   1280x1024 85Hz</span><br><span class="line">hdmi_mode=38   1280x1024 120Hz reduced blanking</span><br><span class="line">hdmi_mode=39   1360x768  60Hz</span><br><span class="line">hdmi_mode=40   1360x768  120Hz reduced blanking</span><br><span class="line">hdmi_mode=41   1400x1050       reduced blanking</span><br><span class="line">hdmi_mode=42   1400x1050 60Hz</span><br><span class="line">hdmi_mode=43   1400x1050 75Hz</span><br><span class="line">hdmi_mode=44   1400x1050 85Hz</span><br><span class="line">hdmi_mode=45   1400x1050 120Hz reduced blanking</span><br><span class="line">hdmi_mode=46   1440x900        reduced blanking</span><br><span class="line">hdmi_mode=47   1440x900  60Hz</span><br><span class="line">hdmi_mode=48   1440x900  75Hz</span><br><span class="line">hdmi_mode=49   1440x900  85Hz</span><br><span class="line">hdmi_mode=50   1440x900  120Hz reduced blanking</span><br><span class="line">hdmi_mode=51   1600x1200 60Hz</span><br><span class="line">hdmi_mode=52   1600x1200 65Hz</span><br><span class="line">hdmi_mode=53   1600x1200 70Hz</span><br><span class="line">hdmi_mode=54   1600x1200 75Hz</span><br><span class="line">hdmi_mode=55   1600x1200 85Hz</span><br><span class="line">hdmi_mode=56   1600x1200 120Hz reduced blanking</span><br><span class="line">hdmi_mode=57   1680x1050       reduced blanking</span><br><span class="line">hdmi_mode=58   1680x1050 60Hz</span><br><span class="line">hdmi_mode=59   1680x1050 75Hz</span><br><span class="line">hdmi_mode=60   1680x1050 85Hz</span><br><span class="line">hdmi_mode=61   1680x1050 120Hz reduced blanking</span><br><span class="line">hdmi_mode=62   1792x1344 60Hz</span><br><span class="line">hdmi_mode=63   1792x1344 75Hz</span><br><span class="line">hdmi_mode=64   1792x1344 120Hz reduced blanking</span><br><span class="line">hdmi_mode=65   1856x1392 60Hz</span><br><span class="line">hdmi_mode=66   1856x1392 75Hz</span><br><span class="line">hdmi_mode=67   1856x1392 120Hz reduced blanking</span><br><span class="line">hdmi_mode=68   1920x1200       reduced blanking</span><br><span class="line">hdmi_mode=69   1920x1200 60Hz</span><br><span class="line">hdmi_mode=70   1920x1200 75Hz</span><br><span class="line">hdmi_mode=71   1920x1200 85Hz</span><br><span class="line">hdmi_mode=72   1920x1200 120Hz reduced blanking</span><br><span class="line">hdmi_mode=73   1920x1440 60Hz</span><br><span class="line">hdmi_mode=74   1920x1440 75Hz</span><br><span class="line">hdmi_mode=75   1920x1440 120Hz reduced blanking</span><br><span class="line">hdmi_mode=76   2560x1600       reduced blanking</span><br><span class="line">hdmi_mode=77   2560x1600 60Hz</span><br><span class="line">hdmi_mode=78   2560x1600 75Hz</span><br><span class="line">hdmi_mode=79   2560x1600 85Hz</span><br><span class="line">hdmi_mode=80   2560x1600 120Hz reduced blanking</span><br><span class="line">hdmi_mode=81   1366x768  60Hz</span><br><span class="line">hdmi_mode=82   1080p     60Hz</span><br><span class="line">hdmi_mode=83   1600x900        reduced blanking</span><br><span class="line">hdmi_mode=84   2048x1152       reduced blanking</span><br><span class="line">hdmi_mode=85   720p      60Hz</span><br><span class="line">hdmi_mode=86   1366x768        reduced blanking</span><br></pre></td></tr></table></figure></p>

    

        <a href="/posts/Raspberry-LCD.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RaspberryPi/">RaspberryPi</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-ArchLinux-Nvidia"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-08-01 09:14:56" datetime="2018-08-01T01:14:56.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-08-01</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux/">Linux</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/ArchLinux-Nvidia.html">ArchLinux 显卡驱动</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>ArchLinux 双显卡驱动。
&lt;!--more--&gt;</p>
<h1>安装</h1>
<h2>Nvidia 和 xorg-xrandr</h2>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S nvidia nvidia-settings xorg-xrandr</span><br></pre></td></tr></table></figure></p>
<h2>配置</h2>
<p>获取显卡 PCI 地址
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep -E <span class="string">"VGA|3D"</span></span><br></pre></td></tr></table></figure></p>
<p>地址转换
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">01:00.0 --&gt; 1:0:0 <span class="comment"># 转换示例</span></span><br></pre></td></tr></table></figure></p>
<p>配置 xorg.conf
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="keyword">vim</span> /etc/X11/xorg.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>添加
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  Section <span class="string">"Module"</span></span><br><span class="line">	Load <span class="string">"modesetting"</span></span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section <span class="string">"Device"</span></span><br><span class="line">	Identifier <span class="string">"nvidia'"</span></span><br><span class="line">	Driver <span class="string">"nvidia"</span></span><br><span class="line">	BusID <span class="string">"1:0:0"</span></span><br><span class="line">	Option <span class="string">"AllowEmptyInitialConfiguration"</span></span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure></li>
</ul>
<h1>各桌面配置 (Display Managers)</h1>
<h2>SDDM (Plasma)</h2>
<p>启动管理器编辑脚本
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /usr/share/sddm/scripts/Xsetup</span><br></pre></td></tr></table></figure></p>
<ul>
<li>添加
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xrandr --setprovideroutputsource modesetting NVIDIA-0</span><br><span class="line">xrandr --auto</span><br></pre></td></tr></table></figure></li>
</ul>
<h2>LightDM (Deepin)</h2>
<p>配置
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/lightdm/display_setup.sh</span><br></pre></td></tr></table></figure></p>
<ul>
<li>添加</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">xrandr --setprovideroutputsource modesetting NVIDIA-0</span><br><span class="line">xrandr --auto</span><br></pre></td></tr></table></figure></p>
<ul>
<li>chmod 权限</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/lightdm/display_setup.sh</span><br></pre></td></tr></table></figure></p>
<p>配置脚本
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/lightdm/lightdm.conf</span><br></pre></td></tr></table></figure></p>
<ul>
<li>添加</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Seat:*]</span><br><span class="line">display-setup-script=/etc/lightdm/display_setup.sh</span><br></pre></td></tr></table></figure></p>
<h2>GDM (Gnome)</h2>
<p>创建两个新的 .desktop 文件</p>
<ul>
<li>/usr/share/gdm/greeter/autostart/optimus.desktop 下创建</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /usr/share/gdm/greeter/autostart/optimus.desktop</span><br></pre></td></tr></table></figure></p>
<ul>
<li>添加</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Type=Application</span><br><span class="line">Name=Optimus</span><br><span class="line">Exec=sh -c <span class="string">"xrandr --setprovideroutputsource modesetting NVIDIA-0; xrandr --auto"</span></span><br><span class="line">NoDisplay=<span class="literal">true</span></span><br><span class="line">X-GNOME-Autostart-Phase=DisplayServer</span><br></pre></td></tr></table></figure></p>
<ul>
<li>/etc/xdg/autostart/optimus.desktop 下创建</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/xdg/autostart/optimus.desktop</span><br></pre></td></tr></table></figure></p>
<ul>
<li>添加</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Type=Application</span><br><span class="line">Name=Optimus</span><br><span class="line">Exec=sh -c <span class="string">"xrandr --setprovideroutputsource modesetting NVIDIA-0; xrandr --auto"</span></span><br><span class="line">NoDisplay=<span class="literal">true</span></span><br><span class="line">X-GNOME-Autostart-Phase=DisplayServer</span><br></pre></td></tr></table></figure></p>
<p>确保 GDM 使用 X 作为默认后端</p>
<ul>
<li>Gnome 默认使用 Wayland 作为后端，只有 Wayland 后端无法启动时才使用 Xorg 后端。</li>
<li>修改为 X</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/gdm/custom.conf</span><br></pre></td></tr></table></figure></p>
<ul>
<li>取消以下注释</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#WaylandEnable=false</span></span><br></pre></td></tr></table></figure></p>
<p>解决错误提示</p>
<ul>
<li>删除主用户 “gdm”，删除组 “gdm”</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo userdel gdm</span><br><span class="line">sudo groupdel gdm</span><br></pre></td></tr></table></figure></p>
<p>GDM使用单独的 dconf 数据库来控制电源管理</p>
<ul>
<li>通过将用户设置复制到 GDM 的 dconf 数据库，可以使 GDM 的行为与用户会话相同。</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IFS=$<span class="string">'\n'</span>; <span class="keyword">for</span> x <span class="keyword">in</span> $(sudo -u YOUR_USER gsettings list-recursively org.gnome.settings-daemon.plugins.power); <span class="keyword">do</span> <span class="built_in">eval</span> <span class="string">"sudo -u gdm dbus-launch gsettings set <span class="variable">$x</span>"</span>; <span class="keyword">done</span>; <span class="built_in">unset</span> IFS</span><br></pre></td></tr></table></figure></p>
<ul>
<li>或者简单地禁用自动挂起(在电池上运行时，也可以用 ac 替换电池来禁用它)：</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u gdm dbus-launch gsettings <span class="built_in">set</span> org.gnome.settings-daemon.plugins.power sleep-inactive-ac-type <span class="string">'nothing'</span></span><br></pre></td></tr></table></figure></p>
<hr>
<p><strong>参考</strong></p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/NVIDIA_Optimus#Display_Managers" target="_blank" rel="noopener">NVIDIA Optimus</a></li>
<li><a href="https://wiki.archlinux.org/index.php/GDM#Use_Xorg_backend" target="_blank" rel="noopener">GDM</a></li>
</ul>

    

        <a href="/posts/ArchLinux-Nvidia.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ArchLinux/">ArchLinux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-RaspberryIp"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-07-31 11:01:07" datetime="2018-07-31T03:01:07.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-07-31</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Diary/">Diary</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/RaspberryIp.html">树莓派获取 IP 地址</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>树莓派获取 IP
&lt;!--more--&gt;</p>
<h1>有显示器</h1>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br><span class="line">hostname -I</span><br></pre></td></tr></table></figure></p>
<h1>无显示器有路由器</h1>
<ul>
<li>连接路由器后<a href="http://192.168.1.1" target="_blank" rel="noopener">登陆路由器管理界</a>面查看即可。</li>
</ul>
<h1>只有电脑</h1>
<ul>
<li>网线直接把树莓派与电脑连接起来</li>
<li>电脑需要连 WiFi</li>
<li>在 设置-&gt;网络-&gt;Wlan-&gt;网络与共享中心-&gt;Wlan-&gt;属性-&gt;共享-&gt;允许​其它用户通过它来连接-&gt;确定。</li>
<li>CMD 查看 IP</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping raspberrypi.local</span><br></pre></td></tr></table></figure></p>
<ul>
<li>改变了树莓派的主机名字，Avahi 也将改变 .local 的 DNS 多播地址</li>
</ul>
<p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arp -a</span><br><span class="line"><span class="comment"># 通常以192.168开头，最后一位是1</span></span><br></pre></td></tr></table></figure></p>
<h1>只有手机（安卓）</h1>
<ul>
<li>USB 共享的网络</li>
<li>开启热点</li>
<li>使用局域网扫描软件(<a href="https://play.google.com/store/apps/details?id=com.overlook.android.fing" target="_blank" rel="noopener">Find</a>,IpScanner,Es文件管理器...)查询 IP</li>
</ul>
<hr>
<p><strong>参考</strong></p>
<ul>
<li><a href="https://blog.csdn.net/wongnoubo/article/details/79628313" target="_blank" rel="noopener">查看树莓派ip地址的几种方法</a></li>
<li><a href="https://www.jianshu.com/p/f2e0a02c01d9" target="_blank" rel="noopener">树莓派获取ip地址的N种方法</a></li>
</ul>

    

        <a href="/posts/RaspberryIp.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RaspberryPi/">RaspberryPi</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-ArchLinux-command"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-07-30 12:23:09" datetime="2018-07-30T04:23:09.000Z"  itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-07-30</time>
        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux/">Linux</a></li></ul>



           
    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/posts/ArchLinux-command.html">ArchLinux Pacman 命令</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>pacman 软件包管理器
&lt;!--more--&gt;</p>
<h1>使用</h1>
<h2>安装指定的包</h2>
<p>安装或者升级单个软件包，或者一列软件包（包含依赖包）
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S package_name1 package_name2 ...</span><br></pre></td></tr></table></figure></p>
<p>用正则表达式安装多个软件包
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S $(pacman -Ssq package_regex)</span><br></pre></td></tr></table></figure></p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Pacman/Tips_and_tricks" target="_blank" rel="noopener">pacman/Tips and tricks</a></li>
</ul>
<p>选择仓库按照
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S extra/package_name</span><br></pre></td></tr></table></figure></p>
<p>安装多个含有相似名称的软件包，而并非整个包组或全部匹配的软件包
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S plasma-&#123;desktop,mediacenter,nm&#125;</span><br></pre></td></tr></table></figure></p>
<p>多层扩展
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S plasma-&#123;workspace&#123;,-wallpapers&#125;,pa&#125;</span><br></pre></td></tr></table></figure></p>
<p>安装包组
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S gnome</span><br></pre></td></tr></table></figure></p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Creating_packages#Meta_packages_and_groups" target="_blank" rel="noopener">包组</a></li>
</ul>
<h2>删除软件包</h2>
<p>删除但保留依赖关系
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -R package_name</span><br></pre></td></tr></table></figure></p>
<p>删除指定软件包，及其所有没有被其他已安装软件包使用的依赖关系
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Rs package_name</span><br></pre></td></tr></table></figure></p>
<p>删除软件包和所有依赖
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Rsc package_name</span><br></pre></td></tr></table></figure></p>
<p>删除但不删除依赖这个软件包的其他程序
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Rdd package_name</span><br></pre></td></tr></table></figure></p>
<h2>升级软件包</h2>
<p>升级整个系统
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Syu</span><br></pre></td></tr></table></figure></p>
<h2>查询包数据库</h2>
<ol>
<li>
<p>pacman 使用 -Q 参数查询本地软件包数据库
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Q --<span class="built_in">help</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>使用 -S 参数来查询远程同步的数据库
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S --<span class="built_in">help</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>pacman 可以在包数据库中查询软件包，查询位置包含了软件包的名字和描述
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Ss string1 string2 ...</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>有时，-s的内置正则会匹配很多不需要的结果，所以应当指定仅搜索包名，而非描述或其他子段，下面的命令就会返回很多不必要结果
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Ss <span class="string">'^vim-'</span></span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>要查询已安装的软件包：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Qs string1 string2 ...</span><br></pre></td></tr></table></figure></p>
</li>
</ol>
<ol start="6">
<li>
<p>按文件名查找软件库：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Fs string1 string2 ...</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>显示软件包的详尽的信息：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Si package_name</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>查询本地安装包的详细信息：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Qi package_name</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>使用两个 -i 将同时显示备份文件和修改状态：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Qii package_name</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>要获取已安装软件包所包含文件的列表：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Ql package_name</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>查询远程库中软件包包含的文件：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Fl package_name</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>检查软件包安装的文件是否都存在：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Qk package_name</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>两个参数k将会执行一次更彻底的检查。 查询数据库获取某个文件属于哪个软件包：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Qo /path/to/file_name</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>查询文件属于远程数据库中的哪个软件包：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Fo /path/to/file_name</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>要罗列所有不再作为依赖的软件包(孤立orphans)：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Qdt</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>要罗列所有明确安装而且不被其它包依赖的软件包：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Qet</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>要显示软件包的依赖树：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pactree package_name</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>检查一个安装的软件包被那些包依赖，可以使用 pkgtoolsAUR中的whoneeds:
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whoneeds package_name</span><br></pre></td></tr></table></figure></p>
</li>
</ol>
<ul>
<li>或者pactree中使用-r:
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pactree -r package_name</span><br></pre></td></tr></table></figure></li>
</ul>
<h2>数据库结构</h2>
<p>pacman数据库通常位于 <code>/var/lib/pacman/sync</code>. 对于每一个在 <code>/etc/pacman.conf</code> 中指定的软件仓库， 这里都有一个一致的数据库。数据库文件夹里每个 <code>tar.gz</code> 文件都包含着一个仓库的软件包信息。例如which 包:
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">% tree which<span class="number">-2.20</span><span class="number">-6</span></span><br><span class="line">which<span class="number">-2.20</span><span class="number">-6</span></span><br><span class="line">|-- depends</span><br><span class="line">`-- desc</span><br></pre></td></tr></table></figure></p>
<ul>
<li>这个 depends 项列出了该软件的依赖包， 而desc有该包的介绍，例如文件大小和MD5值 。</li>
</ul>
<h2>清理软件包缓存</h2>
<p>pacman 将下载的软件包保存在 <code>/var/cache/pacman/pkg/</code> 并且不会自动移除旧的和未安装版本的软件包，因此需要手动清理，以免该文件夹过于庞大。</p>
<p>使用内建选项即可清除未安装软件包的缓存：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Sc</span><br></pre></td></tr></table></figure></p>
<ul>
<li>pacman 提供的 paccache 命令默认会删除近3个版本前的软件包</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paccache -r</span><br></pre></td></tr></table></figure></p>
<ul>
<li>Tip: 可以使用 pacman hooks 自动执行清理，这里是<a href="https://bbs.archlinux.org/viewtopic.php?pid=1694743#p1694743" target="_blank" rel="noopener">参考示例</a>。</li>
<li>也可以自己设置保留最近几个版本：</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paccache -rk 1</span><br></pre></td></tr></table></figure></p>
<p>清理所有未安装包的缓存文件
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paccache -ruk0</span><br></pre></td></tr></table></figure></p>
<h1>其它命令</h1>
<p>升级系统时安装其他软件包：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Syu package_name1 package_name2 ...</span><br></pre></td></tr></table></figure></p>
<p>下载包而不安装它：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Sw package_name</span><br></pre></td></tr></table></figure></p>
<p>安装一个本地包(不从源里下载）：
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -U /path/to/package/package_name-version<span class="selector-class">.pkg</span><span class="selector-class">.tar</span><span class="selector-class">.xz</span></span><br></pre></td></tr></table></figure></p>
<p>要将本地包保存至缓存，可执行：
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -U file://path/to/package/package_name-version.pkg.tar.xz</span><br></pre></td></tr></table></figure></p>
<p>安装一个远程包（不在 pacman 配置的源里面）
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -U http://www.example.com/repo/example.pkg.tar.xz</span><br></pre></td></tr></table></figure></p>
<ul>
<li>要禁用 <code>-S</code>, <code>-U</code> 和 <code>-R</code> 动作，可以使用 <code>-p</code> 选项.</li>
</ul>
<hr>
<p><strong>Via</strong></p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Pacman_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" target="_blank" rel="noopener">Pacman</a></li>
</ul>

    

        <a href="/posts/ArchLinux-command.html" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ArchLinux/">ArchLinux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </div>
    
</article>

        </li>
    
    </ul>

    
<nav id="page-nav">
    <div class="inner">
    <a class="extend prev" rel="prev" href="/page/10/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/12/">下一页</a>
    </div>
</nav>


</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/xml/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Vitan &copy; 2017 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: false, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '您似乎掉线了呢！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
